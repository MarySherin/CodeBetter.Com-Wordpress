<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>CodeBetter.Com | Stuff you need to Code Better!</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://cdn1.codebetter.com/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='CodeBetter.Com' href='http://codebetter.com/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/3e52f3b292da95601a0d3fbd9775ac0e.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content">
			<div id="main" class="grid_8">
			<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://feeds.feedburner.com/CodeBetter"  rel="nofollow"><img src="http://www2.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://feeds.feedburner.com/CodeBetter" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div>			
	<div id="nav-above" class="navigation">
		<div class="nav-previous"><a href="?page=0" >&laquo; Previous Page</a></div>
		<div class="nav-next"><a href="?page=2" > Next Page &raquo;</a></div>
		
	</div><!-- #nav-above -->


				
			<div id="post-827" class="post-827 post type-post status-publish format-standard hentry category-uncategorized">
			<h2 class="entry-title"><a href="http://codebetter.com/brendantompkins/2011/02/07/ubuntu-server-setup-with-python-fabric/" title="Permalink to Ubuntu Server Setup with Python Fabric" rel="bookmark">Ubuntu Server Setup with Python Fabric</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/brendantompkins/2011/02/07/ubuntu-server-setup-with-python-fabric/" title="7:16 pm" rel="bookmark"><span class="entry-date">February 7, 2011</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/brendantompkins" title="View all posts by Brendan Tompkins">Brendan Tompkins</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>On my journey to figure out how to host CodeBetter.Com under Ubuntu Linux/Wordpress, I stumbled (via <a href="http://codebetter.com/drusellers">Dru&#8217;s</a> excellent sage advice) upon the <a href="http://docs.fabfile.org/0.9.3/">Python library Fabric</a> to automate setup of the servers.  From the Fabric docs :</p>
<blockquote><p>Fabric is a Python library and command-line tool for streamlining the use of SSH for application deployment or systems administration tasks.</p>
<p>It provides a basic suite of operations for executing local or remote shell commands (normally or via <tt>sudo</tt>) and uploading/downloading files, as well as auxiliary functionality such as prompting the running user for input, or aborting execution.</p></blockquote>
<p>I spent about two weeks tweaking my fabric scripts to setup each of the servers in <a href="http://codebetter.com/brendantompkins/2011/02/07/cloud-hosting-codebetter-com-2/">CodeBetter&#8217;s cloud setup</a>.   If you&#8217;ve not tried cloud hosting you should.   It&#8217;s stupidly simple to stand up a new server (just a click of a button), pay for only what you need, scale servers up and down, and cancel at any moment.   But cloud hosting and automated configuration management go hand in hand.   What good is it being able to spin up a new instance at a moments notice if you have to spend hours configging it?</p>
<p>The process was really fun, and opened my eyes as to what&#8217;s possible with automated configuration management.  Everything, from OS updating to user account creation to deployment of content is done via Fabric.  For example, here&#8217;s a gist of the method used to create a new user :</p>
<script src="http://gist.github.com/814870.js"></script><noscript><link rel="stylesheet" href="https://gist.github.com/stylesheets/gist/embed.css"><div id="gist-814870" class="gist">
  
  
    
      
                

        <div class="gist-file">
          <div class="gist-data gist-syntax">
            
            
            
              <div class="highlight"><pre><div class='line' id='LC1'><span class="k">def</span> <span class="nf">new_user</span><span class="p">(</span><span class="n">admin_username</span><span class="p">,</span> <span class="n">admin_password</span><span class="p">):</span>   </div><div class='line' id='LC2'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">env</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="s">&#39;root&#39;</span></div><div class='line' id='LC3'>&nbsp;&nbsp;&nbsp;&nbsp;</div><div class='line' id='LC4'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="c"># Create the admin group and add it to the sudoers file</span></div><div class='line' id='LC5'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">admin_group</span> <span class="o">=</span> <span class="s">&#39;admin&#39;</span></div><div class='line' id='LC6'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runcmd</span><span class="p">(</span><span class="s">&#39;addgroup {group}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="n">admin_group</span><span class="p">))</span></div><div class='line' id='LC7'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runcmd</span><span class="p">(</span><span class="s">&#39;echo &quot;%{group} ALL=(ALL) ALL&quot; &gt;&gt; /etc/sudoers&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span></div><div class='line' id='LC8'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">group</span><span class="o">=</span><span class="n">admin_group</span><span class="p">))</span></div><div class='line' id='LC9'>&nbsp;&nbsp;&nbsp;&nbsp;</div><div class='line' id='LC10'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="c"># Create the new admin user (default group=username); add to admin group</span></div><div class='line' id='LC11'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runcmd</span><span class="p">(</span><span class="s">&#39;adduser {username} --disabled-password --gecos &quot;&quot;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span></div><div class='line' id='LC12'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">username</span><span class="o">=</span><span class="n">admin_username</span><span class="p">))</span></div><div class='line' id='LC13'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runcmd</span><span class="p">(</span><span class="s">&#39;adduser {username} {group}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span></div><div class='line' id='LC14'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">username</span><span class="o">=</span><span class="n">admin_username</span><span class="p">,</span></div><div class='line' id='LC15'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">group</span><span class="o">=</span><span class="n">admin_group</span><span class="p">))</span></div><div class='line' id='LC16'>&nbsp;&nbsp;&nbsp;&nbsp;</div><div class='line' id='LC17'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="c"># Set the password for the new admin user</span></div><div class='line' id='LC18'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runcmd</span><span class="p">(</span><span class="s">&#39;echo &quot;{username}:{password}&quot; | chpasswd&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span></div><div class='line' id='LC19'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">username</span><span class="o">=</span><span class="n">admin_username</span><span class="p">,</span></div><div class='line' id='LC20'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">password</span><span class="o">=</span><span class="n">admin_password</span><span class="p">))</span></div></pre></div>
            
          </div>

          <div class="gist-meta">
            <a href="https://gist.github.com/raw/814870/d9f18fcf4ea003a65f2d52ca776d71620c895842/Fabric-UserSetup.py" style="float:right;">view raw</a>
            <a href="https://gist.github.com/814870#file_fabric_user_setup.py" style="float:right;margin-right:10px;color:#666">Fabric-UserSetup.py</a>
            <a href="https://gist.github.com/814870">This Gist</a> brought to you by <a href="http://github.com">GitHub</a>.
          </div>
        </div>
      
    
  
</div>
</noscript>
<p>You can get the <a href="https://github.com/btompkins/CodeBetter.Com-Fabric">Fabric project to setup our servers here</a>.  Here&#8217;s a short screencast showing the Fabric deployment of our frontend NGINX reverse proxy server:</p>
<p><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="437" height="392" id="viddler_ff682176"><param name="movie" value="http://www.viddler.com/player/ff682176/" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><embed src="http://www.viddler.com/player/ff682176/" width="437" height="392" type="application/x-shockwave-flash" allowScriptAccess="always" allowFullScreen="true" name="viddler_ff682176"></embed></object></p>
<p>Having our setup in Fabric scripts is also a great comfort.  Since it&#8217;s automated, it&#8217;s also documented and repeatable.  Should we find ourselves being slashdotted someday, we can simply spin up a new app tier host, run it&#8217;s related fabric configuration script and then tear it down when we&#8217;re back to normal traffic.  </p>
<p>-Brendan</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/brendantompkins/category/uncategorized/" title="View all posts in Uncategorized" rel="category">Uncategorized</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/brendantompkins/2011/02/07/ubuntu-server-setup-with-python-fabric/#respond" title="Comment on Ubuntu Server Setup with Python Fabric"><span class="dsq-postid" rel="827 http://codebetter.com/brendantompkins/?p=827">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-827 -->

		
						
			<div id="post-824" class="post-824 post type-post status-publish format-standard hentry category-uncategorized">
			<h2 class="entry-title"><a href="http://codebetter.com/brendantompkins/2011/02/07/cloud-hosting-codebetter-com-2/" title="Permalink to Cloud Hosting CodeBetter.Com" rel="bookmark">Cloud Hosting CodeBetter.Com</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/brendantompkins/2011/02/07/cloud-hosting-codebetter-com-2/" title="5:58 pm" rel="bookmark"><span class="entry-date">February 7, 2011</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/brendantompkins" title="View all posts by Brendan Tompkins">Brendan Tompkins</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>It&#8217;s been over a year in the making, but CodeBetter.Com has finally settled into its new home.  It&#8217;s been a journey from Community Server, hosted on two large Windows 2008 servers (SQL Box - Core2Quad 2.4 Ghz Q6600 4G 2x500G SATA RAID, Web Server - Intel Core2Duo E6850 DC 2G 2x250G SATA RAID) to WordPress, running on 4 small cloud hosted Ubuntu 10.04 small Linux servers.  Our current architecture looks sorta like this:</p>
<p><a href="http://codebetter.com/brendantompkins/files/2011/02/codebetter.png"><img title="codebetter" src="http://codebetter.com/brendantompkins/files/2011/02/codebetter.png" alt="" width="550" height="405" /></a></p>
<p>Community Server running on Windows Server/ASP.Net has treated us well over the years, providing a solid platform on which we could grow to our current size.  Increasingly however, server cost, Software/OS/SQL Server licensing (while currently deferred via BizSpark and free licenses from Telligent) was threatening our future ability to provide the kind of community support we&#8217;ve been able to do since 2005.</p>
<p>We had a lot of internal discussions about what platform we should use, and talked about rolling our own platform from which to blog but decided against it.  I think <a href="http://devlicio.us/blogs/derik_whittaker/">Derik Whittaker</a>said it the best:</p>
<blockquote><p>The fact is &#8216;blog engines&#8217; are a dime a dozen.  This is  a boring problem which has been solved many times over&#8230; I say pick an engine that we can live with and move on.</p></blockquote>
<p>There were lots of factors that pushed us in the direction of hosting with an open source blogging platform like WordPress, but some of the biggest were WordPress&#8217; strengths : an outstanding blogging platform with massive community support and extensibility via plugins.</p>
<p>I&#8217;m going to be doing a series of posts on the more interesting things I&#8217;ve stumbled across in this journey, like using Python Fabric for automating the configuration of new server instances. I&#8217;m also making all of the tools that I&#8217;ve used and source code for the site itself<a href="https://github.com/btompkins">available up on GitHub</a>, so if you&#8217;re interested in how anything around here was done, you should be able to glean the information there.</p>
<p>-Brendan</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/brendantompkins/category/uncategorized/" title="View all posts in Uncategorized" rel="category">Uncategorized</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/brendantompkins/2011/02/07/cloud-hosting-codebetter-com-2/#respond" title="Comment on Cloud Hosting CodeBetter.Com"><span class="dsq-postid" rel="824 http://codebetter.com/brendantompkins/?p=824">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-824 -->

		
						
			<div id="post-93" class="post-93 post type-post status-publish format-standard hentry category-small-ideas">
			<h2 class="entry-title"><a href="http://codebetter.com/drusellers/2011/02/06/a-thought-on-hard-vs-soft/" title="Permalink to A thought on Hard vs Soft" rel="bookmark">A thought on Hard vs Soft</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/drusellers/2011/02/06/a-thought-on-hard-vs-soft/" title="5:37 pm" rel="bookmark"><span class="entry-date">February 6, 2011</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/drusellers" title="View all posts by Dru Sellers">Dru Sellers</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p><a title="Frozen Stream by Eifion, on Flickr" href="http://www.flickr.com/photos/eifion/92701814/"><img src="http://farm1.static.flickr.com/35/92701814_87cc69317c_m.jpg" alt="Frozen Stream" width="240" height="180" /></a></p>
<p>With the move from <strong>RDBMS</strong> to <strong>NoSQL</strong> are we seeing the same shift that we saw when we moved from <strong>Hardware</strong> to <strong>Software</strong>. Are we seeing a shift from <strong>Harddata</strong> to <strong>Softdata</strong>?</p>
<blockquote>
<p>Water is fluid, soft and yielding. But water will wear away rock, which is rigid and cannot yield. As a rule, whatever is fluid, soft and yielding will overcome whatever is rigid and hard. This is another paradox: what is soft is strong.</p>
<p><em>Lao-tzu</em></p></blockquote>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/drusellers/category/small-ideas/" title="View all posts in Small Ideas" rel="category">Small Ideas</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/drusellers/2011/02/06/a-thought-on-hard-vs-soft/#respond" title="Comment on A thought on Hard vs Soft"><span class="dsq-postid" rel="93 http://codebetter.com/drusellers/?p=93">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-93 -->

		
						
			<div id="post-91" class="post-91 post type-post status-publish format-standard hentry category-small-ideas">
			<h2 class="entry-title"><a href="http://codebetter.com/drusellers/2011/02/05/what-fun/" title="Permalink to What fun!" rel="bookmark">What fun!</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/drusellers/2011/02/05/what-fun/" title="5:13 pm" rel="bookmark"><span class="entry-date">February 5, 2011</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/drusellers" title="View all posts by Dru Sellers">Dru Sellers</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<blockquote>
<p>It goes against the grain of modern education to teach children to program. What fun is there in making plans, acquiring discipline in organizing thoughts, devoting attention to detail and learning to be self-critical?</p>
<p>Alan Perlis, Epigrams in Programming</p>
</blockquote>
<p>I just love that quote.</p>
<p>via: <a href="http://htdp.org/2003-09-26/Book/curriculum-Z-H-2.html">http://htdp.org/2003-09-26/Book/curriculum-Z-H-2.html</a></p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/drusellers/category/small-ideas/" title="View all posts in Small Ideas" rel="category">Small Ideas</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/drusellers/2011/02/05/what-fun/#respond" title="Comment on What fun!"><span class="dsq-postid" rel="91 http://codebetter.com/drusellers/?p=91">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-91 -->

		
						
			<div id="post-196" class="post-196 post type-post status-publish format-standard hentry category-uncategorized">
			<h2 class="entry-title"><a href="http://codebetter.com/kylebaley/2011/02/03/a-reason-to-ui-test-or-how-to-fill-in-the-gaps-2/" title="Permalink to A reason to UI test, or &ldquo;How to fill in the gaps&rdquo;" rel="bookmark">A reason to UI test, or &ldquo;How to fill in the gaps&rdquo;</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/kylebaley/2011/02/03/a-reason-to-ui-test-or-how-to-fill-in-the-gaps-2/" title="11:31 am" rel="bookmark"><span class="entry-date">February 3, 2011</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley" title="View all posts by Kyle Baley">Kyle Baley</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>Dja miss me? Of course not. You’re reading this in an RSS reader and if I hadn’t asked the question, you wouldn’t have noticed I was gone. If you’re like me, you’re scanning through until you can find any reason to skip this post and move on to the next one. Here, I’ll help your little mental filter:</p>
<p><strong>Executive summary</strong>: An example of when UI/integration tests succeed where unit tests don’t.</p>
<p>But I’m warning ya, you’ll miss out on the amusing delivery if you go by this alone.</p>
<h2>Pre-amble</h2>
<p>We are tantalizingly close to coming out of trial mode with <a href="http://corp.bookedin.net" target="_blank">BookedIN</a>. My business partner had a nice little debate for our development process after its out. His stance: we need to write UI tests before we write code to avoid a lot of the issues that were arising. My stance: We unit test the ever-living raccoons out of the app now (thanks in no small part to <a href="http://code.google.com/p/jukito/" target="_blank">Jukito</a>). And we <em>do</em> have a UI testing process that was used for major features. While I agreed that we should have more, I was leery that it would make us any more productive. And I doubted it would help us discover any more issues than we already were…</p>
<p><em>(Ed. note: Did you notice the ellipsis at the end of that last paragraph? That’s what we in the legitimate journalism field call foreshadowing. Or, as is more often the case in my writing, foreboding. Note that you won’t see classy tropes like this from those hacks at <a href="http://www.lostechies.com" target="_blank">Los Techies</a>.)*</em></p>
<h2>The bug</h2>
<p>When someone logs into the application, there are a number of notifications that could pop up in various scenarios:</p>
<ul>
<li>Owner logging in for the first time: Enter company details, following by a welcome message
<li>New staff member: welcome message
<li>Owner after the first time: You haven’t verified your email address yet (assuming it hasn’t, in fact, been verified)
<li>Anyone after the trial period has expired: Message that says “Just kidding, you don’t have to pay! Tee hee to those that did.”
<li>Existing users after a major release: What’s new! </li>
</ul>
<p>There might be more, you can’t expect me to keep all this &amp;*^% in my head.<a href="http://codebetter.com/kylebaley/files/2011/02/BookedIN.png"><img style="border-right-width: 0px;padding-left: 0px;padding-right: 0px;float: right;border-top-width: 0px;border-bottom-width: 0px;border-left-width: 0px;padding-top: 0px" border="0" alt="BookedIN" align="right" src="http://codebetter.com/kylebaley/files/2011/02/BookedIN_thumb.png" width="244" height="134"></a></p>
<p>We covered all of this with a NotificationController. It would determine what conditions were met and start piling messages into a queue and display them in order. All of it <em>very </em>thoroughly tested with unit tests to make sure repositories were called and messages sent and users updated and so on and so forth.</p>
<p>The bug as listed was: When they log out and re-log in, users are seeing the what’s new message again.</p>
<p>As with most bugs, this was an oversimplication. As I tested, I discovered that this would happen intermittently. Sometimes it would happen as stated. Sometimes a new owner would enter her company details, log out, log in again, then see the company details window once more. Sometimes it would just work.</p>
<h2>The analysis</h2>
<p>“How can this be?” says I. The tests clearly outline what is supposed to happen and the code clearly passes all the tests.</p>
<p>As mentioned, we have a UI testing framework in place and used it on occasion. The reason it is not used more frequently is a topic that is already half-written but the short answer is: Google Web Toolkit adds some hurdles we haven’t had time to overcome yet. But given our recent debate, I fired up Notepad and banged out a capybara scenario. Nine times out of ten, it would fail. Except when I ran through the debugger in which case ten times out of ten, it would succeed.</p>
<h2>The culprit</h2>
<p>A good, old-fashioned race condition. In our client piece, the code for the first notification scenario above reads like this (it’s in pseudo-code because I don’t actually code anymore…):</p>
<p>if (logging_in_for_the_first_time) { <br />&nbsp;&nbsp;&nbsp; showWelcomeMessage( ); <br />&nbsp;&nbsp;&nbsp; markWhatsNewMessageAsSeen( ); <br />}</p>
<p>Judicious use of logging revealed the following exchange on the server:</p>
<p>[MarkingWelcomeMessageSeen] Starting execution <br />[MarkingWelcomeMessageSeen] Retrieving user details <br />[MarkingWelcomeMessageSeen] Marking welcome message seen <br />[MarkingWhatsNewMessageSeen] Starting execution <br />[MarkingWhatsNewMessageSeen] Retrieving user details <br />[MarkingWhatsNewMessageSeen] Marking what’s new message seen <br />[MarkingWelcomeMessageSeen] Saving user <br />[MarkingWhatsNewMessageSeen] Saving user</p>
<p>After making a mental note to perhaps differentiate my method names a little better, it was painfully obvious what the problem was.</p>
<h2>The solution</h2>
<p>That’s not the topic of this post. Focus, Hillbilly!</p>
<h2>The moral</h2>
<p>As I said, all unit tests passed. Our tests on the client proved that we were marking the messages seen in the appropriate conditions. Tests for the server component show that we are calling repositories and setting properties (or the Java equivalent: setting properties, but with more code) properly.</p>
<p>But the problem didn’t manifest itself until we did the UI test (or integration test, if you prefer).</p>
<p>So folks, heed my warning. A lack of decent integration/UI tests can lead to a smug and self-righteous business partner.</p>
<p>Kyle the Humbled</p>
<p><font size="1">* shiny nickel for those of you who recognize this little bit being ripped off from Bloom County</font></p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/kylebaley/category/uncategorized/" title="View all posts in Uncategorized" rel="category">Uncategorized</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/kylebaley/2011/02/03/a-reason-to-ui-test-or-how-to-fill-in-the-gaps-2/#respond" title="Comment on A reason to UI test, or &ldquo;How to fill in the gaps&rdquo;"><span class="dsq-postid" rel="196 http://codebetter.com/kylebaley/2011/02/03/a-reason-to-ui-test-or-how-to-fill-in-the-gaps-2/">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-196 -->

		
			
	<div id="nav-below" class="navigation">
		<div class="nav-previous"><a href="?page=0" >&laquo; Previous Page</a></div>
		<div class="nav-next"><a href="?page=2" > Next Page &raquo;</a></div>
		
	</div><!-- #nav-below -->
			</div><!-- #main -->
			<div id="sidebar" class="grid_4">
						<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="wpmu-recent-posts" class="widget-container wpmu_recent_posts_widget"><h3 class="widget-title"> Latest Posts </h3><ul>
<li><a href="http://codebetter.com/iancooper/2011/01/16/alt-next/">Alt.Next</a> by <a href="http://codebetter.com/iancooper/">Ian Cooper</a></li>
<li><a href="http://codebetter.com/kylebaley/2011/02/19/thinking-about-the-user-or-how-to-consider-the-experience/">Thinking about the user, or &ldquo;How to consider the experience&rdquo;</a> by <a href="http://codebetter.com/kylebaley/">Kyle Baley</a></li>
<li><a href="http://codebetter.com/jameskovacs/2011/02/16/getload-polymorphism-in-nhibernate-3/">Get/Load Polymorphism in NHibernate 3</a> by <a href="http://codebetter.com/jameskovacs/">James Kovacs</a></li>
<li><a href="http://codebetter.com/petervanooijen/2011/02/17/subversion-and-monodevelop/">Subversion and Monodevelop</a> by <a href="http://codebetter.com/petervanooijen/">Peter van Ooijen</a></li>
<li><a href="http://codebetter.com/patricksmacchia/2011/02/15/the-beauty-of-evolutionary-design-and-levelization/">The beauty of Evolutionary Design and Levelization</a> by <a href="http://codebetter.com/patricksmacchia/">Patrick Smacchia</a></li>
<li><a href="http://codebetter.com/benhall/2010/10/22/dolphin-deploy-deploying-asp-net-applications-using-ironruby/">Dolphin Deploy: Deploying ASP.net applications using IronRuby</a> by <a href="http://codebetter.com/benhall/">Ben Hall</a></li>
<li><a href="http://codebetter.com/davidhayden/2010/11/22/jquery-mobile-alpha-2-bug-with-links/">jQuery Mobile Alpha 2 Bug with Links</a> by <a href="http://codebetter.com/davidhayden/">David Hayden</a></li>
<li><a href="http://codebetter.com/jeremymiller/2011/01/28/announcing-the-new-atx-code-lunch/">Announcing the new ATX Code Lunch</a> by <a href="http://codebetter.com/jeremymiller/">Jeremy D. Miller</a></li>
<li><a href="http://codebetter.com/brendantompkins/2011/02/07/ubuntu-server-setup-with-python-fabric/">Ubuntu Server Setup with Python Fabric</a> by <a href="http://codebetter.com/brendantompkins/">Brendan Tompkins</a></li>
<li><a href="http://codebetter.com/drusellers/2011/02/06/a-thought-on-hard-vs-soft/">A thought on Hard vs Soft</a> by <a href="http://codebetter.com/drusellers/">Dru Sellers</a></li></ul></li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<div class="lqm_ad"  lqm_channel="1" lqm_publisher="797" lqm_zone="1" lqm_format="7"></div>
				<a href="http://lakequincy.com?797" style="text-align:right;font-size:8px;display:block;color:#000;text-decoration:none;font-family:Sans-Serif;margin:0;padding:0;">Ads by Lake Quincy Media</a>
				
				
				<ul class="xoxo">		
					<li id="wpmu-recent-blogs" class="widget-container wpmu_recent_blogs_widget"><h3 class="widget-title"> CodeBetter.Com Bloggers </h3><ul>
<li><a href="http://codebetter.com/scottbellware/">Scott Bellware</a></li>
<li><a href="http://codebetter.com/iancooper/">Ian Cooper</a></li>
<li><a href="http://codebetter.com/kylebaley/">Kyle Baley</a></li>
<li><a href="http://codebetter.com/jameskovacs/">James Kovacs</a></li>
<li><a href="http://codebetter.com/petervanooijen/">Peter van Ooijen</a></li>
<li><a href="http://codebetter.com/patricksmacchia/">Patrick Smacchia</a></li>
<li><a href="http://codebetter.com/benhall/">Ben Hall</a></li>
<li><a href="http://codebetter.com/davidhayden/">David Hayden</a></li>
<li><a href="http://codebetter.com/jeremymiller/">Jeremy D. Miller</a></li>
<li><a href="http://codebetter.com/brendantompkins/">Brendan Tompkins</a></li>
<li><a href="http://codebetter.com/drusellers/">Dru Sellers</a></li>
<li><a href="http://codebetter.com/howarddierking/">Howard Dierking</a></li>
<li><a href="http://codebetter.com/sebastienlambla/">Sebastien Lambla</a></li>
<li><a href="http://codebetter.com/glennblock/">Glenn Block</a></li>
<li><a href="http://codebetter.com/matthewpodwysocki/">Matthew Podwysocki</a></li>
<li><a href="http://codebetter.com/karlseguin/">Karl Seguin</a></li>
<li><a href="http://codebetter.com/gregyoung/">Greg Young</a></li>
<li><a href="http://codebetter.com/darrellnorton/">Darrell Norton</a></li>
<li><a href="http://codebetter.com/stevehebert/">Steve Hebert</a></li>
<li><a href="http://codebetter.com/grantkillian/">Grant Killian</a></li>
<li><a href="http://codebetter.com/markdigiovanni/">Mark DiGiovanni</a></li>
<li><a href="http://codebetter.com/paullaudeman/">Paul Laudeman</a></li>
<li><a href="http://codebetter.com/jefferypalermo/">Jeffery Palermo</a></li>
<li><a href="http://codebetter.com/raymondlewallen/">Raymond Lewallen</a></li>
<li><a href="http://codebetter.com/rodpaddock/">Rod Paddock</a></li>
<li><a href="http://codebetter.com/robconery/">Rob Conery</a></li>
<li><a href="http://codebetter.com/markneedham/">Mark Needham</a></li>
<li><a href="http://codebetter.com/aaronjensen/">Aaron Jensen</a></li>
<li><a href="http://codebetter.com/jpboodhoo/">Jean-Paul S. Boodhoo</a></li>
<li><a href="http://codebetter.com/wardbell/">Ward Bell</a></li>
<li><a href="http://codebetter.com/jefflynch/">Jeff Lynch</a></li>
<li><a href="http://codebetter.com/davelaribee/">Dave Laribee</a></li></ul></li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/entrypage/amp7-release?utm_source=cb&utm_medium=rectangle&utm_term=6553&utm_content=amp7-release&utm_campaign=antsmemoryprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/AMP7_Launch_Jan11_300x250_M1.gif"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #content -->
	
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>

<script type='text/javascript'>//<![CDATA[
    if (typeof jQuery == 'undefined') {
        document.write(unescape("%3Cscript src='http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.2.min.js' type='text/javascript' %3E%3C/script%3E"));
    }//]]></script>
<script type='text/javascript' language='Javascript' src='http://s1.lqcdn.com/m.min.js?dt=2.3.110202.1'></script>
<script type='text/javascript' language='Javascript'> if(jQuery.LqmAds)jQuery.LqmAds();</script>
 
</body>
</html>
<!-- Dynamic page generated in 3.266 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-02-22 14:55:26 -->
