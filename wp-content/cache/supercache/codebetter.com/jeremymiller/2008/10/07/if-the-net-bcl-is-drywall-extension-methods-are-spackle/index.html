<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>If the .Net BCL is drywall, Extension Methods are spackle | Jeremy D. Miller</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/jeremymiller/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/jeremymiller/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/jeremymiller/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/jeremymiller/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Jeremy D. Miller' href='http://codebetter.com/jeremymiller/' />
<link rel='start' title='Bypass VSTS and get yourself a &quot;Poor Man&#8217;s IntelliJ&quot;' href='http://codebetter.com/jeremymiller/2005/04/12/bypass-vsts-and-get-yourself-a-poor-mans-intellij/' />
<link rel='prev' title='Separate Assemblies != Loose Coupling' href='http://codebetter.com/jeremymiller/2008/09/30/separate-assemblies-loose-coupling/' />
<link rel='next' title='Setter Injection in StructureMap 2.5' href='http://codebetter.com/jeremymiller/2008/10/09/setter-injection-in-structuremap-2-5/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/jeremymiller/2008/10/07/if-the-net-bcl-is-drywall-extension-methods-are-spackle/' />
<link rel='shortlink' href='http://codebetter.com/jeremymiller/?p=592' />
<link rel="stylesheet" href="http://codebetter.com/jeremymiller/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/theshadetreedeveloper/disqus.css?v=2.0" type="text/css" media="screen" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/jeremymiller/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-592" class="post-592 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">If the .Net BCL is drywall, Extension Methods are spackle</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">Jeremy Miller</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/jeremymiller/2008/10/07/if-the-net-bcl-is-drywall-extension-methods-are-spackle/" title="4:17 pm" rel="bookmark"><span class="entry-date">October 7, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/jeremymiller/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/jeremymiller/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/jeremymiller/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>I know many people get upset at the very idea of Extension Methods, but I already consider them to be an indispensable part of my programming toolkit.&#160; I’m seeing so many times where a quick extension method can make code be much more readable.&#160; Other times an extension method against even a core BCL type seems to fill in a natural hole in the official API’s and knocks out a lot of duplication.</p>
<p>&#160;</p>
<p><strong>Example 1:&#160; Custom Attributes</strong></p>
<p>I do a lot of work with reflection in both StructureMap and my normal development.&#160; Using custom attributes has always been an important extension point in .Net frameworks, but the code to access attributes is awkward – until Extension Methods.&#160; I’ll bet you anything that at least a dozen other people reading this have written something exactly like this:</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">static</span> T GetAttribute&lt;T&gt;(<span style="color: blue">this</span> <span style="color: #2b91af">ICustomAttributeProvider</span> provider) <span style="color: blue">where</span> T : <span style="color: #2b91af">Attribute</span></p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">var</span> atts = provider.GetCustomAttributes(<span style="color: blue">typeof</span>(T), <span style="color: blue">true</span>);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> atts.Length &gt; 0 ? atts[0] <span style="color: blue">as</span> T : <span style="color: blue">null</span>;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">static</span> <span style="color: blue">void</span> ForAttributesOf&lt;T&gt;(<span style="color: blue">this</span> <span style="color: #2b91af">ICustomAttributeProvider</span> provider, <span style="color: #2b91af">Action</span>&lt;T&gt; action) <span style="color: blue">where</span> T : <span style="color: #2b91af">Attribute</span></p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">foreach</span> (T attribute <span style="color: blue">in</span> provider.GetCustomAttributes(<span style="color: blue">typeof</span>(T), <span style="color: blue">true</span>))</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; action(attribute);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
</p></div>
<p style="margin: 0px">
</p>
<p>so that you can access attributes like:</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">var</span> formatAs = method.GetAttribute&lt;<span style="color: #2b91af">FormatAsAttribute</span>&gt;();</p>
</p></div>
</p>
<p>and work with the attribute objects without all the icky casting and the goofy GetCustomAttributes business.</p>
<p>&#160;</p>
<p>&#160;</p>
<p><strong>Example 2:&#160; Writing Xml</strong></p>
<p>Here’s another example for Xml manipulation from what became Fluent NHibernate:</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">static</span> <span style="color: #2b91af">XmlElement</span> AddElement(<span style="color: blue">this</span> <span style="color: #2b91af">XmlNode</span> element, <span style="color: blue">string</span> name)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">XmlElement</span> child = element.OwnerDocument.CreateElement(name);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; element.AppendChild(child);</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> child;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
</p></div>
<p>Programmatically building XmlDocument objects has always been tedious because of all the repetitious steps (create element, append element to its parent, set some attributes, rinse, repeat…) and the verbose API.&#160; I found that a few extension methods shrank that code down into things like this:</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; element.AddElement(<span style="color: #a31515">&quot;key&quot;</span>).AddElement(<span style="color: #a31515">&quot;column&quot;</span>).WithAtt(<span style="color: #a31515">&quot;name&quot;</span>, foreignKeyName).WithAtt(<span style="color: #a31515">&quot;not-null&quot;</span>, <span style="color: #a31515">&quot;true&quot;</span>);</p>
</p></div>
<p>&#160;</p>
<p>With the old Xml “push button API” this is about 6-7 lines of code.</p>
<p>&#160;</p>
<p>&#160;</p>
<p>&#160;</p>
<p><strong>Example 3:&#160; Reading and Working from Xml</strong></p>
<p>Here’s one last example.&#160; When StructureMap loads an Xml configuration file, it will will allow you to “include” additional Xml files by specifying the files in an &lt;Include&gt; tag like this:</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px"><span style="color: blue">&#160; &lt;</span><span style="color: #a31515">StructureMap</span><span style="color: blue"> </span><span style="color: red">Id</span><span style="color: blue">=</span>&quot;<span style="color: blue">Master</span>&quot;<span style="color: blue">&gt;</span></p>
<p style="margin: 0px"><span style="color: blue">&#160;&#160;&#160; &lt;</span><span style="color: #a31515">Include</span><span style="color: blue"> </span><span style="color: red">File</span><span style="color: blue">=</span>&quot;<span style="color: blue">Include1.xml</span>&quot;<span style="color: blue"> /&gt;</span></p>
<p style="margin: 0px"><span style="color: blue">&#160;&#160;&#160; &lt;</span><span style="color: #a31515">Include</span><span style="color: blue"> </span><span style="color: red">File</span><span style="color: blue">=</span>&quot;<span style="color: blue">Include2.xml</span>&quot;<span style="color: blue"> /&gt;</span></p>
<p style="margin: 0px">
<p style="margin: 0px"><span style="color: blue"></span></p>
<p style="margin: 0px"><span style="color: blue"></span></p>
<p>     <span style="color: blue">&#160; &lt;/</span><span style="color: #a31515">StructureMap</span><span style="color: blue">&gt;</span></p>
</p></div>
<p>In StructureMap 2.0 the code that acted on the &lt;Instance&gt; nodes looked like this:</p>
<p>&#160;</p>
<p><strong>Old .Net 2.0-ish Code</strong></p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">string</span> includedPath = <span style="color: blue">null</span>;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">try</span></p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">XmlNodeList</span> includeNodes = node.SelectNodes(<span style="color: #2b91af">XmlConstants</span>.INCLUDE_NODE);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">foreach</span> (<span style="color: #2b91af">XmlElement</span> includeElement <span style="color: blue">in</span> includeNodes)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">XmlDocument</span> includedDoc = <span style="color: blue">new</span> <span style="color: #2b91af">XmlDocument</span>();</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">string</span> fileName = includeElement.GetAttribute(<span style="color: #a31515">&quot;File&quot;</span>);</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">if</span> (fileName == <span style="color: blue">string</span>.Empty)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">throw</span> <span style="color: blue">new</span> <span style="color: #2b91af">ApplicationException</span>(<span style="color: #a31515">&quot;The File attribute on the Include node is required&quot;</span>);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">try</span></p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; includedPath = <span style="color: #2b91af">Path</span>.Combine(folder, fileName);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; includedDoc.Load(includedPath);</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: #2b91af">ConfigurationParser</span> parser = <span style="color: blue">new</span> <span style="color: #2b91af">ConfigurationParser</span>(includedDoc.DocumentElement);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; list.Add(parser);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">catch</span> (<span style="color: #2b91af">Exception</span> ex)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">throw</span> <span style="color: blue">new</span> <span style="color: #2b91af">StructureMapException</span>(150, ex, fileName);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">catch</span> (<span style="color: #2b91af">Exception</span> ex)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">throw</span> <span style="color: blue">new</span> <span style="color: #2b91af">StructureMapException</span>(100, includedPath, ex);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
</p></div>
<p>Earlier this year I did a massive overhaul of the StructureMap core and used some .Net 3.5 language features to do this:</p>
<p><strong>New .Net 3.5 Code</strong></p>
<p>First, I wanted to separate the Xml manipulation code away from the code that locates and loads the additional Xml files.&#160; I wrote an extension method against XmlNode (plus a little bit of a Fluent Interface) like this:</p>
<p>&#160;</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">static</span> <span style="color: #2b91af">XmlTextExpression</span> ForTextInChild(<span style="color: blue">this</span> <span style="color: #2b91af">XmlNode</span> node, <span style="color: blue">string</span> xpath)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> <span style="color: blue">new</span> <span style="color: #2b91af">XmlTextExpression</span>(node, xpath);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">class</span> <span style="color: #2b91af">XmlTextExpression</span></p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">private</span> <span style="color: blue">readonly</span> <span style="color: #2b91af">XmlNodeList</span> _list;</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">internal</span> XmlTextExpression(<span style="color: #2b91af">XmlNode</span> parent, <span style="color: blue">string</span> attributePath)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; _list = parent.SelectNodes(attributePath);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">public</span> <span style="color: blue">void</span> Do(<span style="color: #2b91af">Action</span>&lt;<span style="color: blue">string</span>&gt; action)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">if</span> (_list == <span style="color: blue">null</span>) <span style="color: blue">return</span>;</p>
<p style="margin: 0px">&#160;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">foreach</span> (<span style="color: #2b91af">XmlNode</span> node <span style="color: blue">in</span> _list)</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; action(node.InnerText);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160; }</p>
</p></div>
<p>That’s a lot more code for Xml manipulation than the original sample, but the great thing is that I can reuse this code up above in other scenarios.</p>
<p>&#160;</p>
<p>This extension method on XmlNode enabled me to write code that made working with the Xml data become almost declarative.&#160; Instead of doing monotonous code to walk the Xml DOM and yank out the right nodes and attributes, I just say “do this thing (an Action&lt;string&gt; lambda) with each value of this attribute in every child node named ‘Include.’”&#160;&#160; </p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; _structureMapNode.<strong>ForTextInChild(<span style="color: #a31515">&quot;Include/@File&quot;</span>).Do</strong>(fileName =&gt;</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; {</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">string</span> includedFile = <span style="color: #2b91af">Path</span>.Combine(includePath, fileName);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; action(includedFile);</p>
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; });</p>
</p></div>
<p>and</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; _structureMapNode.ForTextInChild(<span style="color: #a31515">&quot;Assembly/@Name&quot;</span>).Do(name =&gt; builder.AddAssembly(name));</p>
</p></div>
<p>and</p>
<div style="border-right: black thin solid;border-top: black thin solid;font-size: 10pt;background: white;border-left: black thin solid;color: black;border-bottom: black thin solid;font-family: courier new">
<p style="margin: 0px">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; pluginElement.ForTextInChild(<span style="color: #a31515">&quot;Setter/@Name&quot;</span>).Do(prop =&gt; plugin.Setters.MarkSetterAsMandatory(prop));</p>
</p></div>
<p>&#160;</p>
<p>&#160;</p>
<p>&#160;</p>
<p><strong>But Wait!</strong></p>
<p>But wait, extension methods are weird and my team won’t be able to understand it!&#160; Get over it, this technique has been used successfully in other languages for years (Ruby, Objective C, even Javascript)</p>
<p>But wait, extension methods aren’t discoverable!&#160; I’ll concede this one a little bit.&#160; ReSharper has nice functionality to bring up extension methods with the CTRL-ALT-SPACE keyboard shortcut, and CTRL-B still works.&#160; I think that this yet another example of how ReSharper (or the equivalent) usage radically changes the rules for programming.</p>
											</div><!-- .entry-content -->

					<div id="entry-author-info">
						<div id="author-avatar">
							<img alt='' src='http://1.gravatar.com/avatar/db65c5c5cf9f1c51e842f733892eace1?s=60&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D60&amp;r=G' class='avatar avatar-60 photo' height='60' width='60' />						</div><!-- #author-avatar 	-->
						<div id="author-description">
							<h2>About Jeremy Miller</h2>
							Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.							<div id="author-link">
								<a href="http://codebetter.com/jeremymiller/author/jeremymiller/" title="View all posts by Jeremy Miller">View all posts by Jeremy Miller &rarr;</a>
							</div><!-- #author-link	-->
						</div><!-- #author-description	-->
					</div><!-- .entry-author-info -->

					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/jeremymiller/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/jeremymiller/2008/10/07/if-the-net-bcl-is-drywall-extension-methods-are-spackle/" title="Permalink to If the .Net BCL is drywall, Extension Methods are spackle" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/jeremymiller/2008/10/07/if-the-net-bcl-is-drywall-extension-methods-are-spackle/feed/" title="Comments RSS to If the .Net BCL is drywall, Extension Methods are spackle" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-592 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/jeremymiller/2008/09/30/separate-assemblies-loose-coupling/" rel="prev"><span class="meta-nav">&larr;</span> Separate Assemblies != Loose Coupling</a></div>
					<div class="nav-next"><a href="http://codebetter.com/jeremymiller/2008/10/09/setter-injection-in-structuremap-2-5/" rel="next">Setter Injection in StructureMap 2.5 <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-4652">
					<div id="dsq-comment-header-4652" class="dsq-comment-header">
						<cite id="dsq-cite-4652">
								<span id="dsq-author-user-4652">Ed McPadden</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4652" class="dsq-comment-body">
						<div id="dsq-comment-message-4652" class="dsq-comment-message"><p>Thanks! Great post!  I am just starting to get into extension methods and I have done a lot of reflection code in the past.  I will definitely be using this technique in the future.<br />
- Ed @emcpadden</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4653">
					<div id="dsq-comment-header-4653" class="dsq-comment-header">
						<cite id="dsq-cite-4653">
	http://www.tobinharris.com/blog							<span id="dsq-author-user-4653">Tobin Harris</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4653" class="dsq-comment-body">
						<div id="dsq-comment-message-4653" class="dsq-comment-message"><p>I agree. They&#8217;re especially useful for writing shortcuts that you use over and over again. </p>
<p>I just hope we can start writing extension *properties* in future versions of c#&#8230;</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4654">
					<div id="dsq-comment-header-4654" class="dsq-comment-header">
						<cite id="dsq-cite-4654">
	http://www.fauberdemo.com/2008.html							<span id="dsq-author-user-4654">David Fauber</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4654" class="dsq-comment-body">
						<div id="dsq-comment-message-4654" class="dsq-comment-message"><p>&#8220;I think that this yet another example of how ReSharper (or the equivalent) usage radically changes the rules for programming.&#8221;</p>
<p>I go back and forth on this.  On the one hand, yes it makes me more productive in my current situation (employer pays for VS and Resharper).  </p>
<p>I worry about  leaning too hard on the IDE when the IDE isn&#8217;t free  though.  Does this position .NET negatively to someone making a dev platform choice?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4655">
					<div id="dsq-comment-header-4655" class="dsq-comment-header">
						<cite id="dsq-cite-4655">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4655">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4655" class="dsq-comment-body">
						<div id="dsq-comment-message-4655" class="dsq-comment-message"><p>@David,</p>
<p>Keep in mind that many other platforms have very solid FOSS IDE&#8217;s.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4656">
					<div id="dsq-comment-header-4656" class="dsq-comment-header">
						<cite id="dsq-cite-4656">
								<span id="dsq-author-user-4656">Bryan Watts</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4656" class="dsq-comment-body">
						<div id="dsq-comment-message-4656" class="dsq-comment-message"><p>I really like employing Linq for custom attributes:</p>
<p>public static IEnumerable<t> GetAttributes(this ICustomAttributeProvider provider) where T : Attribute<br />
{<br />
  &#8230;argnullcheck&#8230;</p>
<p>  return provider.GetCustomAttributes(typeof(T)).Cast</t><t>();<br />
}</p>
<p>public static T GetAttribute</t><t>(this ICustomAttributeProvider provider) where T : Attribute<br />
{<br />
  &#8230;argnullcheck&#8230;</p>
<p>  return provider.GetAttributes</t><t>().FirstOrDefault();<br />
}</p>
<p>public static void ForEachAttribute</t><t>(this ICustomAttributeProvider provider, Action</t><t> action) where T : Attribute<br />
{<br />
  &#8230;argnullchecks&#8230;</p>
<p>  foreach(T attribute in provider.GetAttributes</t><t>())<br />
  {<br />
    action(attribute);<br />
  }<br />
}</t></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4657">
					<div id="dsq-comment-header-4657" class="dsq-comment-header">
						<cite id="dsq-cite-4657">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-4657">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4657" class="dsq-comment-body">
						<div id="dsq-comment-message-4657" class="dsq-comment-message"><p>@Tobin</p>
<p>Unfortunately, we don&#8217;t know when that&#8217;s going to be for extension properties.  I&#8217;m hoping for sooner rather than later, but not keeping any hopes up.</p>
<p>In the mean time, F# supports extension everything for use only inside F#. (<a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2008/09/12/object-oriented-f-more-extension-everything.aspx" rel="nofollow">http://codebetter.com/blogs/matthew.podwysocki/archive/2008/09/12/object-oriented-f-more-extension-everything.aspx</a>)</p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4658">
					<div id="dsq-comment-header-4658" class="dsq-comment-header">
						<cite id="dsq-cite-4658">
								<span id="dsq-author-user-4658">Brian</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4658" class="dsq-comment-body">
						<div id="dsq-comment-message-4658" class="dsq-comment-message"><p>What do you mean by &#8216;not discoverable&#8217;?</p>
<p>>>But wait, extension methods aren’t discoverable!  I’ll concede this one a little bit.</p>
<p>I get it just fine in VS intellisense.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4659">
					<div id="dsq-comment-header-4659" class="dsq-comment-header">
						<cite id="dsq-cite-4659">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4659">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4659" class="dsq-comment-body">
						<div id="dsq-comment-message-4659" class="dsq-comment-message"><p>@Brian,</p>
<p>You&#8217;ve got to have the namespace that contains the extension methods included before you&#8217;ll see the extension methods in Intellisense.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4660">
					<div id="dsq-comment-header-4660" class="dsq-comment-header">
						<cite id="dsq-cite-4660">
	http://www.fauberdemo.com/2008.html							<span id="dsq-author-user-4660">David Fauber</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4660" class="dsq-comment-body">
						<div id="dsq-comment-message-4660" class="dsq-comment-message"><p>&#8220;Keep in mind that many other platforms have very solid FOSS IDE&#8217;s.&#8221;</p>
<p>Yeah, that&#8217;s kind of the basis for my point.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4661">
					<div id="dsq-comment-header-4661" class="dsq-comment-header">
						<cite id="dsq-cite-4661">
	http://blog.unhandled-exceptions.com							<span id="dsq-author-user-4661">Steve Bohlen</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4661" class="dsq-comment-body">
						<div id="dsq-comment-message-4661" class="dsq-comment-message"><p>>>You&#8217;ve got to have the namespace that contains the extension methods included before you&#8217;ll see the extension methods in Intellisense.</p>
<p>This is true, but I start to wonder based on this offered &#8216;caveat&#8217;: don&#8217;t most people put the extension method into the same namespace as the class being extended?  e.g., it doesn&#8217;t seem natural to me (or useful) to say my extension method is in System.Xml.Extensions if the thing it extends is in System.Xml.</p>
<p>Are others doing this seperation of namespaces that would &#8216;defeat&#8217; intellisense unless the consuming dev was aware enough to include the X.X.X.Extensions namespace or something similar?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4662">
					<div id="dsq-comment-header-4662" class="dsq-comment-header">
						<cite id="dsq-cite-4662">
								<span id="dsq-author-user-4662">slapout</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4662" class="dsq-comment-body">
						<div id="dsq-comment-message-4662" class="dsq-comment-message"><p>I&#8217;ve heard of, but never used extension methods. What happens if, in a future version of the BCL, the object you extended ships with a method that has the same name as your extension method? Which method will get called?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4663">
					<div id="dsq-comment-header-4663" class="dsq-comment-header">
						<cite id="dsq-cite-4663">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4663">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4663" class="dsq-comment-body">
						<div id="dsq-comment-message-4663" class="dsq-comment-message"><p>&#8220;don&#8217;t most people put the extension method into the same namespace as the class being extended?&#8221;</p>
<p>Huh, I never even thought about doing this.  I&#8217;m not sure you want to do that in every case.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4664">
					<div id="dsq-comment-header-4664" class="dsq-comment-header">
						<cite id="dsq-cite-4664">
								<span id="dsq-author-user-4664">Leyu</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4664" class="dsq-comment-body">
						<div id="dsq-comment-message-4664" class="dsq-comment-message"><p>I think comparing features as being &#8220;Old .Net 2.0-ish Code&#8221; and &#8220;New .Net 3.5 Code&#8221; confuses a lot of people.<br />
There is still much confusion regarding version number of  .NET Framework, CLR  and languages.</p>
<p>It would be great comparing features from the language version perspective. C#2.0 vs C#3.0</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4665">
					<div id="dsq-comment-header-4665" class="dsq-comment-header">
						<cite id="dsq-cite-4665">
	http://dotnet.org.za/rudi							<span id="dsq-author-user-4665">Rudi Grobler</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4665" class="dsq-comment-body">
						<div id="dsq-comment-message-4665" class="dsq-comment-message"><p>Excellent article, tnx</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4666">
					<div id="dsq-comment-header-4666" class="dsq-comment-header">
						<cite id="dsq-cite-4666">
	http://blog.unhandled-exceptions.com							<span id="dsq-author-user-4666">Steve Bohlen</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4666" class="dsq-comment-body">
						<div id="dsq-comment-message-4666" class="dsq-comment-message"><p>>>Huh, I never even thought about doing this.  I&#8217;m not sure you want to do that in every case.  </p>
<p>I&#8217;m curious: what&#8217;s the use-case where I *wouldn&#8217;t* want to do this?   Is there a downside I&#8217;m overlooking?</p>
<p>Reason I wonder is that we have traditionally (if there is such a thing for a language construct so relatively new) placed our extension methods into the same namepsace as the class being extended precisely to facilitate discoverability via intellisense (so that the extension method &#8216;appears&#8217; as a natural part of the object&#8217;s interface with minimal extra hoops for the consuming dev to jump thru to get them).</p>
<p>If there a downside to this approach that I&#8217;m overlooking and will bump into later and cause me pain, can you elaborate on what your think it might be?</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4667">
					<div id="dsq-comment-header-4667" class="dsq-comment-header">
						<cite id="dsq-cite-4667">
								<span id="dsq-author-user-4667">Matt Poland</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4667" class="dsq-comment-body">
						<div id="dsq-comment-message-4667" class="dsq-comment-message"><p>To be honest, my biggest fear is having a developer write extension methods, use them pervasively, and then swap out the assembly that contained them for a new one that doesn&#8217;t contain them.  That is even more of a worry if the assembly was provided by a third party (not your extension methods).  I see the value but you better have a solid plan for how your projects will evolve, especially if you share libraries across projects.</p>
<p>So for me, I see it like spackle that could potentially spontaneously disappear without notice.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-4668">
					<div id="dsq-comment-header-4668" class="dsq-comment-header">
						<cite id="dsq-cite-4668">
	http://codebetter.com/blogs/jeremy.miller							<span id="dsq-author-user-4668">Jeremy D. Miller</span>
							</cite>
					</div>
					<div id="dsq-comment-body-4668" class="dsq-comment-body">
						<div id="dsq-comment-message-4668" class="dsq-comment-message"><p>@Matt,</p>
<p>I guess that&#8217;s a legitimate concern, but then again, I&#8217;ll answer that concern in only two words:</p>
<p>&#8220;Continuous Integration&#8221;</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/jeremymiller/2008/10/07/if-the-net-bcl-is-drywall-extension-methods-are-spackle/ ';
	var disqus_identifier = '592 /blogs/jeremy.miller/archive/2008/10/07/if-the-net-bcl-is-drywall-extension-methods-are-spackle.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'theshadetreedeveloper';
	var disqus_title = "If the .Net BCL is drywall, Extension Methods are spackle";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=592');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/jeremymiller/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/jeremymiller\/2008\/10\/07\/if-the-net-bcl-is-drywall-extension-methods-are-spackle\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title">The Shade Tree Developer</h3>Jeremy is the Chief Software Architect at Dovetail Software, the coolest ISV in Austin.  Jeremy began his IT career writing "Shadow IT" applications to automate his engineering documentation, then wandered into software development because it looked like more fun. Jeremy is the author of the open source StructureMap tool for Dependency Injection with .Net, StoryTeller for supercharged acceptance testing in .Net, and one of the principal developers behind FubuMVC.  Jeremy's thoughts on all things software can be found at The Shade Tree Developer at http://codebetter.com/jeremymiller.
</li><li id="text-3" class="widget-container widget_text"><h3 class="widget-title">Upcoming posts&#8230;</h3>			<div class="textwidget"><p>How I'm using StoryTeller to test FubuMVC<br />
Building a "Lookup" html convention w/ FubuMVC<br />
FubuMVC's Configuration Model "Special Sauce"<br />
Managing Script dependencies with FubuMVC<br />
Authorization and FubuMVC<br />
Continuations<br />
Composing Views with FubuMVC<br />
Extensible Model Binding with FubuMVC<br />
Introducing "Bottles"<br />
Modular Packaging with FubuMVC<br />
Self-Installing Apps w/ FubuMVC<br />
Routing and Behavioral Conventions with FubuMVC<br />
What Should I Learn?</p>
</div>
		</li><li id="linkcat-1046" class="widget-container widget_links"><h3 class="widget-title">Blogroll</h3>
	<ul class='xoxo blogroll'>
<li><a href="http://twitter.com/jeremydmiller">Follow me on Twitter</a></li>
<li><a href="https://github.com/DarthFubuMVC/fubumvc" target="_blank">FubuMVC on GitHub</a></li>
<li><a href="https://github.com/jeremydmiller">My GitHub Page</a></li>
<li><a href="https://github.com/storyteller/storyteller">StoryTeller on GitHub</a></li>
<li><a href="https://github.com/structuremap/structuremap">StructureMap on GitHub</a></li>

	</ul>
</li>
		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
					<li id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='http://codebetter.com/jeremymiller/2011/01/' title='January 2011'>January 2011</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/12/' title='December 2010'>December 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/09/' title='September 2010'>September 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/08/' title='August 2010'>August 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/07/' title='July 2010'>July 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/06/' title='June 2010'>June 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/05/' title='May 2010'>May 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/03/' title='March 2010'>March 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/02/' title='February 2010'>February 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2010/01/' title='January 2010'>January 2010</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/12/' title='December 2009'>December 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/11/' title='November 2009'>November 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/10/' title='October 2009'>October 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/09/' title='September 2009'>September 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/08/' title='August 2009'>August 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/07/' title='July 2009'>July 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/06/' title='June 2009'>June 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/05/' title='May 2009'>May 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/04/' title='April 2009'>April 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/03/' title='March 2009'>March 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/02/' title='February 2009'>February 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2009/01/' title='January 2009'>January 2009</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/12/' title='December 2008'>December 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/11/' title='November 2008'>November 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/10/' title='October 2008'>October 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/09/' title='September 2008'>September 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/08/' title='August 2008'>August 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/07/' title='July 2008'>July 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/06/' title='June 2008'>June 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/05/' title='May 2008'>May 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/04/' title='April 2008'>April 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/03/' title='March 2008'>March 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/02/' title='February 2008'>February 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2008/01/' title='January 2008'>January 2008</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/12/' title='December 2007'>December 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/11/' title='November 2007'>November 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/10/' title='October 2007'>October 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/09/' title='September 2007'>September 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/08/' title='August 2007'>August 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/07/' title='July 2007'>July 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/06/' title='June 2007'>June 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/05/' title='May 2007'>May 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/04/' title='April 2007'>April 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/03/' title='March 2007'>March 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/02/' title='February 2007'>February 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2007/01/' title='January 2007'>January 2007</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/12/' title='December 2006'>December 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/11/' title='November 2006'>November 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/10/' title='October 2006'>October 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/09/' title='September 2006'>September 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/08/' title='August 2006'>August 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/07/' title='July 2006'>July 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/06/' title='June 2006'>June 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/05/' title='May 2006'>May 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/04/' title='April 2006'>April 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/03/' title='March 2006'>March 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/02/' title='February 2006'>February 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2006/01/' title='January 2006'>January 2006</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/12/' title='December 2005'>December 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/11/' title='November 2005'>November 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/10/' title='October 2005'>October 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/09/' title='September 2005'>September 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/08/' title='August 2005'>August 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/07/' title='July 2005'>July 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/06/' title='June 2005'>June 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/05/' title='May 2005'>May 2005</a></li>
	<li><a href='http://codebetter.com/jeremymiller/2005/04/' title='April 2005'>April 2005</a></li>
		</ul>
</li><li id="recent-comments-3" class="widget-container widget_recent_comments"><h3 class="widget-title">What others have said&#8230;</h3><ul id="recentcomments"><li class="recentcomments"><a href='http://weblogs.asp.net/thangchung' rel='external nofollow' class='url'>thangchung</a> on <a href="http://codebetter.com/jeremymiller/2009/01/16/quot-buildup-quot-existing-objects-with-structuremap/#comment-6764">&quot;BuildUp&quot; Existing Objects with StructureMap</a></li><li class="recentcomments">Steven Gentile on <a href="http://codebetter.com/jeremymiller/2011/01/23/if-you-are-using-structuremap-with-mvc3-please-read-this/#comment-6763">If you are using StructureMap with MVC3, please read this:</a></li><li class="recentcomments">jabits on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6761">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">Michael Meadows on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6754">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li><li class="recentcomments">InspiringCode on <a href="http://codebetter.com/jeremymiller/2011/01/16/a-train-of-thought-wrapping-up-codemash-2011/#comment-6753">A Train of Thought &ndash; Wrapping up CodeMash 2011</a></li></ul></li>				</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.291 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 08:50:04 -->
<!-- super cache -->