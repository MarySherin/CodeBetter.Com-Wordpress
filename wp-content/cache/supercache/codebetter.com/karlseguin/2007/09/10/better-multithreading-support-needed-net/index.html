<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Better multithreading support needed in .NET | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/karlseguin/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/karlseguin/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/karlseguin/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Karl Seguin' href='http://codebetter.com/karlseguin/' />
<link rel='start' title='Expecting More From Development Companies' href='http://codebetter.com/karlseguin/2006/03/24/expecting-more-from-development-companies/' />
<link rel='prev' title='How Microsoft tried to screw me out of $30.00' href='http://codebetter.com/karlseguin/2007/09/06/how-microsoft-tried-to-screw-me-out-of-30-00/' />
<link rel='next' title='Avoiding Extension Methods' href='http://codebetter.com/karlseguin/2007/10/04/avoiding-extension-methods/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/' />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=105' />
<link rel="stylesheet" href="http://codebetter.com/karlseguin/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/karlseguin/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-105" class="post-105 post type-post status-publish format-standard hentry category-featured">
					<h1 class="entry-title">Better multithreading support needed in .NET</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/" title="1:16 pm" rel="bookmark"><span class="entry-date">September 10, 2007</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/karlseguin/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>This is the kind of post you make, and immediately get 4 comments saying the class you requested is already in the framework&#8230;.</p>
<p>I&#8217;ve been working a lot on multithreaded applications lately. I&#8217;m not specifically talking about taking advantage of multi-core CPUs on the client, but it&#8217;s been clear for a while now that these are quickly becoming the norm and developers are going to have to adapt. </p>
<p>I&#8217;ve mostly been learning as I go, but it&#8217;s made me realize that the tools available to developers are lacking. To be honest, I don&#8217;t want to have to understand what the heck <a href="/blogs/gregyoung/">Greg Young</a> is blogging about &#8211; he speaks a different language than me &#8211; I want tools and my programming language to help me out as much as possible. PLinq is interesting, but it&#8217;s a minor part of the overall picture.</p>
<p>Java seems ahead of .NET when it comes to multithreading programming.&nbsp; They have true thread-safe collections that use lock-free algorithms. If you&#8217;re doing multithreading programming, do yourself a favor and look up <i>Lock Free Data Structures</i>, you&#8217;ll quickly realize that most of what you&#8217;ve read on MSDN as well as Microsoft own thread-safe collections are garbage. I&#8217;ve used Julian Bucknall&#8217;s <a href="http://www.boyet.com/Articles/LockFreeRedux.html">collections</a> with quite a bit of success. It&#8217;d also be nice to have truly atomic variables in .NET, like those found in Java&#8217;s java.util.concurrent.atomic package &#8211; there&#8217;s something unsettling about playing with the Interlock class. </p>
<p>Like Chris Mullins, I wish there was an <a href="http://www.coversant.net/Coversant/Blogs/tabid/88/EntryID/8/Default.aspx">exposed ThreadPool class</a>. I don&#8217;t know if he ever solved his problem of thread starvation, but we&#8217;ve also had to write our own implementation because we couldn&#8217;t guarantee all of our operations would be asynch. Coincidentally, if you&#8217;re creating a&nbsp; socket server, there are numerous blog posts on the Conversant blog worth reading.</p>
<p>At the top of my wish list though is support for multithreading testing. Multithreaded applications might be hard to write, but they are a nightmare to test. It&#8217;s easy enough to run multiple threads over your code, but I haven&#8217;t yet seen (which doesn&#8217;t mean it doesn&#8217;t exist), something that lets you transparently test specific race and deadlock conditions. Was a waiting thread properly signaled? Was a deadlock properly resolved? So far my approach has been simply to put huge loads on the application and hope problems surface.<br />&nbsp;</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/featured/" title="View all posts in Featured" rel="category tag">Featured</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/" title="Permalink to Better multithreading support needed in .NET" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/feed/" title="Comments RSS to Better multithreading support needed in .NET" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-105 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2007/09/06/how-microsoft-tried-to-screw-me-out-of-30-00/" rel="prev"><span class="meta-nav">&larr;</span> How Microsoft tried to screw me out of $30.00</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2007/10/04/avoiding-extension-methods/" rel="next">Avoiding Extension Methods <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">18 Responses to <em>Better multithreading support needed in .NET</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-935">
		<div id="comment-935">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Csharper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-935">October 7, 2007 at 6:48 am</a></div>

		<div class="comment-body"><p>When you are talking about programming, you have to be careful about which group of audience you are addressing. As an application architect, I think issues as complex as utilizing the power of multi cored CPUs most efficiently would be better handled by the virtualization effort put together by products such as VmWare. For us in appllication development, we really do not require lock free, thread safe collections and variable. Using such variables to implement multithreaded applications would unnecessarily increase the effort required for QA and post release support. I preferred using multithreads ten years back when virtualization was still a fun project and not part of the mainstream release architecture. Right now using them would unnecessarily complicate the overall architecture. Its just like how cool analogue computers were. But dumb digital computers took over any way.</p>
<p>Thinking simple is the way to go. The idea is to create a single thoughroughly tested unit without any multi threading code of your own that runs on a single box. You should have enough communication architecture to support heartbeats and common communication protocol between these simple units. And just to get more power from your architecture, run as many instances of tis single well tested unit on as many Virtual environments as you like. Quick, easy and reliable (given that the virtual environment you have selected is reliable too). I really don&#8217;t see any advantage that you gain by having slow performing thread safe collections and variables for the purpose of application programming. Hence, I do agree with a lot of people who have commented that you are not using the right tool for the right job. Think simple just like digital computers and not like the analogue computers. Otherwise you will soon find your skills extinct.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-934">
		<div id="comment-934">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Rafaelsc</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-934">September 14, 2007 at 1:53 pm</a></div>

		<div class="comment-body"><p>October MSDN is dedicate in Parallel and Currently.<br />
<a href="http://msdn.microsoft.com/msdnmag/issues/07/10/default.aspx" rel="nofollow">http://msdn.microsoft.com/msdnmag/issues/07/10/default.aspx</a></p>
<p>The is a New Library for Currently, Called &#8220;Parallel FX Library&#8221; for dotNet (Not Release). (I thing this is a new name for Microsoft CCR).</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-933">
		<div id="comment-933">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/steve.hebert' rel='external nofollow' class='url'>shebert</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-933">September 13, 2007 at 10:30 pm</a></div>

		<div class="comment-body"><p>Thanks guys for the followup.  This is really interesting stuff and I&#8217;d love to hear more!  The more details the better!  <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>To my second point &#8211; after a little more digging it&#8217;s not as critical as I thought. The effective CAS function is using InterlockedExchange(&#8230;) which is essentially a threading primative that ensures atomicity in the address change. The OS scheduler should not abandon the thread during the exchange and even if it did the other threads waiting on it would effectively have a lower scheduler priority until the running thread completes the exchange (that&#8217;s my read anyway).  Cool!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-932">
		<div id="comment-932">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-932">September 13, 2007 at 2:29 pm</a></div>

		<div class="comment-body"><p>Greg I don&#8217;t mind at all. I&#8217;d actually appreciate any follow up blogs (even if they are detailed <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' />  ) about the topic.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-931">
		<div id="comment-931">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-931">September 13, 2007 at 7:37 am</a></div>

		<div class="comment-body"><p>btw: steve for the first one &#8230; a check in/out with optimistic concurrency &#8230; or following the command pattern (UOW applies commands) with optimisic  concurrency is probably your best bet.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-930">
		<div id="comment-930">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/gregyoung' rel='external nofollow' class='url'>Greg</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-930">September 13, 2007 at 7:34 am</a></div>

		<div class="comment-body"><p>Steve: I can put up some blog posts in *great detail* on the performance characteristics of lock-free (ie lock free list based) and hey-I-don&#8217;t-give-a-crap-if-its-slightly-off (ex: lock free hash tables being used as a heuristic) data structures.</p>
<p>The big issues with lock-free structures are two fold. The first is that they are inherently non-deteministic (infinite loops etc). There is no assurance you save anything from a context switch as it may still occur. The second is that starvation is a huge concern as they are non-deterministically unfair (one giant race condition where performance is probabalistic)</p>
<p>I&#8217;d be *very* careful about using lock free structures in your code aside from (wait-free) immutable structures. My benchmarks generally favor lock free when i hit about 6-8 processors&#8230;..</p>
<p>Sorry for hijacking Karl <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-929">
		<div id="comment-929">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-929">September 12, 2007 at 10:35 pm</a></div>

		<div class="comment-body"><p>Steve:<br />
I don&#8217;t have an answer to your first question (how to do it without locking).</p>
<p>As for the second one,I can just say that I&#8217;ve observed improvements moving to a lock-free data structure in specific cases (from having 200+ queued up requests under heavy load to having very little). I do see what you mean, and I can only guess that the result will depend on the situation.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-928">
		<div id="comment-928">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codebetter.com/blogs/steve.hebert' rel='external nofollow' class='url'>Steve</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-928">September 12, 2007 at 9:22 pm</a></div>

		<div class="comment-body"><p>Hi Karl,</p>
<p>Lock free (as opposed to wait free) synchronization is pretty interesting but has always been puzzling to me.  It would be interesting to see an article that goes beyond the individual datastructures to see how this can be applied.</p>
<p>For example &#8211; I find it to be a far bigger problem to make cross-collection operations atomic than modifications to single collections.  In the case where I have 4 collections (named A, B, C and D) and two UnitOfWork functions operating on these:</p>
<p>UoW1:  A->B->C->D<br />
UoW2:  C->B</p>
<p>How do I ensure that the end result is deterministic regardless of the overlap of these two processes without using locks? </p>
<p>The other question I have revolves around the core question of &#8220;what do we really gain by this&#8221;?  It&#8217;s illustrated by Bucknell&#8217;s LockFreeQueue<t> class in the &#8220;while(! UpdatedNewLink)&#8221; loop.  </p>
<p>Depending on where (i.e. which core) the other updating thread is running, that routine burns processor cycles until either (1) another core happens to be executing the other updating thread and it completes or (2) the OS scheduler eventually moves on to another thread.  The lock free approach relieves the cost of context switching, but to what end?</p>
<p>Maybe I&#8217;m missing something here, but it&#8217;s something that has always left me scratching my head with this topic.</t></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-927">
		<div id="comment-927">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-927">September 12, 2007 at 4:48 pm</a></div>

		<div class="comment-body"><p>btw: LOL</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-926">
		<div id="comment-926">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-926">September 12, 2007 at 5:37 am</a></div>

		<div class="comment-body"><p>mc# is very cool&#8230;.</p>
<p>have you looked at annex F of ECMA 335? there is some cool stuff coming like auto threaded loops etc.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-925">
		<div id="comment-925">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-925">September 11, 2007 at 6:52 pm</a></div>

		<div class="comment-body"><p>I guess I&#8217;ll have to look over MbUnit again.</p>
<p>Brian thanks for that. I knew about Erlang but had forgotten the name and had wanted to look it up to learn more. I can&#8217;t agree though that Erlang is the right tool for the job, not that I doubt the language, just our ability to adequately staff in it.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-924">
		<div id="comment-924">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dunnhq.com' rel='external nofollow' class='url'>Steve Dunn</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-924">September 11, 2007 at 2:57 pm</a></div>

		<div class="comment-body"><p>Software Transactional Memory looks good, although I haven&#8217;t used it on any projects yet (<a href="http://research.microsoft.com/research/downloads/Details/6cfc842d-1c16-4739-afaf-edb35f544384/Details.aspx" rel="nofollow">http://research.microsoft.com/research/downloads/Details/6cfc842d-1c16-4739-afaf-edb35f544384/Details.aspx</a>).<br />
Testing of race conditions and deadlocks can be achieved using the thread features of MbUnit.<br />
Cheers,<br />
Steve</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-923">
		<div id="comment-923">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Brian</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-923">September 11, 2007 at 4:56 am</a></div>

		<div class="comment-body"><p>It sounds like you might be using the wrong tool for the job.  I haven&#8217;t used it myself, but I have been hearing a lot of good stuff about Erlang.  You might want to check it out.</p>
<p><a href="http://www.pragmaticprogrammer.com/titles/jaerlang/" rel="nofollow">http://www.pragmaticprogrammer.com/titles/jaerlang/</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-922">
		<div id="comment-922">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.bits-in-motion.com/' rel='external nofollow' class='url'>Jeff Brown</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-922">September 10, 2007 at 8:14 pm</a></div>

		<div class="comment-body"><p>Good topic!  I commented on it over here: <a href="http://blog.bits-in-motion.com/2007/09/multithreaded-testing.html" rel="nofollow">http://blog.bits-in-motion.com/2007/09/multithreaded-testing.html</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-921">
		<div id="comment-921">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.jameskovacs.com' rel='external nofollow' class='url'>James Kovacs</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-921">September 10, 2007 at 7:46 pm</a></div>

		<div class="comment-body"><p>I agree that we need better multi-threaded support in our programming languages and frameworks given the coming wave of multi-core architectures, which we are just starting to see. You point out the lack of thread-safe, lock-free collections and variables as problems in .NET. Honestly I believe these are the least of our worries. Synchronizing at the level of the individual collection or variable doesn&#8217;t help us much. You&#8217;re synchronizing at the wrong level. The real multi-threaded challenge is that you need to synchronize user-meaningful operations, which often involve more than a single data structure. Once you are dealing with more than a single data structure, low-level locking is just overhead. (I&#8217;m assuming that you&#8217;re performing appropriate higher-level locking.) If you have a thread-safe hashtable and linked list, you can make no assurances about algorithms that use both being thread-safe.</p>
<p>So yes, we need better support in our programming languages and frameworks with respect to multi-threading, but not at the level of collections and variables typically. Technologies like PLINQ and software transactional memory hold more promise, IMHO.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-920">
		<div id="comment-920">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">test</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-920">September 10, 2007 at 7:00 pm</a></div>

		<div class="comment-body"><p><a href="http://www.mcsharp.net/" rel="nofollow">http://www.mcsharp.net/</a></p>
<p>MC# programming language is an extension of C# language and is based on .NET platform. This language is an adaptation of the basic idea of the Polyphonic C# language for the case of multi-threaded distributed computations.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-919">
		<div id="comment-919">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.OdeToCode.com/blogs/scott/' rel='external nofollow' class='url'>Scott</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-919">September 10, 2007 at 2:49 pm</a></div>

		<div class="comment-body"><p>Good points. </p>
<p>I could swear I&#8217;ve read about ThreadPool improvements in 3.5 (namely the ability to create multiple pools), but I&#8217;ll be darned if I can find it right now&#8230;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-918">
		<div id="comment-918">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Tim B</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2007/09/10/better-multithreading-support-needed-net/#comment-918">September 10, 2007 at 2:35 pm</a></div>

		<div class="comment-body"><p>With the introduction of multicore chips and all that software out there that can&#8217;t leverage them, I&#8217;ve started thinking that maybe the time has come to push all threading responsibilities down into the OS layer.  I have absolutely no idea how that would work out, but I imagine many of the same arguments against it were also made against managed code 10 years ago. <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.266 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 13:09:08 -->
<!-- super cache -->