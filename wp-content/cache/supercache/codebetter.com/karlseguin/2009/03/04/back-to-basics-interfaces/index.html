<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Back to Basics: Interfaces | Karl Seguin</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/karlseguin/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/karlseguin/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/karlseguin/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/karlseguin/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/karlseguin/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Karl Seguin' href='http://codebetter.com/karlseguin/' />
<link rel='start' title='Expecting More From Development Companies' href='http://codebetter.com/karlseguin/2006/03/24/expecting-more-from-development-companies/' />
<link rel='prev' title='Outside my element: A CSS Trick' href='http://codebetter.com/karlseguin/2009/02/10/outside-my-element-a-css-trick/' />
<link rel='next' title='The Bare Minimum' href='http://codebetter.com/karlseguin/2009/03/11/the-bare-minimum/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/' />
<link rel='shortlink' href='http://codebetter.com/karlseguin/?p=158' />
<link rel="stylesheet" href="http://codebetter.com/karlseguin/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/karlseguin/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-158" class="post-158 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Back to Basics: Interfaces</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/karlseguin/author/karlseguin/" title="View all posts by karlseguin">karlseguin</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/" title="2:17 pm" rel="bookmark"><span class="entry-date">March 4, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/karlseguin/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/karlseguin/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/karlseguin/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>#karl_custom_4 code{color:#833;background:#fcfcfc;}<br />
#karl_custom_4 h4{margin:30px 0px 0px 0px;font-color:#fff;font-weight:bold;border-bottom:1px dashed #ccc;font-variant: small-caps}</p>
<p><DIV><br />
<P>When it comes to object-oriented programming there are few concepts as basic and important as interfaces. Only recently though, and at a snails pace, have .NET developers started to take advantage of the simple benefits interfaces have to offer. This interest stems from the core role interfaces play in some pretty hot topics, including: dependency injection, unit testing and mocking (to name a few). </P><br />
<P>At first glance, interfaces can be pretty misleading: they are so simple and solve such a basic problem that developers often grossly underestimate their value. There is no magic to interfaces, no secret pattern that&#8217;ll let you squeeze incalculable gains of productivity, they are merely a fundamental part of sound software design which help you build better software.</P><br />
<H4>What is an interface?</H4><br />
<P>The role of an interface is to define the contract that implementers must follow. In other words, an interface says what a class must define. Importantly, an interface doesn&#8217;t specify (or care) how the implementation is actually achieved. As we move forward we&#8217;ll see how helpful this can be to us, for now, let&#8217;s look at a trivial example: </P><PRE>public interface IUserRepository<br />
{<br />
   void User FindByCredentials(string userName, string password);<br />
}</p>
<p>public class UserRepository : IUserRepository<br />
{<br />
   public User FindByCredentials(string userName, string password)<br />
   {<br />
     return null;<br />
   }<br />
}</PRE><br />
<P>The class UserRepository is said to implement the IUserRepository interface. This code will only compile if UserRepository implements all of the methods/properties defined in IUserRepository &#8211; with matching signatures (return type, member name, input parameters). If the code compiles, we are guaranteed that an instance of UserRepository can be treated as an IUserRepository.</P><br />
<P>An interface can define zero or more members (methods or propties) and a class can implement zero or more interfaces. Interface members are always public (I think it would be nice to allow them to be internal though!). An interface with zero members is is called a marker-interface &#8211; they don&#8217;t require implementers to do anything. For example, you might have an IImmutable interface which doesn&#8217;t have any members; however, your repository might have the following type of code to make use of it:</P><PRE>public void Update()<br />
{<br />
   if (_entity is IImmutable)<br />
   {<br />
      throw new InvalidOperationException(&#8220;The object is immutable and cannot be updated&#8221;);<br />
   }<br />
   //continue with update<br />
}<br />
</PRE><br />
<H4>Decoupling</H4><br />
<P>The raison d&#8217;Ãªtre of interfaces is to provide developers with a language-level tool that allows classes to be decoupled from each other. Mocking frameworks and dependency injection frameworks rely on this core language feature &#8211; in a sense, interfaces serve as the main (though not the only) building block for decoupling.</P><br />
<P>The problem with using a concrete class from client code is that it ties the calling code to that specific implementation. The classic example is calling a data access layer, from:</P><PRE>SqlDataStore store = new SqlDataStore();</PRE><br />
<P>to:</P><PRE>IDataStore store = new SqlDataStore();</PRE><br />
<P>Many examples would use code like the above and simply state that the latter is better than the former. The problem with this example is that it&#8217;s rather contrived and doesn&#8217;t really result in better code. If our implementation changes, say to Oracle, all we need to do is change the first line to define and create an OracleDataStore. (In reality, the better approach to the above code would be to use a DI framework, which would rely on the presence of the IDataStore interface &#8211; but don&#8217;t think that interfaces are only for framework developers.)</P><br />
<P>I think a better perspective on interfaces is through the extensive presence of collection interfaces found throughout the .NET framework. You may be tempted to use a List&lt;T&gt; to expose the relationship between a user and the one or more roles he can have:</P><PRE>public class User<br />
{<br />
   private List&lt;Role&gt; _roles;</p>
<p>   public List&lt;Role&gt; Roles<br />
   {<br />
      if (_roles == null)<br />
      {<br />
         _roles = new List&lt;Role&gt;();<br />
      }<br />
      return _roles;<br />
   }<br />
}</PRE><br />
<P>The problem with this approach is that you&#8217;re tied to a very specific implementation of a list collection, maybe in a future release you&#8217;ll find that a LinkedList&lt;T&gt; or a HashedSet&lt;T&gt; is more suitable. </P><br />
<P>Before we jump to an interface though, let&#8217;s take a realistic look at the last statement, which essentially boils down to: you may want to make a change in the future. If you and your team are the only people writing code that consumes the User class (which is likely), changing the roles implementation from a List&lt;T&gt; to a HashedSet&lt;T&gt; isn&#8217;t going to be a big deal. Its worth repeating that decoupling through interfaces leads to small incremental improvements of your system &#8211; it isn&#8217;t a silver bullet. </P><br />
<P>We can decouple client code from the specific List&lt;T&gt; implementation by making a dead-simple change to the User class:</P><PRE>public class User<br />
{<br />
   public IList&lt;Role&gt; _roles;<br />
   public IList&lt;Role&gt; Roles<br />
   {<br />
      if (_roles == null)<br />
      {<br />
         _roles = new List&lt;Role&gt;();<br />
      }<br />
      return _roles;<br />
   }<br />
}</PRE><br />
<P>Except in a few edge cases, there&#8217;s never a good reason to expose the concrete implemented over a an interface.</P><br />
<H4>Promise Less</H4><br />
<P>One of the benefits of exposing an interface is that you can promise the minimum amount of functionality needed by calling code. This may sound counter-intuitive, but the less functionality you promise, the less you need to maintain. In our above code we may use an ICollection&lt;T&gt; instead of an IList&lt;T&gt;, which defines even few methods (yet still offers all the core stuff you&#8217;d likely need with a collection). We might even take it a step further and expose an IEnumerable&lt;T&gt; which would only let calling code iterate through a user&#8217;s roles. Adding and removing roles might be accomplished through appropriate methods in the User class (in this case we&#8217;d likely find that IEnumerable is too limited though).</P><br />
<P>Yet another benefit of promising less is that it&#8217;s easier to build new implementations. Using a IList&lt;T&gt; allows us to change the implementation between a handful of built-in .NET classes (or write our own). Exposing an ICollection&lt;T&gt; allows us to use even more built-in classes; and of course exposing an IEnumerable&lt;T&gt; let&#8217;s us swap the collection implementation with virtually any of .NET&#8217;s collections.</P><br />
<P>Whether you ever actually build your own, or ever swap out the implementation isn&#8217;t really the point. The point is that the ability to painlessly do this is a symptom of a quality system. It isn&#8217;t the end of the world if you can&#8217;t, it&#8217;s just better if you can. </P><br />
<H4>Abstract Classes vs Interfaces</H4><br />
<P>There&#8217;s some overlap between abstract classes and interfaces. Sometimes it isn&#8217;t clear which tool you should use. A pragmatic factor that can help you decide is that a class can implement multiple interfaces, but only inherit from a single base class. Generally speaking though, an interface isn&#8217;t concerned with implementation, whereas an abstract class typically provides a set of common behavior to inheritors. The two often play quite well together. Take a look at a real implementation of the UserRepository we fist looked at:</P><PRE>public class UserRepository : BaseRepository&lt;User&gt;, IUserRepository<br />
{<br />
   public User FindByCredentials(string userName, string password)<br />
   {<br />
       var query = new Query&lt;User&gt;().Where(&#8220;UserName&#8221;, Operations.Equals, userName).And(&#8220;Password&#8221;, Operation.Equals, password);<br />
       return FindOne(query); //FindOne is defined in the BaseRepository<br />
   }<br />
}<br />
</PRE><br />
<P>Client code programs against the IUserRepository, while the actual implementation re-uses the base abstract class functionality.</P><br />
<H4>What to Interface?</H4><br />
<P>So where do we draw the line? Should we program against IString and IInt32? The answer to what should and shouldn&#8217;t be decoupled via an interface comes from experience and varies from system to system. There&#8217;s a realistic limit to what we can and need to do. As you can guess from my example, collections are generally worthy of decoupling, as is code that sits on a layer&#8217;s boundary or serves as part of a published API (whether or not you&#8217;re the only consumer). </P><br />
<P>It&#8217;s worth pointing out that one of the benefits of unit testing is that things that need to be decoupled quickly become evident.</P><br />
<H4>Conclusion</H4>Making use of interfaces today is a quick and easy way to make your system better for tomorrow &#8211; it costs absolutely nothing, yet rewards you with greater flexibility. Instead of returning Dictionary&lt;T, K&gt;, consider returning an IDictonary&lt;T, K&gt;; instead of having an input parameter of type SqlDataReader, maybe you&#8217;ll get more re-use from specifying an IDataReader or IDataRecord. Sadly you&#8217;ll notice that most of the documentation/books/guides you&#8217;ll find don&#8217;t make use of this simple pattern &#8211; even though it&#8217;s long been established in OOP circles (the concept of information hiding, which is essentially what we are talking about, was formally being discussed in the early 70s). Simply put, don&#8217;t expose implementation details unless you have to. </DIV></p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/karlseguin/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/" title="Permalink to Back to Basics: Interfaces" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/feed/" title="Comments RSS to Back to Basics: Interfaces" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-158 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/karlseguin/2009/02/10/outside-my-element-a-css-trick/" rel="prev"><span class="meta-nav">&larr;</span> Outside my element: A CSS Trick</a></div>
					<div class="nav-next"><a href="http://codebetter.com/karlseguin/2009/03/11/the-bare-minimum/" rel="next">The Bare Minimum <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">28 Responses to <em>Back to Basics: Interfaces</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-1659">
		<div id="comment-1659">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.sweebs.com' rel='external nofollow' class='url'>Kris</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1659">March 19, 2009 at 6:59 pm</a></div>

		<div class="comment-body"><p>Hello,</p>
<p>Please add your site at <a href="http://www.sweebs.com" rel="nofollow">http://www.sweebs.com</a>. Sweebs.com is a place where other people can find you among the best sites on the internet!<br />
Its just started and we are collecting the best found on the net! We will be delighted to have you in the sweebs listings.</p>
<p>Regards<br />
Kris</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1658">
		<div id="comment-1658">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">benny856694</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1658">March 16, 2009 at 7:06 am</a></div>

		<div class="comment-body"><p>void User FindByCredentials(string userName, string password); </p>
<p>is this some kind of typo?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1657">
		<div id="comment-1657">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ronnie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1657">March 13, 2009 at 2:44 pm</a></div>

		<div class="comment-body"><p>Don&#8217;t know if someone already mentioned it, but there is an error in your interface</p>
<p>public interface IUserRepository<br />
{<br />
   void User FindByCredentials(string userName, string password);<br />
}  </p>
<p>Void should be removed, because User is the return type</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1656">
		<div id="comment-1656">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jim Cooper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1656">March 6, 2009 at 3:47 pm</a></div>

		<div class="comment-body"><p>@karl</p>
<p>I have a bit of an issue with this whole &#8220;favour interfaces/abstract classes over abstract classes/interfaces&#8221; thing. Doing either is making the design decision too early.</p>
<p>I know that sometimes I will want an interface and sometimes an abstract class, and most of the time I don&#8217;t yet know which I want. In normal code* what I find better is to start with an abstract class, and discover the interfaces. But that&#8217;s only because I think it&#8217;s more difficult to start with interfaces and discover the abstract classes (there&#8217;s less tool support, for one thing).</p>
<p>I have further issues over what many people perceive as meaningful decoupling, but discussing that would mean me starting a blog <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>I also have a bit of a problem with you saying that interfaces are &#8220;basic and important&#8221; to OOP, but that&#8217;s mainly an historical objection, as most current OOP languages have them.
<old man voice>But it wasn&#8217;t always so, you know, young feller! </old>. </p>
<p>And there was at least one well known non-OO language that supported them <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>*slightly different rules might apply for frameworks used outside your team</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1655">
		<div id="comment-1655">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1655">March 6, 2009 at 3:09 pm</a></div>

		<div class="comment-body"><p>@Jim<br />
Sorry about the low-blow re learning from MSDN <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>@Ed:<br />
I can mock FindOne, or mock the calls FindOne makes to the DB.</p>
<p>The &#8220;can add a method without breaking consumers&#8221; argument is why MSDN guidelines [foolishly] say to favor abstract base classes over interface. It&#8217;s a valid concern (though a foolish reason to base such a broad statement), but whenever I hear Microsoft cry out &#8220;for the sake of backwards compatibility&#8221;, I shudder &#8211; it always comes off seeming like their way to fear people into following their way.</p>
<p>I agree that if you want to add a method, but don&#8217;t have to have it implemented, an interface isn&#8217;t the way to go. It&#8217;s equally common though (if not more so) that you really do want to force people to provide implementations.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1654">
		<div id="comment-1654">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ed</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1654">March 6, 2009 at 2:25 pm</a></div>

		<div class="comment-body"><p>@karl </p>
<p>yep it was me who asked whetther you were hitting the DB in a unti test. You said repositorybase didn&#8217;t get in the way of unit testing which sounded like findone was hitting the database during a unit test. Just wanted you to clarify <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>@Jim</p>
<p>Yep you tend to lean towards abstract classes in frameworks since you don&#8217;t want to force a consumer of your framework having to recompile if you add another method, I see where your coming from.</p>
<p>Agreed, too many mocks can be a sign or high-fan out or over specification in tests. If the creation of a mock makes the test easier to write (and therefore read) then I would happily place an interface over a single class and stub or mock it with Rhino</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1653">
		<div id="comment-1653">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Leyu</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1653">March 6, 2009 at 8:26 am</a></div>

		<div class="comment-body"><p>Nice post Karl.</p>
<p>CLR via C# book has a chapter on Interfaces which is a must read.</p>
<p>Here are some points from the book</p>
<p>- The CLR does allow an interface to define static methods, properties&#8230; but a CLS-compliant interface must not have any of these static members and C# doesn&#8217;t allow having static definitions in an interface.</p>
<p>- The CLR requires that implemented interface methods be marked as virtual. If you do not explicitly mark<br />
the method as virtual in your source code, the compiler marks the method as virtual and sealed.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1652">
		<div id="comment-1652">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jim Cooper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1652">March 5, 2009 at 4:48 pm</a></div>

		<div class="comment-body"><p>@karl</p>
<p>That was Ed who asked that, not me <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>Further to my points above, reading that interview that Ed mentioned shows that Erich Gamma has much the same view as me, eg:</p>
<p>&#8220;Fortunately, with today&#8217;s refactoring support you no longer have to come up with an interface up front. You can distill an interface from a concrete class once you have the full insights into a problem. The intended interface is just one &#8216;extract interface&#8217; refactoring away.</p>
<p>So this approach gives you flexibility, but it also separates the really valuable part, the design, from the implementation, which allows clients to be decoupled from the implementation. One question is whether you should always use a Java interfaces for that. An abstract class is good as well. In fact, an abstract class gives you more flexibility when it comes to evolution. You can add new behavior without breaking clients. &#8221;</p>
<p>I also think refactoring is usually easier without interfaces, and I tend to defer extracting them to as late as is responsibly possible (which means it often never happens)</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1651">
		<div id="comment-1651">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1651">March 5, 2009 at 3:47 pm</a></div>

		<div class="comment-body"><p>@Jim<br />
I have integration tests that hit the DB, but no? What suggested that I did?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1650">
		<div id="comment-1650">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jim Cooper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1650">March 5, 2009 at 3:20 pm</a></div>

		<div class="comment-body"><p>@Ed</p>
<p>&#8220;Interfaces bad, can&#8217;t agree with you here&#8221;</p>
<p>I&#8217;m not suggesting they are, I&#8217;m counselling against overuse. </p>
<p>&#8220;I encourage developers to unit test in isolation and we use Rhino mocks so interfaces are cleaneer and clearer.&#8221;</p>
<p>Good idea. But IMO, if you require many mock objects, that is itself a code smell. And if you require a Rhino-produced mock object, then YAGNI doesn&#8217;t apply, because you do actually need the interface then.</p>
<p>If you have other types of factories creating objects of various concrete classes implementing a given abstract type/interface, I wouldn&#8217;t immediately plump for an interface either &#8211; I&#8217;d let that decision be guided by the situation.</p>
<p>An interface only implemented by one class (abstract or not) is another code smell, IMO.</p>
<p>&#8220;Part agree with RoleList:&#8221;</p>
<p>Yep, your definition might be better, and your name is fine too (although I do have a different naming convention &#8211; eg a property of type FurbleList I would tend to call Furbles, for example). As long as everyone is consistent and sensible it doesn&#8217;t matter that much, IMO.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1649">
		<div id="comment-1649">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jim Cooper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1649">March 5, 2009 at 3:03 pm</a></div>

		<div class="comment-body"><p>@karl<br />
&#8220;I have a completely different perspective than you on YAGNI&#8221;</p>
<p>Possibly. I think that you can add too much &#8220;flexibility&#8221; for no gain, and indeed, often for a loss.</p>
<p>&#8220;I don&#8217;t see how exposing an interface makes the code more fragile &#8211; I think it makes it far more robust.&#8221;</p>
<p>Think of it this way. Changing an interface (in the IInterface sense) will always break code. Changing a class definition might not. Ergo, interfaces are more fragile. </p>
<p>&#8220;The simplest thing possible isn&#8217;t necessarily what you&#8217;re used to doing, or what MSDN says.&#8221;</p>
<p>I might shoot that one right back at you <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' />  Just because &#8220;Effective C#&#8221; says to prefer interfaces to classes doesn&#8217;t make it a good idea. And I didn&#8217;t get my design skills from MSDN  &#8211; that&#8217;s verging on an insult, isn&#8217;t it? <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>&#8220;Just because something adds flexibility doesn&#8217;t mean it violates YAGNI&#8221;</p>
<p>In some cases that may be true. But I&#8217;m against adding &#8220;flexibility&#8221; before you need it. It&#8217;s easy enough to add IUserRepository when you need it. Why do it if you only ever instantiate it in one class?</p>
<p>That&#8217;s what I mean by YAGNI.</p>
<p>&#8221; many things are simpler yet provide greater flexibility.&#8221;</p>
<p>And many things are simpler but that don&#8217;t. </p>
<p>Interfaces can be a good thing, but there is more than a touch of silver bullet to many discussions of them.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1648">
		<div id="comment-1648">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ed</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1648">March 5, 2009 at 2:23 pm</a></div>

		<div class="comment-body"><p>Jim: </p>
<p>Interfaces bad, can&#8217;t agree with you here. I see such vile violations of the open closed principal when looking at a lot of .net code, I&#8217;m all for .net developers considering some flexibility. I encourage developers to unit test in isolation and we use Rhino mocks so interfaces are cleaneer and clearer.</p>
<p>Part agree with RoleList:</p>
<p>name : rolelist isn&#8217;t a domain concept to me</p>
<p>public class UserRoles : IEnumerable<role><br />
{<br />
    private List</role><role> roleList;<br />
&#8230;<br />
}</p>
<p>The above lets you change List</role><role> to a Dictionary<x , Role> under the covers without forcing all the callers to start using KeyValuePair<tkey , TValue> in their foreach code.</p>
<p>Agree with you that this helps isolate the implementation but will throw in that developers who maintain/extend this code have a class to put code into that deals with the users roles rather than putting code in the classes that depend on UserRoles</p>
<p>Although YAGNI goes against this, I have moved to YJMDWDIWR (your junior maintenance developer won&#8217;t do it when required) doesn&#8217;t roll off the tongue though <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>Karl:</p>
<p>Your unit tests hit the database?</p>
<p>Ed</tkey></x></role></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1647">
		<div id="comment-1647">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1647">March 5, 2009 at 1:23 pm</a></div>

		<div class="comment-body"><p>@Sam<br />
Yes, good catch</p>
<p>@Jim<br />
I have a completely different perspective than you on YAGNI &#8211; I think exposing the concrete type is a violation of YAGNI, and I don&#8217;t see how exposing an interface makes the code more fragile &#8211; I think it makes it far more robust. The simplest thing possible isn&#8217;t necessarily what you&#8217;re used to doing, or what MSDN says. Just because something adds flexibility doesn&#8217;t mean it violates YAGNI &#8211; many things are simpler yet provide greater flexibility.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1646">
		<div id="comment-1646">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Jim Cooper</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1646">March 5, 2009 at 1:06 pm</a></div>

		<div class="comment-body"><p>&#8220;Making use of interfaces today is a quick and easy way to make your system better for tomorrow &#8211; it costs absolutely nothing, yet rewards you with greater flexibility.&#8221;</p>
<p>I get concerned about statement like this. Remember when the great goal of OO was reuse? Even when it wasn&#8217;t necessary? I&#8217;m starting to feel that &#8220;flexibility&#8221; is the new reuse.</p>
<p>YAGNI applies here too. And there **is** a cost to using interfaces &#8211; your code becomes more fragile (ie breaking changes are more frequent). It&#8217;s easier to refactor classes than interfaces, so my advice is usually to start with a class and let interfaces fall out of the refactoring process.</p>
<p>And I also don&#8217;t think your IList example is a good one. If you truly want flexibility there, define a new class:</p>
<p>public class RoleList : List<role><br />
{<br />
}</p>
<p>It&#8217;s a much better solution that insulates your User class from changes to the list of roles implementation details much more effectively.</role></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1645">
		<div id="comment-1645">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.geekdaily.net' rel='external nofollow' class='url'>Justin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1645">March 5, 2009 at 12:54 pm</a></div>

		<div class="comment-body"><p>Another great article Karl, as usual. It is amazing how often we need to be reminded of these fundamental concepts.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1644">
		<div id="comment-1644">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/garrypilkington/default.aspx' rel='external nofollow' class='url'>Garry</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1644">March 5, 2009 at 11:20 am</a></div>

		<div class="comment-body"><p>Thanks Karl.  I love these back-to-basic articles. They certainly help me as they often cover aspects from the real world which don&#8217;t always get covered in the textbooks.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1643">
		<div id="comment-1643">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.superdopey.nl/techblog/' rel='external nofollow' class='url'>Ralph de Ruijter</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1643">March 5, 2009 at 8:59 am</a></div>

		<div class="comment-body"><p>Hi Karl,</p>
<p>thanks for this article. It has been a while since I got this part of software development explained to me so it got a bit  rusty.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1642">
		<div id="comment-1642">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Sam</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1642">March 5, 2009 at 6:30 am</a></div>

		<div class="comment-body"><p>Hi, don&#8217;t you need the get{} part in this property?</p>
<p>   public IList<role> Roles<br />
   {<br />
      if (_roles == null)<br />
      {<br />
         _roles = new List</role><role>();<br />
      }<br />
      return _roles;<br />
   }</role></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1641">
		<div id="comment-1641">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://scottbellware.com' rel='external nofollow' class='url'>Scott Bellware</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1641">March 5, 2009 at 3:40 am</a></div>

		<div class="comment-body"><p>Cool! How do I do that in IronRuby? <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
<p>It&#8217;s important to note that every class has an interface.  An interface is any class&#8217;s signature.  Static, pure virtual **types** like .NET interfaces are really just a specialized construct for these kinds of languages.  This isn&#8217;t as much object-oriented design as it is class-oriented or type-oriented design.  It really doesn&#8217;t have much to do with objects in essence.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1640">
		<div id="comment-1640">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Petar Repac</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1640">March 4, 2009 at 7:42 pm</a></div>

		<div class="comment-body"><p>Nice article. Thanks Karl.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1639">
		<div id="comment-1639">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://a1@aspwebsolution.com' rel='external nofollow' class='url'>bennyb</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1639">March 4, 2009 at 6:58 pm</a></div>

		<div class="comment-body"><p>Always try to &#8220;Interface&#8221; services. e.g. IOrderDeliveryService, INotificationEngine</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1638">
		<div id="comment-1638">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Other Rob</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1638">March 4, 2009 at 6:37 pm</a></div>

		<div class="comment-body"><p>With regards to abstract base classes vs. interfaces, it might be worth going back in the virtual time machine to see where this makes sense and how it got here. A lot of old object-oriented design theory (not necessarily related to programming, but rather modeling in general) concerned itself with generalization and specialization. That is to say that a class of thing was general and common, and that you had specialized classes of things that are subclassed from the general class (base class). That pretty much sums up inheritance, and is more or less where you get base classes from. Some of the earlier programming languages, because of these modeling principles, used base classes, but had no real independant notion of a purely abstract interface (take C++ for example). As a side effect, you gained polymorphism by inheriting base classes, and that was that. But people quickly discovered that there were cases where it made no sense to have an instance of a base class by itself &#8211; that it only represented common general state and behavior of other subclasses. That got people to deal with a notion of &#8220;abstract&#8221; vs. concrete classes. Abstract classes could only be inherited, but not instantiated. But further still, people began to notice that there was a seperate and distinct pattern evolving where you had a purely abstract &#8220;type&#8221; (class in the loose sense of the word) with zero implementation meant to define the interface for which you would talk to subclasses &#8211; a case where you had polymorphism with no inherited behavior or state. This scenario became so common and had such clear benefits in some cases that later OO languages (like Java, C#, and VB/VB.NET for example) took this concept to the next level and made it a first-class citizen of the language. In fact, COM was completely built around the notion, which is how it crept into classic VB. You could argue that COM was really a technology to publish interfaces across module boundries for C++, and since classic VB was built around COM, it only made sense to incorporate the notion.</p>
<p>Other languages, like Object Pascal, for example, give hints to the segregation of the concepts. There, when you define a class &#8220;type&#8221;, you have a section where you describe the Interface and a separate section where you describe the Implementation, although it doesn&#8217;t actually treat the Interface as an entity seperate from the encompassing class &#8220;type&#8221;.</p>
<p>The biggest distinction between abstract classes and interface in modern languages (unlike C++ where all you had were base classes) is that base classes (abstract or not) are used to define common, generalized state and behaviors which are inherited by subclasses. Interfaces don&#8217;t provide implementation, so you are simply defining the polymorphism mechanism of the classes implementing them &#8211; in other words, defining the &#8220;contract&#8221; of guaranteed members for those classes which can be accessed (without providing any implementation).</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1637">
		<div id="comment-1637">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">karl</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1637">March 4, 2009 at 4:46 pm</a></div>

		<div class="comment-body"><p>@Brian<br />
Thinking about it, you&#8217;re right about internal interfaces. It likely doesn&#8217;t make sense to have an interface that mixes public deceleration and internal ones.</p>
<p>@Rob<br />
I don&#8217;t use interfaces for domain objects. I&#8217;ve seen such implementation but never a benefit associated with it. Unless experience, or someone, corrects me, I&#8217;d almost consider it an anti-pattern. There me be some benefits when dealing with a &#8220;Summary&#8221; object.</p>
<p>@Ed<br />
I think this one will come down to personal preference and your own experience. First, there&#8217;s no pain point in unit testing UserRepository based on it&#8217;s coupling to RepositoryBase &#8211; so there&#8217;s one major flag down. Second, I kinda want them to be tightly coupled &#8211; logically, I see the FindOne method as part of UserRepository &#8211; the fact that I use inheritance for re-use is an implementation detail to me. Maybe that doesn&#8217;t make sense, but when I conceptualize my code, I don&#8217;t think of BaseRepository.</p>
<p>I agree that composition would work at least as well and that its generally right to favor it over inheritance.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1636">
		<div id="comment-1636">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ed</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1636">March 4, 2009 at 4:30 pm</a></div>

		<div class="comment-body"><p>a quick google and I found this:</p>
<p><a href="http://www.artima.com/lejava/articles/designprinciples.html" rel="nofollow">http://www.artima.com/lejava/articles/designprinciples.html</a></p>
<p>An interview with Eric Gamma about programming to interfaces. He expresses far better than I did in my previous comment <img src='http://codebetter.com/karlseguin/wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1635">
		<div id="comment-1635">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Ed</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1635">March 4, 2009 at 4:25 pm</a></div>

		<div class="comment-body"><p>How about &#8220;favour composition over inheritence&#8221; and the fragile base class problem?</p>
<p>Doesn&#8217;t the tight coupling to RepositoryBase contradict this?</p>
<p>Anybody got an nDepend rule for classes with names ending in Base?</p>
<p>Regards</p>
<p>Ed</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1634">
		<div id="comment-1634">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.rhpconsultling.net' rel='external nofollow' class='url'>Roberto Hernandez</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1634">March 4, 2009 at 4:13 pm</a></div>

		<div class="comment-body"><p>You are at your best when you are writing with passion about the basics.  I love this one, and I am going to be making sure every Jr. Developer in the office reads it.</p>
<p>Regards,</p>
<p>Roberto</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1633">
		<div id="comment-1633">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.robertbeal.com' rel='external nofollow' class='url'>Rob</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1633">March 4, 2009 at 4:00 pm</a></div>

		<div class="comment-body"><p>Hi, nice back to basics article. Always raises lots of discussion.</p>
<p>We make a point of placing our interfaces and implementation classes into two separate projects, and use IoC via Castle Windsor to resolve objects. We then use nDepend to ensure applications only reference the interface project and not the implemention directly. </p>
<p>To make sure all the dll&#8217;s get pulled into the application&#8217;s bin dir, we fluently load our IoC container. This whole setup ensures everything is strongly typed so run time errors are less likely.</p>
<p>One place we don&#8217;t have interfaces, is on our Model classes (ie, &#8220;User&#8221;). I often wonder whether we should though, as they contain a fair amount of implementation.</p>
<p>Also the hardest thing I find with hiding implementation (encapsulation), is unit testing. I know you&#8217;re only supposed to test public methods, but that&#8217;s often not the smallest unit to test (and can mean mocking/stubbing a lot). </p>
<p>I find there are two options, make the hidden implementation public (in another class) or make the method protected so you can unit test it using inheritance. I generally prefer the former, although sometimes the latter can make sense.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1632">
		<div id="comment-1632">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.brianonsoftware.com' rel='external nofollow' class='url'>Brian</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/karlseguin/2009/03/04/back-to-basics-interfaces/#comment-1632">March 4, 2009 at 3:58 pm</a></div>

		<div class="comment-body"><p>One distinction I bring about when to choose an interface over an abstract class is that an interface is move oriented towards defining &#8220;services&#8221; for other types (such as IDisposable offering a disposing service through the Dispose methods for any objects that should take care of its own disposing), whereas an abstract class is more oriented towards defining or encapsulating &#8220;behaviors&#8221; for other types (such as the Array class offering various instance and static methods to its derivatives).  </p>
<p>Another thing developers should be aware when either developing public interfaces is that they better be sure that those interface will not change in the future because applications depending on those interfaces will surely break.  </p>
<p>BTW, could you elaborate on your argument for making interface methods internal?  I would suggest having those &#8220;internal methods&#8221; in an internal interface instead, but I&#8217;m still curious to know why you would suggest that a [public] interface should specify the scope of its methods other than public.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.313 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 10:45:52 -->
<!-- super cache -->