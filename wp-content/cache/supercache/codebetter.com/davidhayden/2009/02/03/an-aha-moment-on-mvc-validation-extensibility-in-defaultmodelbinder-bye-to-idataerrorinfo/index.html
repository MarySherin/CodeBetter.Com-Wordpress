<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>An Aha Moment on MVC Validation Extensibility in DefaultModelBinder &#8211; Bye to IDataErrorInfo | David Hayden</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/davidhayden/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/davidhayden/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/davidhayden/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/davidhayden/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/davidhayden/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='David Hayden' href='http://codebetter.com/davidhayden/' />
<link rel='start' title='Object Identity vs. Object Equality &#8211; Overriding System.Object.Equals(Object obj)' href='http://codebetter.com/davidhayden/2005/02/22/object-identity-vs-object-equality-overriding-system-object-equalsobject-obj/' />
<link rel='prev' title='TryUpdateModel and IDataErrorInfo &#8211; Avoiding Exception-Based Validation' href='http://codebetter.com/davidhayden/2009/02/02/tryupdatemodel-and-idataerrorinfo-avoiding-exception-based-validation/' />
<link rel='next' title='South Florida Code Camp 2009 Rocked!' href='http://codebetter.com/davidhayden/2009/02/09/south-florida-code-camp-2009-rocked/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/' />
<link rel='shortlink' href='http://codebetter.com/davidhayden/?p=312' />
<link rel="stylesheet" href="http://codebetter.com/davidhayden/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/davidhayden/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-312" class="post-312 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">An Aha Moment on MVC Validation Extensibility in DefaultModelBinder &#8211; Bye to IDataErrorInfo</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/davidhayden/author/davidhayden/" title="View all posts by davidhayden">davidhayden</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/" title="6:03 am" rel="bookmark"><span class="entry-date">February 3, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/davidhayden/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/davidhayden/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/davidhayden/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p><P>A <A class="" href="http://codebetter.com/blogs/david.hayden/archive/2009/02/02/tryupdatemodel-and-idataerrorinfo-avoiding-exception-based-validation.aspx">comment by Scott Guthrie on my last post</A> had me distracted this evening:</P><br />
<P>&#8220;One other thing to note is that the IDataErrorInfo support is implemented using standard validation extensibility APIs added with the RC. &nbsp;So if you don&#8217;t like IDataErrorInfo and prefer a different validation extensibility point you can integrate that in as well.&#8221;</P><br />
<P>It is obvious that I don&#8217;t like&nbsp;using&nbsp;IDataErrorInfo for use with a validation framework, like the <A class="" href="http://www.pnpguidance.net/Tag/ValidationApplicationBlock.aspx">Validation Application Block</A>, so what&nbsp;is this validation extensibility API that scott mysteriously speaks of?</P><br />
<P>I can&#8217;t speak for Scott, but if you look at the <STRONG>DefaultModelBinder </STRONG>it is using IDataErrorInfo in a few protected virtual methods that we can surely override in our own custom ModelBinder:</P><br />
<UL><br />
<LI><br />
<DIV>OnModelUpdated</DIV></LI><br />
<LI><br />
<DIV>OnPropertyValidated</DIV></LI></UL><br />
<P>The Validation Application Block just won&#8217;t work with OnPropertyValidated because you can&#8217;t efficiently get the broken rules for a specific property. However, OnModelUpdated is a beautiful match for the Validation Application Block because it is a single point where I can get all the validation errors for the model in question and then populate ModelState with those errors.</P><br />
<P>So, let&#8217;s override the <STRONG>OnModelUpdated</STRONG> method of DefaultModelBinder with Validation Application Block code in our custom <STRONG>VABModelBinder</STRONG>:</P><br />
<P>&nbsp;</P><br />
<DIV><br />
<P><SPAN>public</SPAN> <SPAN>class</SPAN> <SPAN>VABModelBinder</SPAN> : <SPAN>DefaultModelBinder</SPAN></P><br />
<P>{</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>override</SPAN> <SPAN>void</SPAN> OnModelUpdated(<SPAN>ControllerContext</SPAN> controllerContext,</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>ModelBindingContext</SPAN> bindingContext)</P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>var</SPAN> factory = <SPAN>ValidationFactory</SPAN>.CreateValidator(bindingContext.Model.GetType());</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>var</SPAN> results = factory.Validate(bindingContext.Model);</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>foreach</SPAN> (<SPAN>var</SPAN> result <SPAN>in</SPAN> results)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; bindingContext.ModelState.AddModelError(result.Key, result.Message);</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>protected</SPAN> <SPAN>override</SPAN> <SPAN>void</SPAN> OnPropertyValidated(<SPAN>ControllerContext</SPAN> controllerContext,</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>ModelBindingContext</SPAN> bindingContext, <SPAN>PropertyDescriptor</SPAN> propertyDescriptor,</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>object</SPAN> value)</P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Do Nothing;</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; }</P><br />
<P>}</P></DIV><!--EndFragment--><br />
<P>&nbsp;</P><br />
<P>We can then set the VABModelBinder as the default model binder in Application_Start:</P><br />
<P>&nbsp;</P><br />
<DIV><br />
<P><SPAN>ModelBinders</SPAN>.Binders.DefaultBinder = <SPAN>new</SPAN> <SPAN>VABModelBinder</SPAN>();</P></DIV><!--EndFragment--><br />
<P>&nbsp;</P><br />
<P>Cool. So let&#8217;s remove all that IDataErrorInfo stuff on the Customer Class <A class="" href="http://codebetter.com/blogs/david.hayden/archive/2009/01/31/asp-net-mvc-and-validation-using-idataerrorinfo-and-validation-application-block.aspx">we&nbsp;discussed before</A> and just keep the validation attributes. Again, if you don&#8217;t like the attributes, put your validators in a configuration file:</P><br />
<P>&nbsp;</P><br />
<DIV><br />
<P><SPAN>public</SPAN> <SPAN>partial</SPAN> <SPAN>class</SPAN> <SPAN>Customer</SPAN></P><br />
<P>{</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>int</SPAN> Id { <SPAN>get</SPAN>; <SPAN>set</SPAN>; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; [<SPAN>StringLengthValidator</SPAN>(1, 50,</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; MessageTemplate = <SPAN>"Name must be between {3} and {5}"</SPAN>)]</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>string</SPAN> Name { <SPAN>get</SPAN>; <SPAN>set</SPAN>; }</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; [<SPAN>StringLengthValidator</SPAN>(1, 75,</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; MessageTemplate = <SPAN>"Email must be between {3} and {5}"</SPAN>)]</P><br />
<P>&nbsp;&nbsp;&nbsp; [<SPAN>RegexValidator</SPAN>(<SPAN>@"\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*&#8221;</SPAN>,</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; MessageTemplate = <SPAN>&#8220;Valid Email Required.&#8221;</SPAN>)]</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>public</SPAN> <SPAN>string</SPAN> Email { <SPAN>get</SPAN>; <SPAN>set</SPAN>; }</P><br />
<P>}</P></DIV><br />
<P><!--EndFragment-->&nbsp;</P><br />
<P>Given this we have at least 3 ways we can bind our Customer instance. If you do not want an exception to be thrown, which personally I would avoid, you can write code like this:</P><br />
<P>&nbsp;</P><br />
<DIV><br />
<P>[<SPAN>AcceptVerbs</SPAN>(<SPAN>HttpVerbs</SPAN>.Post)]</P><br />
<P><SPAN>public</SPAN> <SPAN>ActionResult</SPAN> Create([<SPAN>Bind</SPAN>(Exclude=<SPAN>"Id"</SPAN>)]<SPAN>Customer</SPAN> customer)</P><br />
<P>{</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>if</SPAN> (!ModelState.IsValid)</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> View(customer);</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>// Do Something&#8230;</SPAN></P><br />
<P>}</P></DIV><!--EndFragment--><br />
<P>&nbsp;</P><br />
<P>or use <STRONG>TryUpdateModel</STRONG>:</P><br />
<P>&nbsp;</P><br />
<DIV><br />
<P>[<SPAN>AcceptVerbs</SPAN>(<SPAN>HttpVerbs</SPAN>.Post)]</P><br />
<P><SPAN>public</SPAN> <SPAN>ActionResult</SPAN> Create(<SPAN>FormCollection</SPAN> form)</P><br />
<P>{</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>var</SPAN> customer = <SPAN>new</SPAN> <SPAN>Customer</SPAN>();</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>if</SPAN> (!TryUpdateModel&lt;<SPAN>ICreateCustomerForm</SPAN>&gt;(customer))</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> View(customer);</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>// Do Something&#8230;</SPAN></P><br />
<P>}</P></DIV><!--EndFragment--><br />
<P>&nbsp;</P><br />
<P>If you prefer the InvalidOperationException to be thrown with broken rules, there is&nbsp;<STRONG>UpdateModel</STRONG>:</P><br />
<P>&nbsp;</P><br />
<DIV><br />
<P>[<SPAN>AcceptVerbs</SPAN>(<SPAN>HttpVerbs</SPAN>.Post)]</P><br />
<P><SPAN>public</SPAN> <SPAN>ActionResult</SPAN> Create(<SPAN>FormCollection</SPAN> form)</P><br />
<P>{</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>var</SPAN> customer = <SPAN>new</SPAN> <SPAN>Customer</SPAN>();</P><br />
<P>&nbsp;</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>try</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; UpdateModel&lt;<SPAN>ICreateCustomerForm</SPAN>&gt;(customer);</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>// Do Something&#8230;</SPAN></P><br />
<P>&nbsp;&nbsp;&nbsp; }</P><br />
<P>&nbsp;&nbsp;&nbsp; <SPAN>catch</SPAN> (<SPAN>InvalidOperationException</SPAN>)</P><br />
<P>&nbsp;&nbsp;&nbsp; {</P><br />
<P>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <SPAN>return</SPAN> View(customer);</P><br />
<P>&nbsp;&nbsp;&nbsp; }</P><br />
<P>}</P></DIV><br />
<P><!--EndFragment-->&nbsp;</P><br />
<P>Keep in mind&nbsp;the above&nbsp;is pseudo code for blogging purposes only. As mentioned in the <A class="" href="http://codebetter.com/blogs/david.hayden/archive/2009/01/31/asp-net-mvc-and-validation-using-idataerrorinfo-and-validation-application-block.aspx">previous post</A>, you will get the errors displayed back to the form when validation errors are found:</P><br />
<P>&nbsp;</P><br />
<P><IMG height="279" src="http://codebetter.com/photos/david.hayden/images/187925/original.aspx" width="360"></P><br />
<P>&nbsp;</P><br />
<H2>Conclusion</H2><br />
<P>Man&nbsp;I really like this! I don&#8217;t know if this is the extensibility Scott referred to in his comment, but this is absolutely perfect. This gets away from my current production code where I&nbsp;call validation in&nbsp;the controller action and then use an extension method to pass validation errors to the ModelState. This hides the validation under the covers which is fine with me. I hate looking at such cross-cutting concerns.</P><br />
<P>Note that you can easily replace the Validation Application Block with Castle.Validator, NHibernate Validator, or whatever you choose for validation. For looser-coupling and/or pluggability purposes, of course, you can&nbsp;hide validation&nbsp;behind a service interface&nbsp;to avoid direct coupling to a particular framework.</P><br />
<P>Love to hear your comments.</P><br />
<P>&nbsp;</P><br />
<P><A class="" href="http://www.davidhayden.com/">David Hayden</A></P><br />
<P>&nbsp;</P></p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/davidhayden/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/" title="Permalink to An Aha Moment on MVC Validation Extensibility in DefaultModelBinder &#8211; Bye to IDataErrorInfo" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/feed/" title="Comments RSS to An Aha Moment on MVC Validation Extensibility in DefaultModelBinder &#8211; Bye to IDataErrorInfo" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-312 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/davidhayden/2009/02/02/tryupdatemodel-and-idataerrorinfo-avoiding-exception-based-validation/" rel="prev"><span class="meta-nav">&larr;</span> TryUpdateModel and IDataErrorInfo &#8211; Avoiding Exception-Based Validation</a></div>
					<div class="nav-next"><a href="http://codebetter.com/davidhayden/2009/02/09/south-florida-code-camp-2009-rocked/" rel="next">South Florida Code Camp 2009 Rocked! <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">15 Responses to <em>An Aha Moment on MVC Validation Extensibility in DefaultModelBinder &#8211; Bye to IDataErrorInfo</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-871">
		<div id="comment-871">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Peter</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-871">February 11, 2009 at 10:35 pm</a></div>

		<div class="comment-body"><p>This is great.</p>
<p>Is there a way to apply this to ADO.net Data Services so that I can combine MVVM and ADO.net Data Services?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-870">
		<div id="comment-870">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.davidhayden.com/' rel='external nofollow' class='url'>David Hayden</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-870">February 11, 2009 at 5:11 pm</a></div>

		<div class="comment-body"><p>Sam,</p>
<p>I am not sure that is really a &#8220;problem&#8221;. If one uses the built-in validation extensibility in the ModelBinder then yes any changes made after the binding are not reflected in the ModelState. By defintion you would not do what you are mentioning above.</p>
<p>If using a ModelBinder is not enough to bind form values to a model, you are best calling validation within the action and not within the ModelBinder. I show an example of that here:</p>
<p><a href="http://www.davidhayden.com/blog/dave/archive/2008/09/10/ASPNETMVCEnterpriseLibraryValidationApplicationBlock.aspx" rel="nofollow">http://www.davidhayden.com/blog/dave/archive/2008/09/10/ASPNETMVCEnterpriseLibraryValidationApplicationBlock.aspx</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-869">
		<div id="comment-869">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://samuelmueller.com' rel='external nofollow' class='url'>Sam Mueller</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-869">February 9, 2009 at 11:28 pm</a></div>

		<div class="comment-body"><p>There is a problem with this solution.  Let&#8217;s say in your action method you do some manipulations to make your model valid:</p>
<p>public ActionResult Create([Bind(Exclude="Id")]Customer customer)</p>
<p>{<br />
    customer.CustomerTypeId = 4; //required to make valid, since it has a NotNull attribute from VAB.  For arguments sake, let&#8217;s say that you cannot put this as a hidden field on your form.</p>
<p>    if (!ModelState.IsValid)</p>
<p>        return View(customer);</p>
<p>    // Do Something&#8230;</p>
<p>}</p>
<p>when you call ModelState.IsValid, you will get false, even though your model is now valid.  Since there is no way to invoke OnModelUpdated, then you are stuck permanently with the out of sync ModelState unless you want to call UpdateModel, which would try to bind to the form values again.</p>
<p>I guess you could pass in the FormCollection argument, and manually create and bind your objects, but losing the ability to auto bind your objects and their children (and their children&#8217;s children, and so on) would be saddening.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-868">
		<div id="comment-868">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.davidhayden.com/' rel='external nofollow' class='url'>David Hayden</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-868">February 4, 2009 at 3:55 am</a></div>

		<div class="comment-body"><p>Koistya,</p>
<p>I won&#8217;t get a chance to look into that until after the weekend, but my initial thought is to somehow pass the ruleset to the binding context where I can get at it during the OnModelUpdated Method. Custom attributes come to mind.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-867">
		<div id="comment-867">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.davidhayden.com/' rel='external nofollow' class='url'>David Hayden</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-867">February 4, 2009 at 3:40 am</a></div>

		<div class="comment-body"><p>John,</p>
<p>The model binder registers type conversion errors with the ModelState during the binding process automatically. You can just check ModelState.IsValid to see if any conversion problems occurred.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-866">
		<div id="comment-866">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.davidhayden.com/' rel='external nofollow' class='url'>David Hayden</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-866">February 4, 2009 at 3:29 am</a></div>

		<div class="comment-body"><p>Scott,</p>
<p>Absolutely. In my example I just went with a new default binder,  but certainly one can choose a binder per model type or have a binder than can react differently to validation based on various attributes, interfaces, and other descriptors on the model.</p>
<p>Really cool stuff!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-865">
		<div id="comment-865">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://johnwest.spaces.live.com' rel='external nofollow' class='url'>John</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-865">February 4, 2009 at 2:31 am</a></div>

		<div class="comment-body"><p>Are two levels of validation needed?  The first is really about type checks.  For example, if someone enters a string in a numeric field,  you&#8217;ll never be able to create a model to be validated.  How do you do this first-level validation in MVC?  In webforms, I always put this first-level check in the webform, and the second-level model validation in a business tier service object?  </p>
<p>John</p>
<p>ps.  I&#8217;m sure there&#8217;s a term for what I&#8217;m talking about, but I don&#8217;t remember it.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-864">
		<div id="comment-864">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/scottgu' rel='external nofollow' class='url'>scottgu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-864">February 4, 2009 at 1:41 am</a></div>

		<div class="comment-body"><p>One thing to note is that you can register different binders on a per-type basis.  So if you have different validation or binding schemes used within your application you can register different binders for each.</p>
<p>Or alternatively you could have one binder you register and have it choose different approaches based on the interface your model type implements.</p>
<p>Thanks,</p>
<p>Scott</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-863">
		<div id="comment-863">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.riaguy.com' rel='external nofollow' class='url'>Koistya `Navin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-863">February 3, 2009 at 11:22 pm</a></div>

		<div class="comment-body"><p>How you deal with different validation rule sets with your solution?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-862">
		<div id="comment-862">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.riaguy.com' rel='external nofollow' class='url'>Koistya `Navin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-862">February 3, 2009 at 10:52 pm</a></div>

		<div class="comment-body"><p>I like this approach. Also I think that the next version of Validation Application Block will support per property validation and then we will be able to switch back to IDataErrorInfo + VAB.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-861">
		<div id="comment-861">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://wizardsofsmart.net/author/riles/' rel='external nofollow' class='url'>Ryan Riley</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-861">February 3, 2009 at 3:18 pm</a></div>

		<div class="comment-body"><p>That&#8217;s terrific. Any chance of something similar for WPF/Silverlight? The only two options of which I&#8217;m aware at the moment are exception and IDataErrorInfo validation.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-860">
		<div id="comment-860">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Domantas</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-860">February 3, 2009 at 1:36 pm</a></div>

		<div class="comment-body"><p>David it&#8217;s awesome. I think VAB, Castle&#8230; validation it is better than Scott suggest using IDataErrorInfo.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-859">
		<div id="comment-859">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://hex.lostechies.com' rel='external nofollow' class='url'>Eric Hexter</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-859">February 3, 2009 at 11:33 am</a></div>

		<div class="comment-body"><p>I like this approach.  It really put more into convention. The Code Camp Server project approached this from the Filter extension point.. pre RC, no it looks like that needs to be updated to fit into the new extensibility.  Here is the code to the old filter&#8230; <a href="http://code.google.com/p/codecampserver/source/browse/trunk/src/UI/Helpers/Filters/ValidateModelAttribute.cs" rel="nofollow">http://code.google.com/p/codecampserver/source/browse/trunk/src/UI/Helpers/Filters/ValidateModelAttribute.cs</a><br />
Great stuff here, thanks for digging into this further.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-858">
		<div id="comment-858">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://suhinini.blogspot.com' rel='external nofollow' class='url'>Ivan Suhinin</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-858">February 3, 2009 at 11:08 am</a></div>

		<div class="comment-body"><p>Wow, that&#8217;s cool! I&#8217;ve thought about diving into DefaultModelBinder and looking for some generic validation mechanism. Thanks for this elegant solution! I&#8217;m also going to somehow abstract from validation framework and use it via service interface.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-857">
		<div id="comment-857">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://weblogs.asp.net/scottgu' rel='external nofollow' class='url'>scottgu</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#comment-857">February 3, 2009 at 10:41 am</a></div>

		<div class="comment-body"><p>Yep &#8211; that was the extensibility i was referring to. <img src='http://codebetter.com/davidhayden/wp-includes/images/smilies/icon_wink.gif' alt=';-)' class='wp-smiley' /> </p>
<p>Thanks,</p>
<p>Scott</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/davidhayden/2009/02/03/an-aha-moment-on-mvc-validation-extensibility-in-defaultmodelbinder-bye-to-idataerrorinfo/#respond" style="display:none;">Cancel reply</a></small></h3>
									<form action="http://codebetter.com/davidhayden/wp-comments-post.php" method="post" id="commentform">
																			<p class="comment-notes">Your email address will not be published. Required fields are marked <span class="required">*</span></p>							<p class="comment-form-author"><label for="author">Name</label> <span class="required">*</span><input id="author" name="author" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-email"><label for="email">Email</label> <span class="required">*</span><input id="email" name="email" type="text" value="" size="30" aria-required='true' /></p>
<p class="comment-form-url"><label for="url">Website</label><input id="url" name="url" type="text" value="" size="30" /></p>
												<p class="comment-form-comment"><label for="comment">Comment</label><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true"></textarea></p>						<p class="form-allowed-tags">You may use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:  <code>&lt;a href=&quot;&quot; title=&quot;&quot;&gt; &lt;abbr title=&quot;&quot;&gt; &lt;acronym title=&quot;&quot;&gt; &lt;b&gt; &lt;blockquote cite=&quot;&quot;&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=&quot;&quot;&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=&quot;&quot;&gt; &lt;strike&gt; &lt;strong&gt; </code></p>						<p class="form-submit">
							<input name="submit" type="submit" id="submit" value="Post Comment" />
							<input type='hidden' name='comment_post_ID' value='312' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
						</p>
						<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="edfdda02df" /></p>					</form>
							</div><!-- #respond -->
						
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter//third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.269 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-25 15:03:37 -->
<!-- super cache -->