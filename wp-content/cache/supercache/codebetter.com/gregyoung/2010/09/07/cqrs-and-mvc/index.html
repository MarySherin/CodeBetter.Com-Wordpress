<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>CQRS and MVC | Greg Young</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/gregyoung/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/gregyoung/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/gregyoung/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/gregyoung/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/gregyoung/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Greg Young' href='http://codebetter.com/gregyoung/' />
<link rel='start' title='Howdy and Viewing Unmanaged Code in VS.NET' href='http://codebetter.com/gregyoung/2006/06/09/howdy-and-viewing-unmanaged-code-in-vs-net/' />
<link rel='prev' title='Super Simple CQRS Example' href='http://codebetter.com/gregyoung/2010/08/31/super-simple-cqrs-example/' />
<link rel='next' title='CQRS Info' href='http://codebetter.com/gregyoung/2010/09/08/cqrs-info/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/' />
<link rel='shortlink' href='http://codebetter.com/gregyoung/?p=157' />
<link rel="stylesheet" href="http://codebetter.com/gregyoung/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/gregyoung/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-157" class="post-157 post type-post status-publish format-standard hentry category-cqrs">
					<h1 class="entry-title">CQRS and MVC</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/gregyoung/author/gregyoung/" title="View all posts by gregyoung">gregyoung</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/" title="12:14 pm" rel="bookmark"><span class="entry-date">September 7, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/gregyoung/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/gregyoung/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/gregyoung/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>What is CQRS? Well if we ask google it will say &#8220;did you mean CARS?&#8221; (although it seems for developers who search a lot it now actually comes up.</p>
<p>According to&nbsp;<a href="http://www.all-acronyms.com/CQRS">http://www.all-acronyms.com/CQRS</a>&nbsp;CQRS is Commercial Quality Rimmed Steel</p>
<p>&nbsp;</p>
<p>CQRS is none of these things. CQRS is not new. One of my favorite questions I get from people is &#8220;How many real systems are there running with this kind of CQRS stuff&#8221;. The answer is ten if not hundreds of thousands. It even funnier when asked about Event Sourcing as I actually worked on a system 10 years ago using Event Sourcing (it used to be really popular).</p>
<p>&nbsp;</p>
<p><strong>CQRS is pretty much MVC! </strong></p>
<p>&nbsp;</p>
<p>I have had very few people notice this when teaching but occasionally a bright one will pick up on it. Of course CQRS is not precisely MVC but it is definitely a variant. Let&#8217;s go way back to 1979 and look at what Trygve had to say about MVC.&nbsp;http://heim.ifi.uio.no/~trygver/1979/mvc-2/1979-12-MVC.pdf</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p style="padding-left: 30px">MODELS</p>
<p style="padding-left: 30px">Models represent knowledge. A model could be a single object (rather uninteresting), or it</p>
<p style="padding-left: 30px">could be some structure of objects. <s>The proposed implementation supports knowledge</s></p>
<p style="padding-left: 30px"><s>represented in something resembling semantic nets (If I understand Laura correctly)</s></p>
<p style="padding-left: 30px">There should be a one-to-one correspondence between the model and its parts on the one</p>
<p style="padding-left: 30px">hand, and the represented world as perceived by the owner of the model on the other hand.</p>
<p style="padding-left: 30px">The nodes of a model should therefore represent an identifiable part of the problem.</p>
<p style="padding-left: 30px">The nodes of a model should all be on the same problem level, it is confusing and considered</p>
<p style="padding-left: 30px">bad form to mix problem-oriented nodes (e.g. calendar appointments) with implementation</p>
<p style="padding-left: 30px">details (e.g. paragraphs).</p>
<p style="padding-left: 30px">&nbsp;</p>
<p style="padding-left: 30px">VIEWS</p>
<p style="padding-left: 30px">A view is a (visual) representation of its model. It would ordinarily highlight certain attributes</p>
<p style="padding-left: 30px">of the model and suppress others. It is thus acting as a presentation filter.</p>
<p style="padding-left: 30px">A view is attached to its model (or model part) and gets the data necessary for the presentation</p>
<p style="padding-left: 30px">from the model by asking questions. It may also update the model by sending appropriate</p>
<p style="padding-left: 30px">messages. All these questions and messages have to be in the terminology of the model, the</p>
<p style="padding-left: 30px">view will therefore have to know the semantics of the attributes of the model it represents. (It</p>
<p style="padding-left: 30px">may, for example, ask for the model&#8217;s identifier and expect an instance of Text, it may not</p>
<p style="padding-left: 30px">assume that the model is of class Text.)</p>
<div style="padding-left: 30px"></div>
<div style="padding-left: 30px"></div>
<div>The main difference when we talk about a system that has had CQRS applied is that there are TWO models. There is a model representing the mental model of the user and there is another model representing how transactions flow through the system. These two models are often eventually consistent with each other.</div>
<div></div>
<div>The model on the read side, supporting the views is read only. The model supporting the controllers is write-only. Synchronization is achieved either through a shared data model or through events from the write model to the read model.</div>
<p>&nbsp;</p>
<div><strong>CQRS is pretty much MVC. </strong>I am not sure I would assert that it is MVC given the definition but it is very similar. I also doubt that it is Udi or I who first thought of doing it. My guess is you can find many systems doing it.</div>
<p>&nbsp;</p>
<p>
CQRS is also very similar to&nbsp;P-7: INPUT/OUTPUT SEPARATION in&nbsp;http://heim.ifi.uio.no/~trygver/2003/javazone-jaoo/MVC_pattern.pdf&nbsp;
</p>
<p>
The input and output aspects of the Editor are technically very different with few interdependencies. Their
</p>
<div>combination in a single object tends to make this object unnecessarily complex.</div>
<div>
<p>&nbsp;</p>
<div>The major difference being the separation is only being applied at the first level then returning to a single model as drawn (CQRS is about driving this separation further and further back with benefits at each step). I am rather certain that Trygve has also come across the point that very often the model representing the user&#8217;s mental model is often very different than the model for expressing how invariants are maintained and that it can be advantageous to push the separation even further back to the models. The benefit is also seen technically when pushing even further back to data storage mechanisms.&nbsp;</div>
<p>&nbsp;</p>
<div>Understanding this will take you a long way towards understanding what people are talking about with CQRS it is certainly a variant of if not actually MVC.</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>If you are from Australia they are trying to get me to come down. <a href="http://www.surveymonkey.com/s/SQRT2RS">Could you fill out this?&nbsp;</a></p>
</div>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/gregyoung/category/cqrs/" title="View all posts in CQRS" rel="category tag">CQRS</a>. Bookmark the <a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/" title="Permalink to CQRS and MVC" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/feed/" title="Comments RSS to CQRS and MVC" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-157 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/gregyoung/2010/08/31/super-simple-cqrs-example/" rel="prev"><span class="meta-nav">&larr;</span> Super Simple CQRS Example</a></div>
					<div class="nav-next"><a href="http://codebetter.com/gregyoung/2010/09/08/cqrs-info/" rel="next">CQRS Info <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">15 Responses to <em>CQRS and MVC</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-3136">
		<div id="comment-3136">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.chiflat-iron.com' rel='external nofollow' class='url'>chi hair straightener</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3136">November 14, 2010 at 2:51 pm</a></div>

		<div class="comment-body"><p>Thanks for writing this. I really feel as though I know so much more about this than I did before. Your blog really brought some things to light that I never would have thought about before reading it. You should continue this, Im sure most people would agree youve got a gift.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3135">
		<div id="comment-3135">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.scooletz.com' rel='external nofollow' class='url'>scooletz</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3135">September 20, 2010 at 6:08 pm</a></div>

		<div class="comment-body"><p>Can you post a similar survey for Poland as you did for Australia? <img src='http://codebetter.com/gregyoung/wp-includes/images/smilies/icon_wink.gif' alt=';-)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3134">
		<div id="comment-3134">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codefish21056.blogspot.com' rel='external nofollow' class='url'>Nuno Lopes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3134">September 10, 2010 at 8:31 am</a></div>

		<div class="comment-body"><p>Hi Scott,</p>
<p>Just one more quick note.</p>
<p>&#8220;I just don&#8217;t get how CQRS is any different from using a cache.&#8221;</p>
<p>Probably in your solutions isn&#8217;t. But cache is a result of using CQRS wether you characterize it that way or not. Indeed I don&#8217;t see how we can cache data without using CQRS.</p>
<p>You may think of that is the case then thousands of developers use CQRS. Most CMS apps do etc etc. Well that is what makes a pattern a pattern IMHO, not because someone says so.</p>
<p>On another note, CQRS does not imply the use of cache IMHO. A common scenario is when you use an ORM to map the domain model to a relational model in an RDBMS. Instead of going through the ORM Query language I seldom go diecretly to the database for that matter. The reason is that developers know more about SQL then say OQL and UI widgets are already built dealing with the data structure as exposed by a Relational Model then a Domain Model.</p>
<p>The good thing of formalizing this usages into a pattern is such that we can then think about why we are using it  and fit it to particular usages.</p>
<p>In Clarified CQRS from Udi, I think he describes CQRS in ways too complicated. Although all the content is valuable. IMHO in the end of the day is just one implementation of CQRS. I goes to the extent that CQRS is composed by a set of principles rather then a set of solutions in some posts. Well we can&#8217;t argue against a set of principles can we?</p>
<p>As far as I know CQRS is born to deal with a client side concerns then internal concerns of a domain model in a distributed environment. I don&#8217;t mean it is a implemented on the client, but from a domain model point of view is above it to facilitate client interactions. Commands, queries, events, views, controllers are all artifacts to facilitate this. It also provides the guide lines to create an integration language  (SubmittPurchaseOrder &#8211; > PurchaseOrderSubmitted) to facilitate the integration of client usages. Otherwise, why bother. Building a view without intent the only option is crack the database model (as we did with W4), but as you know that is not an easy task most of th time, sometimes the costs are so high that becomes impossible considering budget constraints. With events things can be easier I guess.</p>
<p>Hence I argue that that CQRS core is to bridge  he gap between the clients processing model and the suppliers processing model . Much like MVC is a bridge between the user mental model and the computer processing model. </p>
<p>Now what I see Udi and Greg describing is particular applications of this pattern taking into consideration other forces.</p>
<p>Perfection is achieved not when there is no more things to add but when there are no more things to take away. I think this should be kept in mind when looking at a pattern, because it needs to be perfect.</p>
<p>Cheers,</p>
<p>Nuno<br />
PS: I should warn that I may be a bit of a DDD rogue. I&#8217;m just exposing my thoughts. In no way I&#8217;m stating what CQRS should be or not. But if I make sense, then maybe I&#8217;m not that far away.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3133">
		<div id="comment-3133">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codefish21056.blogspot.com' rel='external nofollow' class='url'>Nuno Lopes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3133">September 9, 2010 at 11:00 pm</a></div>

		<div class="comment-body"><p>Hi Scott, according to Trygve the essential purpose of MVC is to bridge the gap between the human user&#8217;s mental model and the digital model that exists in the computer.</p>
<p>Now the case that is made in my article that the essential purpose of CQRS is to bridge the gap between the clients processing model and the internal model that exists within a Bounded Context.</p>
<p>Lately I&#8217;ve been working with team responsible for implementing Workflows supporting several processes within the company. To this they use a product named W4. Users use a Workbench where processes and tasks are defined visually, fields per tasks, connector, rules, routing, notifications etc etc. You can imagine the generic model used by W4 since has no specific domain attached to it besides the one of building workflows.  The tool generates screens dynamically, transitions and so on.</p>
<p>Has it happens the model of W4 is so dynamic, that as the data grown in quantity searches became extremely slow! A search could take form 2 to 10 seconds or more.</p>
<p>What we did? We developed a script that is ran every 5 seconds extracting the new or changed data and denormalizes into to a view only model. </p>
<p>Searches are now snappy and is an incredible boost in user productivity yet we haven&#8217;t lost the flexibility offerend by W4.</p>
<p>Changes still go through the W4 APIs while, user searches use the view model.</p>
<p>Granted, this is not CQRS applied to the all application, but I argue that it CQRS applied to a slice.</p>
<p>If W4 was designed to publish events, then we could use those events to update the view in our script could be much simpler and lighter. The view could be updated in a split of a second.</p>
<p>There are loads of exemples, as for instance searching through hierachical data. We know that RDBMS is not really good for that. Then we have full text search. We also know that most database are not very good with that either.</p>
<p>On top of this we have that clients that require data to be serviced in a particular intricate format. There is no reason why we can&#8217;t just pre compute changes in structure and store them in some view only data store and let clients query that store instead. </p>
<p>The most pure case is when you imagine not having a database supporting queries retuning flat results as well as an RDBMS and the only thing you have to store objects is a database that simple stores blobs. What do you do then?</p>
<p>There is a huge advantage in terms of performance in using a scheme such as CQRS. It allow developers to explore the best structure data needs to have for a particular task.</p>
<p>On top of this you also get the benefit of not charging the domain model data store with systematic query requests that add no business value but presentation.</p>
<p>The core difference between MVC and CQRS is that MVC can virtually deal with thousands of views over the same model, most of them durable as the lifecycle of a screen.</p>
<p>Unlike  MVC, CQRS Views have a more permanent lifecycle. So in that respect different challenges and solutions are necessary. But it also opens other opportunities.</p>
<p>On another note you can imagine a P2P chat program when each chat program publish messages to each pear and receive messages subscribed form some pears. Using this architecture you could eventually have thousands of pears in a ring or diamond, talking to each other.</p>
<p>Hope this helps understanding how powerful this pattern is.</p>
<p>Markus, controllers get data either sent with commands or from Repositories in the domain model. That is the way I use it.</p>
<p>Cheers,</p>
<p>Nuno</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3132">
		<div id="comment-3132">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Markus Zywitza</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3132">September 9, 2010 at 11:10 am</a></div>

		<div class="comment-body"><p>You are writing that the controllers use a write-only model. Do they also get the state they need from the read-side-model?</p>
<p>I thought that the command-side uses the command-side-model entirely for both reading and writing, constituting a headless application. The application GUI uses the read-side-model for displaying values to the user, just as reporting or services that access the application&#8217;s data.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3131">
		<div id="comment-3131">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://h30507.www3.hp.com/t5/The-Watering-Can-of-Enterprise/bg-p/TheWateringCan' rel='external nofollow' class='url'>Scott Rudy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3131">September 9, 2010 at 2:19 am</a></div>

		<div class="comment-body"><p>Nuno, I see the point is that users don&#8217;t update the view, but they update the model through the controller, which could publish updates to the view in a rich client scenario. I get that. I just see the view as something that deals with more than data as it contains UI elements like buttons and images. For that reason it just seems fundamentally different. That&#8217;s why the comparison doesn&#8217;t make sense to me.</p>
<p>I see that there are two models, that can be structurally differently, in CQRS which present themselves as two different logical data stores, one for read and one for write. These stores would probably be physically separated as well. The read store would also be synchronized with the write store in some manner, whether pushed by events or pulled using some polling mechanism. That read-only store could be placed in various places in the architecture where it makes sense. I just don&#8217;t get how CQRS is any different from using a cache.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3130">
		<div id="comment-3130">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.agafonov.net.ua' rel='external nofollow' class='url'>Agafonov</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3130">September 8, 2010 at 1:08 pm</a></div>

		<div class="comment-body"><p>Command-Query Responsibility Segregation &#8211; CQRS<br />
is a way of designing and developing scalable and robust enterprise solutions with rich business value.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3129">
		<div id="comment-3129">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codefish21056.blogspot.com' rel='external nofollow' class='url'>Nuno Lopes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3129">September 8, 2010 at 1:05 pm</a></div>

		<div class="comment-body"><p>When I mentioned &#8220;we then argue&#8221;  meant &#8220;we, the programmers&#8221;.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3128">
		<div id="comment-3128">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codefish21056.blogspot.com' rel='external nofollow' class='url'>Nuno Lopes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3128">September 8, 2010 at 1:03 pm</a></div>

		<div class="comment-body"><p>Hi Scott, if you read my article, several MVC &#8211; CQRS compositions are discussed.</p>
<p>From the MVC point of view, the set of Commands and Queries built using CQRS compose a façade over a domain model.</p>
<p>Facade: <a href="http://en.wikipedia.org/wiki/Facade_pattern" rel="nofollow">http://en.wikipedia.org/wiki/Facade_pattern</a></p>
<p>Trygve admits that the MVC model can be implemented has a facade :http://heim.ifi.uio.no/~trygver/2003/javazone-jaoo/MVC_pattern.pdf</p>
<p>So in the end of the day, from the UI point of view we have only one model, not two.</p>
<p>CQRS is at a layer &#8220;bellow&#8221;.</p>
<p>We then argue that such separation of concerns is driven by downstream and up stream forces within the context of scalability and business process orchestration.</p>
<p>Does this help?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3127">
		<div id="comment-3127">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://h30507.www3.hp.com/t5/The-Watering-Can-of-Enterprise/Implementing-CQRS-Using-MVC/ba-p/82300' rel='external nofollow' class='url'>Scott Rudy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3127">September 8, 2010 at 2:49 am</a></div>

		<div class="comment-body"><p>Greg, thanks for the response. I actually do have two distinct models, but I felt the query model could just abstract the command model allowing the controller to only have to deal with a single model.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3126">
		<div id="comment-3126">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://codefish21056.blogspot.com' rel='external nofollow' class='url'>Nuno Lopes</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3126">September 7, 2010 at 10:04 pm</a></div>

		<div class="comment-body"><p>Hi Tony I wrote an article about this precise stuff.</p>
<p>Here it is: <a href="http://codefish21056.blogspot.com/2010/08/cqrs-mvc.html" rel="nofollow">http://codefish21056.blogspot.com/2010/08/cqrs-mvc.html</a></p>
<p>I also wrote about it here in 2009: <a href="http://tech.groups.yahoo.com/group/domaindrivendesign/message/16649" rel="nofollow">http://tech.groups.yahoo.com/group/domaindrivendesign/message/16649</a></p>
<p>More recentely here: <a href="http://groups.google.com/group/dddcqrs/browse_thread/thread/ba391c4b130c09fd/bafb07dcef3aee14?lnk=gst&#038;q=mvc#bafb07dcef3aee14" rel="nofollow">http://groups.google.com/group/dddcqrs/browse_thread/thread/ba391c4b130c09fd/bafb07dcef3aee14?lnk=gst&#038;q=mvc#bafb07dcef3aee14</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3125">
		<div id="comment-3125">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://h30507.www3.hp.com/t5/The-Watering-Can-of-Enterprise/Implementing-CQRS-Using-MVC/ba-p/82300' rel='external nofollow' class='url'>Scott Rudy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3125">September 7, 2010 at 7:55 pm</a></div>

		<div class="comment-body"><p>I can&#8217;t say I  agree with you on this one Greg, but I am wondering if maybe I am missing something. I posted a response on my blog illustrating how I see the two relate to each other and how I might go about implementing the model in MVC.</p>
<p><a href="http://h30507.www3.hp.com/t5/The-Watering-Can-of-Enterprise/Implementing-CQRS-Using-MVC/ba-p/82300" rel="nofollow">http://h30507.www3.hp.com/t5/The-Watering-Can-of-Enterprise/Implementing-CQRS-Using-MVC/ba-p/82300</a></p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3124">
		<div id="comment-3124">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">George Mauer</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3124">September 7, 2010 at 5:42 pm</a></div>

		<div class="comment-body"><p>@Tony<br />
Yes, that&#8217;s what Greg is talking about, though he tends to rely more on Event Sourcing than Udi does.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3123">
		<div id="comment-3123">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Tony</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3123">September 7, 2010 at 2:41 pm</a></div>

		<div class="comment-body"><p>I have never heard of CQRS before. Just so we are on the same page, would this overview match <a href="http://www.udidahan.com/2009/12/09/clarified-cqrs/" rel="nofollow">http://www.udidahan.com/2009/12/09/clarified-cqrs/</a> what you are referring to? More or less?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-3122">
		<div id="comment-3122">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Roco</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2010/09/07/cqrs-and-mvc/#comment-3122">September 7, 2010 at 2:29 pm</a></div>

		<div class="comment-body"><p>&#8220;Synchronization is achieved either through a shared data model or through events from the write model to the read model.&#8221;</p>
<p>I am interested in hearing more specifics around how you keep the two models in sync. If possible, please elaborate on the shared data model approach with specifics. Are we talking transaction replication, ETL, triggers, etc???</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/gregyoung/2010/09/07/cqrs-and-mvc/#respond" style="display:none;">Cancel reply</a></small></h3>
									<p class="must-log-in">You must be <a href="http://codebetter.com/gregyoung/wp-login.php?redirect_to=http%3A%2F%2Fcodebetter.com%2Fgregyoung%2F2010%2F09%2F07%2Fcqrs-and-mvc%2F">logged in</a> to post a comment.</p>												</div><!-- #respond -->
						
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.261 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 10:12:06 -->
<!-- super cache -->