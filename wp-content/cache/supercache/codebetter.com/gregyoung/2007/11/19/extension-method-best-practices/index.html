<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Extension Method Best Practices? | Greg Young</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/gregyoung/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/gregyoung/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/gregyoung/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/gregyoung/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/gregyoung/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Greg Young' href='http://codebetter.com/gregyoung/' />
<link rel='start' title='Howdy and Viewing Unmanaged Code in VS.NET' href='http://codebetter.com/gregyoung/2006/06/09/howdy-and-viewing-unmanaged-code-in-vs-net/' />
<link rel='prev' title='QCon San Francisco' href='http://codebetter.com/gregyoung/2007/10/24/qcon-san-fransisco/' />
<link rel='next' title='Spec# coming soon to a framework near you?' href='http://codebetter.com/gregyoung/2007/11/21/spec-coming-soon-to-a-framework-near-you/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/' />
<link rel='shortlink' href='http://codebetter.com/gregyoung/?p=55' />
<link rel="stylesheet" href="http://codebetter.com/gregyoung/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/gregyoung/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-55" class="post-55 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Extension Method Best Practices?</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/gregyoung/author/gregyoung/" title="View all posts by gregyoung">gregyoung</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/" title="6:37 am" rel="bookmark"><span class="entry-date">November 19, 2007</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/gregyoung/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/gregyoung/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/gregyoung/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>Interesting discussion that came up on the ALT.NET list. Many people simply say <i>don&#8217;t do that </i>but they have a time and place and should be weighed like any other architectural or API decision. While I find that many people will misuse this feature to extremes and code will quickly become unmaintainable I can understand the possible benefits of them (especially in the context of LINQ). </p>
<p>&nbsp;</p>
<p>So my #1 best practice for extension methods?</p>
<p><b>ALL extension methods should be [SIDE EFFECT FREE FUNCTIONS]</b></p>
<p>I wish that the C# compiler would enforce this rule to <b>not </b>let you create an extension method that was not side effect free but unfortunately this is not the case. Extension methods that change state are quite evil.</p>
<p>&nbsp;</p>
<p>What do you see as best practices?&nbsp;</p>
<p>&nbsp;</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/gregyoung/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/" title="Permalink to Extension Method Best Practices?" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/feed/" title="Comments RSS to Extension Method Best Practices?" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-55 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/gregyoung/2007/10/24/qcon-san-fransisco/" rel="prev"><span class="meta-nav">&larr;</span> QCon San Francisco</a></div>
					<div class="nav-next"><a href="http://codebetter.com/gregyoung/2007/11/21/spec-coming-soon-to-a-framework-near-you/" rel="next">Spec# coming soon to a framework near you? <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

							<div id="comments">


			<h3 id="comments-title">20 Responses to <em>Extension Method Best Practices?</em> </h3>


			<ol class="commentlist">
						<li class="comment even thread-even depth-1" id="li-comment-1908">
		<div id="comment-1908">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://ukobbwjh.com/' rel='external nofollow' class='url'>Qbmbnrub</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1908">July 14, 2009 at 2:27 pm</a></div>

		<div class="comment-body"><p>O8Iokc</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1907">
		<div id="comment-1907">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://payday-on-line.biz/' rel='external nofollow' class='url'>Marden</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1907">July 5, 2009 at 2:34 pm</a></div>

		<div class="comment-body"><p>Hi everyone. It is not enough to succeed. Others must fail. Help me! Looking for sites on: Payday loan. I found only this &#8211; <a href="http://www.stereoplex.com/Members/Flea">frontline Flea and tick</a>. About is your ultimate online destination for discovering the newest and best in style, shopping, and emerging trends from the runways to the streets. If an insect is affected it is unable to reproduce so drug resistant offspring should not be a problem. With best wishes <img src='http://codebetter.com/gregyoung/wp-includes/images/smilies/icon_sad.gif' alt=':-(' class='wp-smiley' /> , Marden from Luxembourg.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1906">
		<div id="comment-1906">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.stereoplex.com/Members/Flea' rel='external nofollow' class='url'>Rhiannon</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1906">July 4, 2009 at 10:20 pm</a></div>

		<div class="comment-body"><p>Hello everyone. Humor is also a way of saying something serious.<br />
I am from San and now teach English, tell me right I wrote the following sentence: &#8220;The flea is covered in mucus and keeps sliding.More pet owners are reporting what they believe to be harmful side effects from flea and tick treatments.&#8221;</p>
<p>Thank you so much for your future answers <img src='http://codebetter.com/gregyoung/wp-includes/images/smilies/icon_biggrin.gif' alt=':D' class='wp-smiley' /> .  Roscoe.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1905">
		<div id="comment-1905">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://lesbianvalley.net/' rel='external nofollow' class='url'>Trent</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1905">June 11, 2009 at 2:36 pm</a></div>

		<div class="comment-body"><p>Hi guys. By prizing heartfulness above faultlessness, we may reap more from our effort because we&#8217;re more likely to be changed by it. Help me! Looking for sites on: Teen Lesbian Photo. I found only this &#8211; <a href="http://lesbianvalley.net/">black lesbian</a>. Most emailed this week spend time with your kids, so peyton manning doesn. Goto page next have alot of lesbian movies to see though, that favorite lesbian movie &#8211; imagine me you. With best wishes :confused:, Trent from Antigua.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1904">
		<div id="comment-1904">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://genericflovent.info' rel='external nofollow' class='url'>Kitra</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1904">June 9, 2009 at 5:06 pm</a></div>

		<div class="comment-body"><p>Could you help me. After all it is those who have a deep and real inner life who are best able to deal with the irritating details of outer life.<br />
I am from Cambodia and , too, and now am writing in English, please tell me right I wrote the following sentence: &#8220;Your source of celebrity gossip, entertainment news and movie reviews crime drama once fallen, I also play an old lesbian in ed harris next movie.&#8221;</p>
<p>With best wishes 8), Kitra.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1903">
		<div id="comment-1903">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://genericzaditor.info' rel='external nofollow' class='url'>Lucinda</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1903">June 6, 2009 at 12:12 pm</a></div>

		<div class="comment-body"><p>Good Day. Good, fuck this webmaster, kiss my ass. Help me! Could you help me find sites on the: Anti-allergic. I found only this &#8211; [url=http://genericentocort.info]entocort for colitis[/url]. Has introduced a rx to otc switch product for allergic related rhinitis and skin problems, available from november. Agent allergic rhinitis anti asthmatic drugs already in use should not be withdrawn abruptly at the. Thanks for the help <img src='http://codebetter.com/gregyoung/wp-includes/images/smilies/icon_sad.gif' alt=':-(' class='wp-smiley' /> , Lucinda from Sudan.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1902">
		<div id="comment-1902">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Aaron</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1902">December 9, 2008 at 12:02 am</a></div>

		<div class="comment-body"><p>I have heard that extension methods are code obfuscation alot lately, but i have to disagree.</p>
<p>Say there is a method you wish to add to the DataTable, a method to count all cells. you can<br />
1) extend it<br />
2) add a method</p>
<p>Lets say we want to impress our friends and do it the &#8220;right&#8221; way. We go ahead a create a new class in inherit the DataTable.<br />
We take a class everyone knows and loves and transform it into a class no one knows anything about.  In actuality, everyone knows what 99% of this class does, they just don&#8217;t know they know it because it has been renamed.</p>
<p>Lets say we want reuseable code and to make it easy for others read. We decide to do it the &#8220;wrong&#8221; way.  We simply add an extension method. People fixing our code will see the datatable and know exactly what it does. When they see that our datatable has extra methods they can go look at the code for that method. They dont need to go through the entire class.</p>
<p>In short, DataTable.MyExtensionMethod() is far less obfuscated then UnknownClass.MyMethod()</p>
<p>I can&#8217;t wait for the Expando properties coming out in C# 4.0</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1901">
		<div id="comment-1901">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Hendry Luk</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1901">October 16, 2008 at 10:31 pm</a></div>

		<div class="comment-body"><p>I know it&#8217;s an old post, but I think this is a perfect place to ask this question.<br />
I always think we should avoid extension method in most situation. It is a bad thing the same way static method is bad thing.<br />
The biggest problem with ext method is that it shares the same problem with static method: testability.<br />
Probably the only way to mock away an extension method is by using typemock. Many mocking framework designers decide not to provide this bytecode magic feature in their products simply because any code that requires bytecode magic to be tested generally signifies bad code at first place.<br />
Perhaps with the emergence of ext method, this norm should change?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1900">
		<div id="comment-1900">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1900">November 21, 2007 at 5:00 pm</a></div>

		<div class="comment-body"><p>Kent I have seen *maybe* 1 use of extension methods that included mutable methods and was actually something that would survive for 10 seconds in a code review &#8230; It was making a fluent interface on objects that did not have one &#8230;. personally I think this should be done with a facade (and everything becomes more explicit/controlled) but I can understand the desire to do such things. I have not really seen any valid mutable extension methods &#8230;.  Since the main use of extension methods is also within what is for all intensive purposes functional code it seems to me a good idea to follow well established functional behaviors.</p>
<p>Cheers,</p>
<p>Greg</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1899">
		<div id="comment-1899">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://devlicio.us/blogs/derik_whittaker/default.aspx' rel='external nofollow' class='url'>Derik Whittaker</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1899">November 21, 2007 at 2:05 pm</a></div>

		<div class="comment-body"><p>Great post&#8230;. my thoughts exactly.  I believe that extensions will be grossly over used.</p>
<p>Give a man a hammer, everything becomes a nail.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1898">
		<div id="comment-1898">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://kentb.blogspot.com' rel='external nofollow' class='url'>Kent Boogaart</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1898">November 21, 2007 at 9:14 am</a></div>

		<div class="comment-body"><p>So you&#8217;re saying if there&#8217;s a mutable type with instance methods that perform mutations, if I add an extension method I should do things in an immutable fashion anyway? That sounds crazy to me. Callers of the APIs shouldn&#8217;t be able to differentiate between instance / extension method calls &#8211; that&#8217;s kind of the point of them. Yes, extension methods will be abused by some, but what tool isn&#8217;t?</p>
<p>+1 for spec# / C# convergence!</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1897">
		<div id="comment-1897">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1897">November 20, 2007 at 8:32 pm</a></div>

		<div class="comment-body"><p>Peter.</p>
<p>Welcome to the group of us who hope spec# makes it into 4.0 <img src='http://codebetter.com/gregyoung/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1896">
		<div id="comment-1896">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://www.peterRitchie.com/blog' rel='external nofollow' class='url'>Peter Ritchie</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1896">November 20, 2007 at 8:29 pm</a></div>

		<div class="comment-body"><p>I would agree.  I believe there&#8217;s benefit to mandating that class state be immutable (I&#8217;m sure I&#8217;ve seen this before but I can&#8217;t find reference to it) so it&#8217;s not much of a stretch to expect static methods (including extension methods) treat the objects they accept as parameters (or extend) as immutable.</p>
<p>Extension methods are &#8220;special&#8221; all-around, and I think they have the propensity to make the programmer forget they&#8217;re working with a static method as well as forgetting about good OO design.</p>
<p>It is very unfortunate that you can&#8217;t inject design attributes of a class into its declaration (like declaring that a class is immutable and therefore generate compile warnings on code that does modify state) and I really hope that ability is added to C# 4 (should that ever exist) and also include the ability to declare immutable static classes or immutable static state.  Although, I don&#8217;t think this would introduce anything to avoid writing side-effect free extension methods&#8230;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1895">
		<div id="comment-1895">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Greg</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1895">November 20, 2007 at 6:38 pm</a></div>

		<div class="comment-body"><p>A side effect free function is one that does not change the state of the object it is called on &#8230; it can however return me a new object. A great (and silly) example of a side effect free function would be &#8230;</p>
<p>DateTime ThirtyDaysFromNow(DateTime Date) {<br />
    return Date.AddDays(30);<br />
}</p>
<p>I think that no extension method should ever try to change the state of the object its working on &#8230; if it wants to do such a state transition it should be returning me a new object (leaving my original object in its original state) &#8230;</p>
<p>This is a very common pattern in functional programming and the places where extension methods have the most use is in functional situations (linq)&#8230;</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1894">
		<div id="comment-1894">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">Tinco</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1894">November 19, 2007 at 5:12 pm</a></div>

		<div class="comment-body"><p>Hey Greg, what state? And why is it bad? Your blog post is a bit too short <img src='http://codebetter.com/gregyoung/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1893">
		<div id="comment-1893">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://blog.magenic.com/blogs/aarone' rel='external nofollow' class='url'>Aaron Erickson</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1893">November 19, 2007 at 2:52 pm</a></div>

		<div class="comment-body"><p>But the bug question is&#8230; why?  Extension methods can only hit public properties/metods.  So if an extension method changes an object via it&#8217;s public properties, hows that different than something else that changes an object through it&#8217;s public properties?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1892">
		<div id="comment-1892">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://grabbagoft.blogspot.com/' rel='external nofollow' class='url'>Jimmy Bogard</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1892">November 19, 2007 at 2:40 pm</a></div>

		<div class="comment-body"><p>Put them in a namespace such that the client has to &#8220;opt-in&#8221; to the extension methods.  The namespace should only contain the extension method classes and any other classes used by the extension methods.  For example, don&#8217;t put your favorite &#8220;System.String&#8221; extension methods (.ToAlternatingCase) in the &#8220;System&#8221; namespace, put it in &#8220;System.String.Extensions&#8221; or something similar.</p>
<p>The namespace should be explicit to both the user writing the code and the user reading the code 6 months later exactly what extensions are being brought in simply by looking at the using statements.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1891">
		<div id="comment-1891">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn">sergiopereira</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1891">November 19, 2007 at 2:17 pm</a></div>

		<div class="comment-body"><p>What kinds of side effects are you suggesting to prohibit? Would you consider changing the target a side-effect?</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment even thread-even depth-1" id="li-comment-1890">
		<div id="comment-1890">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://kentb.blogspot.com' rel='external nofollow' class='url'>Kent Boogaart</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1890">November 19, 2007 at 12:50 pm</a></div>

		<div class="comment-body"><p>#1 rule: avoid is possible. Use existing OO techniques to extend types if possible. Extension methods == last resort.<br />
#2 rule: just like any other code, look for reuse. See if there&#8217;s an existing standard library of extension methods that solves your problem.</p>
<p>One interesting use of extension methods is the one I mention here: <a href="http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2412567&#038;SiteID=1" rel="nofollow">http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=2412567&#038;SiteID=1</a>. That is, use extension methods to extend enums for purposes such as converting to strings for the UI. However, in the WPF world I would simply use a converter or data template scoped at the application level. It would make more sense for methods unrelated to UI.</p>
<p>PS. Change state of what? The extension target object? Or global state? The former I don&#8217;t see a problem with. The latter makes me shudder.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1889">
		<div id="comment-1889">
		<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/ad516503a11cd5ca435acc9bb6523536?s=40' class='avatar avatar-40 photo avatar-default' height='40' width='40' />			<cite class="fn"><a href='http://dev.net.ua/blogs/mikechaliy' rel='external nofollow' class='url'>Mike Chaliy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="http://codebetter.com/gregyoung/2007/11/19/extension-method-best-practices/#comment-1889">November 19, 2007 at 8:57 am</a></div>

		<div class="comment-body"><p>Most valued one</p>
<p>Not to use extension methods at all.</p>
<p>This hack can be needed for API designers. But this is no point to have extension methods in regular code.</p>
</div>

		<div class="reply">
					</div>
	</div>

	</li>
			</ol>



								<div id="respond">
				<h3 id="reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/gregyoung/2007/11/19/extension-method-best-practices/#respond" style="display:none;">Cancel reply</a></small></h3>
									<p class="must-log-in">You must be <a href="http://codebetter.com/gregyoung/wp-login.php?redirect_to=http%3A%2F%2Fcodebetter.com%2Fgregyoung%2F2007%2F11%2F19%2Fextension-method-best-practices%2F">logged in</a> to post a comment.</p>												</div><!-- #respond -->
						
</div><!-- #comments -->

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter//third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.251 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-24 20:40:53 -->
<!-- super cache -->