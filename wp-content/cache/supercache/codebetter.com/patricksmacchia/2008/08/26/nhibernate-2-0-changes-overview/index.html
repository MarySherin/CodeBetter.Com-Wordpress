<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>NHibernate 2.0: Changes Overview | Patrick Smacchia</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/patricksmacchia/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/patricksmacchia/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/patricksmacchia/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/patricksmacchia/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/patricksmacchia/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Patrick Smacchia' href='http://codebetter.com/patricksmacchia/' />
<link rel='start' title='Benefit from the C# and VB.NET compilers perf' href='http://codebetter.com/patricksmacchia/2007/06/20/benefit-from-the-c-and-vb-net-compilers-perf/' />
<link rel='prev' title='Source Files Rebasing' href='http://codebetter.com/patricksmacchia/2008/08/21/source-files-rebasing/' />
<link rel='next' title='A frustrating GDI bug' href='http://codebetter.com/patricksmacchia/2008/09/03/a-frustrating-gdi-bug/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/patricksmacchia/2008/08/26/nhibernate-2-0-changes-overview/' />
<link rel='shortlink' href='http://codebetter.com/patricksmacchia/?p=69' />
<link rel="stylesheet" href="http://codebetter.com/patricksmacchia/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/codebetter/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/patricksmacchia/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-69" class="post-69 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">NHibernate 2.0: Changes Overview</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/patricksmacchia/author/patricksmacchia/" title="View all posts by patricksmacchia">patricksmacchia</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/patricksmacchia/2008/08/26/nhibernate-2-0-changes-overview/" title="3:06 pm" rel="bookmark"><span class="entry-date">August 26, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/patricksmacchia/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/patricksmacchia/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/patricksmacchia/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>My post <a href="/blogs/patricksmacchia/archive/2008/08/13/net-3-5-sp1-changes-overview.aspx" target="_blank">.NET Framework 3.5 SP1: Changes Overview</a> on analysis evolution, structure and quality of the .NET framework code base with <a href="http://www.NDepend.com" target="_blank">NDepend</a> became popular. It shows the interest of the community for the <i>under the hood</i> of popular Fx. Thus came the idea of publishing a similar post for the new release of <a href="https://sourceforge.net/project/showfiles.php?group_id=73818&amp;package_id=73969" target="_blank">NHibernate 2.0</a>. This post <a href="http://blog.domaindotnet.com/2008/08/24/nhibernate-20-gold-released-must-wait-for-linq-to-nhibernate/" target="_blank">NHibernate 2.0 Gold Release</a> analysis <i>NHibernate 2.0 </i>with <i>NDepend </i>and lists breaking functional changes, while I&#8217;ll focus more on structural changes.</p>
<p>&nbsp;</p>
<p><b><span style="font-size: 16pt;line-height: 115%;font-family: 'Calibri','sans-serif'">Changes Overview (compared to NHibernate v1.2.1)</span></b></p>
<p># IL instructions&nbsp;&nbsp;&nbsp; <b>176 818 </b>to <b>245 106</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+68 288&nbsp;&nbsp; +38.6%)<br /># lines of code (LOC)&nbsp;&nbsp;&nbsp; <b>25 960 </b>to <b>36 143</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+10 183&nbsp;&nbsp; +39.2%)<br /># lines of comment&nbsp;&nbsp;&nbsp; <b>25 135 </b>to <b>29 401</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+4 266&nbsp;&nbsp; +17%)<br />Percentage Comment&nbsp;&nbsp;&nbsp; <b>49% </b>to <b>44%</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (-5%)<br /># Assemblies&nbsp;&nbsp;&nbsp; 1<br /># Namespaces&nbsp;&nbsp;&nbsp; <b>46 </b>to <b>65</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+19&nbsp;&nbsp; +41.3%)<br /># Types&nbsp;&nbsp;&nbsp; <b>806 </b>to <b>1 262</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+456&nbsp;&nbsp; +56.6%)<br /># Methods&nbsp;&nbsp;&nbsp;<b> 8 190 </b>to <b>12 016</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+3 826&nbsp;&nbsp; +46.7%)<br /># Fields&nbsp;&nbsp;&nbsp; <b>2 166 to 3 842</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+1 676&nbsp;&nbsp; +77.4%)</p>
<p>&nbsp;</p>
<p><span lang="EN-US"></span>
</p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/PublicMethodsAdded.zip" target="_blank">4.852 new<br />
public methods</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/PublicMethodsAdded.zip" target="_blank">: <span>&nbsp;</span></a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">METHODS</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">IsPublic</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">AND</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Was</span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Added</span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/PublicTypesAdded.zip" target="_blank">548 new<br />
public types</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/PublicTypesAdded.zip" target="_blank">: <span>&nbsp;</span></a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">TYPES</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">IsPublic</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">AND</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Was</span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Added</span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/NamespacesAdded.zip" target="_blank">21 new mamespaces</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/NamespacesAdded.zip" target="_blank">: <span>&nbsp;</span></a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">NAMESPACES</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Was</span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Added</span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/NamespacesRemoved.zip" target="_blank">2 namespaces removed</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/NamespacesRemoved.zip" target="_blank">: <span>&nbsp;</span></a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">NAMESPACES</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Was</span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">Removed</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US"></span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US"></span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/PublicTypesRemoved.zip" target="_blank">127 public types removed</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/PublicTypesRemoved.zip" target="_blank">: <span>&nbsp;</span></a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">TYPES</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">IsPublic</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">AND</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">WasRemoved</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US"></span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US"></span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><a href="/blogs/patricksmacchia/NHibernate2/MethodsThatBecamePublic.zip">5 non-public methods became public:&nbsp;</a></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">METHODS</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">IsPublic</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US">AND</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">VisibilityWasChanged</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"></span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue" lang="EN-US"> AND </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US">IsInNewerBuild</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black" lang="EN-US"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064" lang="EN-US"></span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/MethodsWhereCodeWasChanged.zip" target="_blank">1.230 methods<br />
where code was changed</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/MethodsWhereCodeWasChanged.zip" target="_blank">:&nbsp;</a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue">METHODS</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064">CodeWasChanged</span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064"></span></p>
<p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p>
<p class="MsoNormal"><span lang="EN-US"><a href="/blogs/patricksmacchia/NHibernate2/TypesWhereCodeWasChanged.zip" target="_blank">380 types<br />
where code was changed</a><a href="http://codebetter.com/blogs/patricksmacchia/NHibernate2/TypesWhereCodeWasChanged.zip" target="_blank">:&nbsp;</a><br />
</span></p>
<p class="MsoNormal"><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue">SELECT</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue">TYPES</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: blue">WHERE</span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: black"> </span><span style="background: white none repeat scroll 0% 50%;font-size: 10pt;font-family: 'Courier New';color: #000064">CodeWasChanged</span><span style="font-size: 10pt;font-family: 'Courier New';color: #000064"></span></p>
<p class="MsoNormal"><b><span lang="EN-US">&nbsp;</span></b></p>
<p class="MsoNormal">The following treemap/metric view shows the impact of methods changes or added (in blue). It clearly looks like that the entire code base has been refactored:</p>
<p class="MsoNormal"><img src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia/NHibernate2/MetricView.jpg?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919992094&amp;Signature=GvDHqO8Ycy6966yuWTS4zoG1QHM%3d" />&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><b><span style="font-size: 16pt;line-height: 115%">Assembly dependencies</span></b></p>
<p class="MsoNormal">The assembly structure hasn&#8217;t changed. The <i>NHibernate </i>code is still packaged within one assembly named <i>NHibernate.dll</i>, and this is IMHO the best possible choice since there is no reason to have several physical components for the <i>NHibernate </i>Fx.</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><i>NHibernate.dll </i>is almost using the same set assemblies: <i>Castle.Core.dll v1.0.3.0</i> has been added and also <i>Castle.DynamicProxy2.dll v2.0.3.0</i> is used in lieu of <i>Castle.DynamicProxy.dll v1.1.5.0.</i> Here is the simple graph of assemblies dependencies.</p>
<p class="MsoNormal"><img src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia/NHibernate2/NHibernate2AssembliesDiagram.jpg?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919992094&amp;Signature=1EHDmv8coiX0apzDvyvJSrvTKOk%3d" /></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><b><span style="font-size: 16pt;line-height: 115%">Internal namespaces dependencies</span></b></p>
<p class="MsoNormal"><span lang="EN-US">As noted by <i>Jim Bolla </i>a few months ago in his post <a href="http://devlicio.us/blogs/jim_bolla/archive/2007/12/01/Analyzing-NHibernate.dll-with-NDepend.aspx" target="_blank">Analyzing NHibernate with NDepend</a>, the <i>NHibernate </i>code is quite entangled and unfortunately this problem hasn&#8217;t been fixed for <i>NHibernate v2.0</i>. Basically, on 65 namespaces, 63 namespaces depend directly or indirectly on 62 other namespaces. This is what is shown by the big black square in the dependencies matrix below, taken with the indirect dependencies option of <i>NDepend</i>. A black cell means that the 2 corresponding namespaces are involved in a dependency cycle of minimal length the number displayed. </span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><span lang="EN-US">IMHO, the <i>NHibernate </i>team should fix this problem asap. This article <a href="http://www.theserverside.net/tt/articles/showarticle.tss?id=ControllingDependencies" target="_blank">Controlling Dependencies to get Clear Architecture</a> explains how we get rid for good of <i>spaghetti </i>in the <i>NDepend </i>code base within in a few days, about 2 years ago. Retrospectively, I estimate that this is by far the best <i>Return On Investment</i> on quality we ever done, much better that any of the thousands automatic tests we wrote. As explained in the article, we now use some <i>NDepend </i>capabilities to prevent new cycle to appear.<br /></span></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><a href="/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia.NHibernate2/DependencyMatrixSnapshotIndirect.jpg" target="_blank"><img src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia/NHibernate2/DependencyMatrixSnapshotIndirectSmall.jpg?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919992094&amp;Signature=3MrLgEvTGNLWj8NKT0iLuRjlsnQ%3d" /></a></p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">The picture below shows direct dependencies between namespaces of <i>NHibernate</i>. The legend is:</p>
<ol>
<li>A blue cell means: {<i>the X Namespace</i>} is using {<i>the Y </i><i>Namespace</i>}.</li>
<li>Weight of a blue cell means: W members (methods and fields) of the <i>{the X </i><i>Namespace</i>} are used by {<i>the Y </i><i>Namespace</i>}.</li>
<li>A green cell means: {<i>the Y </i><i>Namespace</i>} is used by {<i>the X </i><i>Namespace</i>}.</li>
<li>Weight of a green cell means: W methods of the {<i>the Y </i><i>Namespace</i>} are using {<i>the X </i><i>Namespace</i>}.</li>
<li>A black cell means: {<i>the X </i><i>Namespace</i>} and {<i>the Y </i><i>Namespace</i>} are using each others.</li>
<li>A red tick on a cell means: the coupling has been changed.</li>
<li>A red tick with a plus on a cell means: the dependency has been created.</li>
<li>A red tick with a minus on a cell means: the dependency has been removed.</li>
<li>A <i>Namespace </i>name underlined means that its code has been changed.</li>
<li>A <i>Namespace </i>name in bold means that it has been added.</li>
</ol>
<p class="MsoNormal"><b><a href="/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia.NHibernate2/DependencyMatrixSnapshotDirect.jpg" target="_blank"><img src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/patricksmacchia/NHibernate2/DependencyMatrixSnapshotDirectSmall.jpg?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919992094&amp;Signature=UZX8B1%2bpBHdcuInLkfnPmt%2fFjvM%3d" /></a></b> </p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><b><span style="font-size: 16pt;line-height: 115%">Code quality<br /></span></b></p>
<p class="MsoNormal"><span lang="EN-US">According to the following CQL rules, <a href="/blogs/patricksmacchia/NHibernate2/MethodToRefactor.zip" target="_blank">464 methods</a> are good candidate to be refactored because they each violates one of the metric threshold.<br /></span></p>
<pre style="background: #f6f6f6 none repeat scroll 0% 50%"><span style="color: #008000">//&nbsp;&lt;Name&gt;</span><b>Quick&nbsp;summary&nbsp;of&nbsp;methods&nbsp;to&nbsp;refactor</b><span style="color: #008000">&lt;/Name&gt;</span><span style="color: #000000"></span><span style="color: #0000ff">WARN</span>&nbsp;<span style="color: #0000ff">IF</span>&nbsp;<span style="color: #000064">Count</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>0</b>&nbsp;<span style="color: #0000ff">IN</span>&nbsp;<span style="color: #0000ff">SELECT</span>&nbsp;<span style="color: #0000ff">METHODS</span>&nbsp;<span style="color: #0000ff">WHERE</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;Metrics'&nbsp;definitions</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000000">(</span><span style="color: #000000">&nbsp;&nbsp;</span><span style="color: #000064">NbLinesOfCode</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>30</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#NbLinesOfCode" target="_blank">http://www.ndepend.com/Metrics.aspx#NbLinesOfCode</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">NbILInstructions</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>200</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#NbILInstructions" target="_blank">http://www.ndepend.com/Metrics.aspx#NbILInstructions</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">CyclomaticComplexity</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>20</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#CC" target="_blank">http://www.ndepend.com/Metrics.aspx#CC</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">ILCyclomaticComplexity</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>50</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#ILCC" target="_blank">http://www.ndepend.com/Metrics.aspx#ILCC</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">ILNestingDepth</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>4</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#ILNestingDepth" target="_blank">http://www.ndepend.com/Metrics.aspx#ILNestingDepth</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">NbParameters</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>5</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#NbParameters" target="_blank">http://www.ndepend.com/Metrics.aspx#NbParameters</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">NbVariables</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>8</b>&nbsp;<span style="color: #0000ff">OR</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#NbVariables" target="_blank">http://www.ndepend.com/Metrics.aspx#NbVariables</a></span><span style="color: #008000"></span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #000064">NbOverloads</span>&nbsp;<span style="color: #000000">&gt;</span>&nbsp;<b>6</b>&nbsp;<span style="color: #000000">)</span><span style="color: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008000">//&nbsp;</span><span style="color: #008000"><a href="http://www.ndepend.com/Metrics.aspx#NbOverloads" target="_blank">http://www.ndepend.com/Metrics.aspx#NbOverloads</a></span></pre>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">This stance on metrics is a bit extremist and honestly, we have a bunch of methods in the <i>NDepend </i>code base that still don&#8217;t abide by all these thresholds. While abiding by metric threshold helps a lot to have maintainable code, my opinion is that quality effort must be focused first on rationalizing componentization and dependencies, with non-cyclic dependencies between components, low <a href="http://www.ndepend.com/Metrics.aspx#Level" target="_blank">level</a> components and <i>logical component</i> (namespaces) instead of <i>physical components</i> (assemblies).</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">However, there is a fundamental metric not represented here: <a href="http://www.ndepend.com/Metrics.aspx#PercentageCoverage" target="_blank"><i>Test Coverage</i></a>. I tried to gather Test Coverage metrics for <i>NHibernate 2.0</i> to make this data analyzed by <i>NDepend</i>. Unfortunately just running the <i>NHibernate.Test-2.0</i> project with the option <i>Run Test(s)</i> of <i>TestDriven.NET</i> lead to: <i>427 passed, 755 failed, 14 skipped, took 3738,55 seconds</i>. I suspect I don&#8217;t have all DB stuff installed (I am not really a DB guy) and am a bit lazy to go thought all the operation to make it work. (Btw, any code coverage file produced by <i>NCover </i>or <i>VSTS Coverage</i> on <i>NHibernate 2.0</i> is welcome, just send it with <a href="http://www.transferbigfiles.com/" target="_blank">http://www.transferbigfiles.com/</a> and let me know the url where I can download it. My email is psmacchia at google mail. This way I could complete this post with obtained results).</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal"><b><span style="font-size: 16pt;line-height: 115%">Conclusion</span></b> </p>
<p class="MsoNormal">This awesome release of <i>NHibernate</i> is the result of a lot of work done by extremely talented guys. As said, I am not a DB guy, I cannot appreciate the real value of this framework. However, googling it a few seconds lets find dozens of thousands of enthusiast users.</p>
<p class="MsoNormal">&nbsp;</p>
<p class="MsoNormal">This post focuses on structure, quality and evolution and thanks to <i>NDepend </i>capabilities<i>, </i>I find some good things but also some important room for improvement (IMHO) within a few minutes that I wanted to share.</p>
<p class="MsoNormal"><b><span style="font-size: 16pt;line-height: 115%"></span></b></p>
<p>&nbsp;</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/patricksmacchia/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/patricksmacchia/2008/08/26/nhibernate-2-0-changes-overview/" title="Permalink to NHibernate 2.0: Changes Overview" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/patricksmacchia/2008/08/26/nhibernate-2-0-changes-overview/feed/" title="Comments RSS to NHibernate 2.0: Changes Overview" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-69 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/patricksmacchia/2008/08/21/source-files-rebasing/" rel="prev"><span class="meta-nav">&larr;</span> Source Files Rebasing</a></div>
					<div class="nav-next"><a href="http://codebetter.com/patricksmacchia/2008/09/03/a-frustrating-gdi-bug/" rel="next">A frustrating GDI bug <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-402">
					<div id="dsq-comment-header-402" class="dsq-comment-header">
						<cite id="dsq-cite-402">
	http://primedigit.com/							<span id="dsq-author-user-402">Will Shaver</span>
							</cite>
					</div>
					<div id="dsq-comment-body-402" class="dsq-comment-body">
						<div id="dsq-comment-message-402" class="dsq-comment-message"><p>One of the difficulties in developing features for NHibernate and with performing code cleanups is the desire to keep it somewhat in sync with it&#8217;s older brother Hibernate. There&#8217;s a constant and necessary struggle between wanting to improve the core and wanting to keep it as true to Hibernate as possible. While I haven&#8217;t tried to reduce related complexities I imagine it would cause a rather large deviation from Hibernate. Perhaps we can try and get Hibernate to refactor some and then can use those changes as well. </p>
<p>This information is quite interesting. Thanks for providing it.</p>
<p> -Will (Just barely a nhibernate developer.)</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-403">
					<div id="dsq-comment-header-403" class="dsq-comment-header">
						<cite id="dsq-cite-403">
	http://www.NDepend.com							<span id="dsq-author-user-403">Patrick Smacchia</span>
							</cite>
					</div>
					<div id="dsq-comment-body-403" class="dsq-comment-body">
						<div id="dsq-comment-message-403" class="dsq-comment-message"><p>Will, I indeed just got this feedback from some others NHibernate developers. </p>
<p>I hope that your team and the Hibernate team will find a way to improve the overall architecture because with such entangling, it must not be fun everyday to develop it.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-404">
					<div id="dsq-comment-header-404" class="dsq-comment-header">
						<cite id="dsq-cite-404">
	http://www.codinginstinct.com							<span id="dsq-author-user-404">Torkel</span>
							</cite>
					</div>
					<div id="dsq-comment-body-404" class="dsq-comment-body">
						<div id="dsq-comment-message-404" class="dsq-comment-message"><p>This was really interesting, very useful to see detailed stats on changes in assembly versions. </p>
<p>I have studied the nhibernate source and find it very nicely structured and coded, there are of course many ways it could be improved. Stats like this is a really good starting point <img src='http://codebetter.com/patricksmacchia/wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> </p>
</div>
					</div>
				</li>
					<li id="dsq-comment-405">
					<div id="dsq-comment-header-405" class="dsq-comment-header">
						<cite id="dsq-cite-405">
	http://blog.domaindotnet.com							<span id="dsq-author-user-405">Damon Wilder Carr</span>
							</cite>
					</div>
					<div id="dsq-comment-body-405" class="dsq-comment-body">
						<div id="dsq-comment-message-405" class="dsq-comment-message"><p>As always fantastic. Indeed your SP1 post subconsciously &#8216;gave us permission&#8217; to add the NDepend analysis. </p>
<p>It just happened, we didn&#8217;t even think about it to be honest. </p>
<p>We had done this analysis from the earliest bits of the alpha and like most software we use/construct/care about, these artifacts are expected, not optional for us.</p>
<p>CANNOT WAIT for the new version of NDepend. </p>
<p>Actually I am sure you have thought of this, but any plans for &#8216;Linq to CQL&#8217;? That would be utterly awesome&#8230;.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-406">
					<div id="dsq-comment-header-406" class="dsq-comment-header">
						<cite id="dsq-cite-406">
								<span id="dsq-author-user-406">Brian Johnston</span>
							</cite>
					</div>
					<div id="dsq-comment-body-406" class="dsq-comment-body">
						<div id="dsq-comment-message-406" class="dsq-comment-message"><p>This is good information.  Thank-you for doing this.</p>
<p>It does concern me that a framework traditionally used hand in hand with other frameworks to help reduce dependencies (Google &#8216;NHibernate&#8217; and &#8216;Dependency Injection&#8217; to see what I mean) has so many cross dependencies itself &#8211; not good advertisement in my mind.</p>
<p>I think this shows the problem we all face when writing software &#8211; when is it time to cut the cord to the past and do a true &#8216;new&#8217; version?  By trying to encompass all things, we fall apart at the seams in many cases, so sometimes the best thing to do is limit what we try to do and not fall into the jack of all trades, master of none in the &#8216;code&#8217; sense of the saying. </p>
<p>We all know NHibernate is powerful in the hands of the right developer who knows how to utilize it correctly, but perhaps a rewrite and decoupling of the past would result in a better framework.</p>
<p>Just my opinion.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-407">
					<div id="dsq-comment-header-407" class="dsq-comment-header">
						<cite id="dsq-cite-407">
								<span id="dsq-author-user-407">Brian Johnston</span>
							</cite>
					</div>
					<div id="dsq-comment-body-407" class="dsq-comment-body">
						<div id="dsq-comment-message-407" class="dsq-comment-message"><p>Is that 3738.55 seconds to run unit tests (1 hour, 2 minutes) a typo or am I doing my math wrong?   That can&#8217;t be right.</p>
<p>Seems extremely excessive for what appears to be only about 1200 tests if I did my addition right (427 passed, 755 failed, 14 skipped)</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-408">
					<div id="dsq-comment-header-408" class="dsq-comment-header">
						<cite id="dsq-cite-408">
	http://www.NDepend.com							<span id="dsq-author-user-408">Patrick Smacchia</span>
							</cite>
					</div>
					<div id="dsq-comment-body-408" class="dsq-comment-body">
						<div id="dsq-comment-message-408" class="dsq-comment-message"><p>Brian, yes more than one hour, no typo problem, I think that tests tried and tried to create unsuccessfully some DB, but that is my own theory.</p>
<p>Damon, yes there are many (many) things in the pipe but cannot talk about it so far.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-409">
					<div id="dsq-comment-header-409" class="dsq-comment-header">
						<cite id="dsq-cite-409">
								<span id="dsq-author-user-409">Tuna Toksoz</span>
							</cite>
					</div>
					<div id="dsq-comment-body-409" class="dsq-comment-body">
						<div id="dsq-comment-message-409" class="dsq-comment-message"><p>Patrick, you need to create a database named nhibernate. IThen rerun the test again. It took<br />
3 mins 50 secs 58 msecs  to run all the tests in the trunk(and I assume it will take less for the release) and I had 1407 passed 5 failed 38 ignored. 5 failing tests were dialect issues complaining This fixture applies to Firebird, etc.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-410">
					<div id="dsq-comment-header-410" class="dsq-comment-header">
						<cite id="dsq-cite-410">
								<span id="dsq-author-user-410">Jack</span>
							</cite>
					</div>
					<div id="dsq-comment-body-410" class="dsq-comment-body">
						<div id="dsq-comment-message-410" class="dsq-comment-message"><p>WTF???? Why is there a dependency on System.Data.OracleClient?????</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-411">
					<div id="dsq-comment-header-411" class="dsq-comment-header">
						<cite id="dsq-cite-411">
								<span id="dsq-author-user-411">Patrick Smacchia</span>
							</cite>
					</div>
					<div id="dsq-comment-body-411" class="dsq-comment-body">
						<div id="dsq-comment-message-411" class="dsq-comment-message"><p>Jack, after verification:</p>
<p>the method<br />
NHibernate.Driver.OracleClientDriver.CreateConnection()<br />
creates a<br />
System.Data.OracleClient.OracleConnection..ctor()</p>
<p>and the method<br />
NHibernate.Driver.OracleClientDriver.CreateCommand()<br />
creates a<br />
System.Data.OracleClient.OracleCommand..ctor()</p>
<p>hence the dependency on System.Data.OracleClient.</p>
<p>With your &#8216;WTF&#8217; you point exactly why a tool such as NDepend is essential: the code base structure is often different than what we think it is.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-412">
					<div id="dsq-comment-header-412" class="dsq-comment-header">
						<cite id="dsq-cite-412">
								<span id="dsq-author-user-412">Fabio Maulo</span>
							</cite>
					</div>
					<div id="dsq-comment-body-412" class="dsq-comment-body">
						<div id="dsq-comment-message-412" class="dsq-comment-message"><p>@Patrick<br />
Analyze dependency from classes included inside .NET FW is not necessary and less when you are talking about dialects because all dialects can be extracted from code-base without any problems.</p>
<p>Compare NH1.2 with NH2.0 is unnecessary if you know the history of NH. NH2.0 was a big work and many classes was completely rewritten.</p>
<p>Dependency from castle: 4 hours to remove it completely.</p>
<p>I don&#8217;t understand if your effort is oriented to have a better NH or to publicize NDepend using NH. If you have a patch to remove some &#8220;dependency&#8221; remember that we are happy to analyze your proposals.</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/patricksmacchia/2008/08/26/nhibernate-2-0-changes-overview/ ';
	var disqus_identifier = '69 /blogs/patricksmacchia/archive/2008/08/26/nhibernate-2-0-changes-overview.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'codebetter';
	var disqus_title = "NHibernate 2.0: Changes Overview";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=69');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/patricksmacchia/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/patricksmacchia\/2008\/08\/26\/nhibernate-2-0-changes-overview\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.694 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-26 19:04:19 -->
<!-- super cache -->