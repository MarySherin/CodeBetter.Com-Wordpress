<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Side Effects and Functional Programming | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/matthewpodwysocki/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/matthewpodwysocki/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Matthew Podwysocki' href='http://codebetter.com/matthewpodwysocki/' />
<link rel='start' title='let Matt = CodeBetter + 1' href='http://codebetter.com/matthewpodwysocki/2008/04/24/let-matt-codebetter-1/' />
<link rel='prev' title='Object Oriented F# &#8211; Extension Everything' href='http://codebetter.com/matthewpodwysocki/2008/09/10/object-oriented-f-extension-everything/' />
<link rel='next' title='Object Oriented F# &#8211; More Extension Everything' href='http://codebetter.com/matthewpodwysocki/2008/09/13/object-oriented-f-more-extension-everything/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/matthewpodwysocki/2008/09/12/side-effects-and-functional-programming/' />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=54' />
<link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/matthewpodwysocki/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-54" class="post-54 post type-post status-publish format-standard hentry category-uncategorized">
					<h1 class="entry-title">Side Effects and Functional Programming</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by matthewpodwysocki">matthewpodwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2008/09/12/side-effects-and-functional-programming/" title="10:58 pm" rel="bookmark"><span class="entry-date">September 12, 2008</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/matthewpodwysocki/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>One of my <a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2008/04/30/side-effecting-functions-are-code-smells.aspx">first posts at CodeBetter</a> was in regards to side effects and how, when unmanaged, can be truly evil.&#160; Today, I want to revisit that topic briefly in regards to functional programming and managing side effects.&#160; When I was out in Redmond a couple of months ago, I had the opportunity to sit down with Erik Meijer to discuss functional programming among other topics.&#160; In there, we discussed a number of issues around managing side effects and state in your code, and how both C# and F# don&#8217;t intrinsically support such a concept.&#160; Languages like Haskell, of course do with IO monads and other such monadic structures.&#160; Whether languages such as F# and Erlang are not pure functional programming languages is another matter, due to the fact that you don&#8217;t have to declare when you are side effecting (reading a database, writing to console, spawning a process, etc).&#160; </p>
<p>Erik will be giving a talk at JAOO about <a href="http://jaoo.dk/presentation/Why+Functional+Programming+%28Still%29+Matters">why functional programming still matters</a>.&#160; I think in the day and age of where Moore&#8217;s law is changing, we need to recognize that functional programming has a unique place in this due to the way that it handles both purity and immutability.&#160; Today, let&#8217;s cover some of those issues when dealing with functional constructs and side effects to see what kind of an impact they can have on us.</p>
<p> <br />
<h2>The Problem of Purity</h2>
<p>In some previous posts, I talked about <a href="http://en.wikipedia.org/wiki/Pure_function">function purity</a> in regards to things you should keep in mind with a functional mindset.&#160; In order to qualify as such, you need to meet the following criteria:</p>
<ul>
<li>Evaluate with the same result given the same input, and perform no state change. </li>
<li>Evaluation of the given function does not cause observable side effects (write to console, write to database, etc) </li>
</ul>
<p> 
<p>Things get even more clouded as we bring lazy evaluation to the table.&#160; One of the great things that came to C# in 2.0 and especially in 3.0 with LINQ was the idea of lazy evaluation through the yield keyword.&#160; This gave us the ability to defer work until it was absolutely needed.&#160; That&#8217;s one of the hallmarks of functional programming, especially a lazy language such as Haskell.</p>
<p>Let&#8217;s look at a code snippet both written in F# and the equivalent in C# and let&#8217;s determine the order of side effects.&#160; Can they be predicted here?&#160; When do the side effects happen?&#160; Do I just get a nice list of my integers at the end?</p>
<p> <strong><u>F#</u></strong>   <br /> 
<div style="font-family: courier new"><span style="color: blue">#light</span>     </p>
<p><span style="color: blue">let</span> divisible_by_two n =&#160; <br />&#160; printf <span style="color: maroon">&quot;%i divisible by two?&quot;</span> n     <br />&#160; n % <span style="color: maroon">2</span> = <span style="color: maroon">0</span>     </p>
<p><span style="color: blue">let</span> divisible_by_three n =     <br />&#160; printf <span style="color: maroon">&quot;%i divisible by three?&quot;</span> n     <br />&#160; n % <span style="color: maroon">3</span> = <span style="color: maroon">0</span>     <br />&#160;&#160; <br /><span style="color: blue">let</span> c1 = <span style="color: blue">{</span><span style="color: maroon">1</span>&#160;<span style="color: blue">.</span><span style="color: blue">.</span>&#160;<span style="color: maroon">100</span><span style="color: blue">}</span>&#160;<span style="color: blue">|</span>&gt; Seq<span style="color: blue">.</span>filter divisible_by_two     <br /><span style="color: blue">let</span> c2 = c1 <span style="color: blue">|</span>&gt; Seq<span style="color: blue">.</span>filter divisible_by_three     </p>
<p>c2 <span style="color: blue">|</span>&gt; Seq<span style="color: blue">.</span>iter <span style="color: blue">(</span>printfn <span style="color: maroon">&quot;%i&quot;</span><span style="color: blue">)</span></div>
<p><strong><u>C#</u></strong>   <br /> 
<div style="font-family: courier new"><span style="color: blue">static</span>&#160;<span style="color: blue">bool</span> DivisibleByTwo(<span style="color: blue">int</span> n)     <br />{     <br />&#160;&#160;&#160; Console.Write(<span style="color: maroon">&quot;{0} divisible by 2?&quot;</span>, n);     <br />&#160;&#160;&#160; <span style="color: blue">return</span> n % <span style="color: maroon">2</span> == <span style="color: maroon">0</span>;     <br />}     </p>
<p><span style="color: blue">static</span>&#160;<span style="color: blue">bool</span> DivisibleByThree(<span style="color: blue">int</span> n)     <br />{     <br />&#160;&#160;&#160; Console.Write(<span style="color: maroon">&quot;{0} divisible by 3?&quot;</span>, n);     <br />&#160;&#160;&#160; <span style="color: blue">return</span> n % <span style="color: maroon">3</span> == <span style="color: maroon">0</span>;     <br />}     </p>
<p><font color="#0000ff">var</font> c1 = <font color="#0000ff">from</font> n <span style="color: blue">in</span> Enumerable.Range(<span style="color: maroon">1</span>, <span style="color: maroon">100</span>)     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font color="#0000ff">where</font> DivisibleByTwo(n)     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font color="#0000ff">select</font> n;     </p>
<p><font color="#0000ff">var</font> c2 = <font color="#0000ff">from</font> n <span style="color: blue">in</span> c1     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font color="#0000ff">where</font> DivisibleByThree(n)     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <font color="#0000ff">select</font> n;     </p>
<p><span style="color: blue">foreach</span> (var c <span style="color: blue">in</span> c2) Console.WriteLine(<span style="color: maroon">&quot;{0}&quot;</span>, c);</div>
<div style="font-family: courier new">&#160;</div>
<p>Well, what do you think?&#160; If you said that the list will print out nicely at the end, you&#8217;d be very wrong.&#160; In fact, our output might look something like this:</p>
<p><a href="http://codebetter.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/matthew.podwysocki/image_5F00_4CD669A1.png"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="image" src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/matthew/podwysocki/image_thumb_6B40AA8A.png?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919787601&amp;Signature=4XOgrTU8si7vEQOBtPNZKOM2oHw%3d" width="493" height="489" /></a> </p>
<p>Why is that?&#160; Well, because in LINQ, the return type is always IEnumerable&lt;T&gt;, and in the case of F#, I was using sequences, which unlike the List&lt;&#8217;a&gt;, is lazily evaluated.&#160; What can we do about it?&#160; That&#8217;s another matter altogether.&#160; Unfortunately, the language constructs in .NET don&#8217;t forbid such things, so there&#8217;s no way of really preventing it, instead, you must be vigilant on your own to make sure this doesn&#8217;t happen.&#160; Spec# can help in just a little way as it can ensure state change will not occur during a given operation, but does not prevent you, nor warn you if you do such things as write to the console, logs, databases, etc.&#160; Let&#8217;s move onto another example and let&#8217;s see what happens.</p>
<p> <br />
<h2>Exception Management and Lazy Evaluation</h2>
<p>Exception management in terms of lazy evaluation is another interesting topic.&#160; When it comes to lazily evaluated functions and structures, how do we handle exceptions that may occur is a very good question.&#160; Let&#8217;s look at an example of trying to catch an exception that may happen in our code due to a DivideByZeroException.&#160; What do you think will happen here?&#160; Will it be caught and just return us an empty collection?&#160; Let&#8217;s find out:</p>
<p> <strong><u>F#</u></strong>   <br /> 
<div style="font-family: courier new"><span style="color: blue">#light</span>     </p>
<p><span style="color: blue">let</span> numbers = seq<span style="color: blue">[</span><span style="color: maroon">1</span> ; <span style="color: maroon">5</span>; <span style="color: maroon">2</span>; <span style="color: maroon">3</span>; <span style="color: maroon">7</span>; <span style="color: maroon">9</span>; <span style="color: maroon">0</span><span style="color: blue">]</span>     </p>
<p><span style="color: blue">let</span> one_over n =     <br />&#160; <span style="color: blue">try</span>     <br />&#160;&#160;&#160; n <span style="color: blue">|</span>&gt; Seq<span style="color: blue">.</span>map<span style="color: blue">(</span><span style="color: blue">fun</span> i <span style="color: blue">-&gt;</span>&#160;<span style="color: maroon">1</span> / i<span style="color: blue">)</span>     <br />&#160; <span style="color: blue">with</span>     <br />&#160;&#160;&#160; <span style="color: blue">|</span> err <span style="color: blue">-&gt;</span> seq<span style="color: blue">[</span><span style="color: blue">]</span>     <br />&#160;&#160;&#160;&#160; <br />numbers <span style="color: blue">|</span>&gt; one_over <span style="color: blue">|</span>&gt; Seq<span style="color: blue">.</span>iter<span style="color: blue">(</span><span style="color: blue">fun</span> x <span style="color: blue">-&gt;</span> printfn <span style="color: maroon">&quot;%i&quot;</span> x<span style="color: blue">)</span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<p> <strong><u>C#</u></strong>   <br /> 
<div style="font-family: courier new"><span style="color: blue">static</span> IEnumerable&lt;<span style="color: blue">int</span>&gt; OneOver(IEnumerable&lt;<span style="color: blue">int</span>&gt; items)     <br />{     <br />&#160;&#160;&#160; <span style="color: blue">try</span>     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> from i <span style="color: blue">in</span> items select <span style="color: maroon">1</span>/i;     <br />&#160;&#160;&#160; }     <br />&#160;&#160;&#160; <span style="color: blue">catch</span>     <br />&#160;&#160;&#160; {     <br />&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="color: blue">return</span> Enumerable.Empty&lt;<span style="color: blue">int</span>&gt;();     <br />&#160;&#160;&#160; }     <br />}     </p>
<p><font color="#0000ff">var</font> numbers = <span style="color: blue">new</span>[] {<span style="color: maroon">1</span>, <span style="color: maroon">5</span>, <span style="color: maroon">2</span>, <span style="color: maroon">3</span>, <span style="color: maroon">7</span>, <span style="color: maroon">9</span>, <span style="color: maroon">0</span>};     <br /><span style="color: blue">foreach</span> (var number <span style="color: blue">in</span> OneOver(numbers))&#160; <br />&#160;&#160;&#160; Console.WriteLine(<span style="color: maroon">&quot;{0}&quot;</span>, number);</div>
<div style="font-family: courier new">&#160;</div>
<p>What did you expect?&#160; Did we in fact catch the exception?&#160; The answer is no, because the returned structure isn&#8217;t evaluated until later, there isn&#8217;t any way for this try/catch block around our code to possibly work.&#160; The question is to you, how might you fix this?</p>
<p>The logic here is fundamentally flawed.&#160; Let&#8217;s move onto another scenario, this time dealing with resource management.</p>
<p> <br />
<h2>Resource Management and Lazy Evaluation</h2>
<p>Another area of exploration is around resource management and lazy evaluation.&#160; How do you ensure that your resources will be cleaned up once your evaluation is complete?&#160; It&#8217;s relatively easy to make minor mistakes that may come back and haunt us.&#160; Let&#8217;s look at a quick sample of using lazy evaluation and reading a file to the completion.&#160; What happens in the following code?</p>
<p> <strong><u>F#</u></strong>   <br /> 
<div style="font-family: courier new"><span style="color: blue">#light</span>     </p>
<p><span style="color: blue">open</span> System<span style="color: blue">.</span>IO     </p>
<p><span style="color: blue">let</span> readLines =&#160; <br />&#160; <font color="#0000ff">use</font> reader = File<span style="color: blue">.</span>OpenText<span style="color: blue">(</span><span style="color: maroon">@&quot;D:\Foo.txt&quot;</span><span style="color: blue">)</span>     <br />&#160; <span style="color: blue">let</span> lines<span style="color: blue">(</span><span style="color: blue">)</span> = reader<span style="color: blue">.</span>ReadToEnd<span style="color: blue">(</span><span style="color: blue">)</span>     <br />&#160; lines     </p>
<p>printfn <span style="color: maroon">&quot;%s&quot;</span>&#160;<span style="color: blue">(</span>readLines<span style="color: blue">(</span><span style="color: blue">)</span><span style="color: blue">)</span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<p> <strong><u>C#</u></strong>   <br /> 
<div style="font-family: courier new">Func&lt;<span style="color: blue">string</span>&gt; readLines = <span style="color: blue">null</span>;     </p>
<p><span style="color: blue">using</span>(var stream = File.OpenText(<span style="color: maroon">@&quot;D:\foo.txt&quot;</span>))     <br />&#160;&#160;&#160; readLines = stream.ReadToEnd;     </p>
<p>Console.WriteLine(readLines());</p></div>
<div style="font-family: courier new">&#160;</div>
<p>The answer of course is that we get an ObjectDisposedException thrown due to the fact that the stream is long gone by the time we want to invoke our function of readLines.&#160; Our reader has long fallen out of scope, and therefore we get that exception.&#160; So, how do we fix it?</p>
<p> <br />
<h2>Closures and Lazy Evaluation</h2>
<p>One last topic for this post revolves around variable instantiation around closures and what it means to you in regards to lazy evaluation.&#160; Let&#8217;s look at a quick example of some of the issues you might face.&#160; </p>
<p> <strong><u>C#</u></strong>   <br /> 
<div style="font-family: courier new"><font color="#0000ff">var</font> contents = <span style="color: blue">new</span> List&lt;Func&lt;<span style="color: blue">int</span>&gt;&gt;();     <br /><font color="#0000ff">var</font> s = <span style="color: blue">new</span> StringBuilder();     </p>
<p><span style="color: blue">for</span> (<font color="#0000ff">var</font> i = <span style="color: maroon">4</span>; i &lt; <span style="color: maroon">7</span>; i++)     <br />&#160;&#160;&#160; contents.Add(() =&gt; i);     </p>
<p><span style="color: blue">for</span> (<font color="#0000ff">var</font> k = <span style="color: maroon">0</span>; k &lt; contents.Count; k++)     <br />&#160;&#160;&#160; s.Append(contents[k]());     </p>
<p>Console.WriteLine(s);</p></div>
<div style="font-family: courier new">&#160;</div>
<p>What we might expect the results to be in this case would be 456.&#160; But that&#8217;s not the case at all here.&#160; In fact, the answer you will get is 777.&#160; Why is that?&#160; Well, it has to do with the way that the C# compiler creates a helper class to enable this closure.&#160; If you&#8217;re like me and have Resharper, you&#8217;ll notice that it gives a warning about this with &quot;Access to modified closure&quot;.&#160; If we change this to give ourselves a local variable inside the loop closure construct to initialize the value properly.&#160; If we do that and change our code, it will now look like this:</p>
<p> <strong><u>C#</u></strong>   <br /> 
<div style="font-family: courier new"><font color="#0000ff">var</font> contents = <span style="color: blue">new</span> List&lt;Func&lt;<span style="color: blue">int</span>&gt;&gt;();     <br /><font color="#0000ff">var</font> s = <span style="color: blue">new</span> StringBuilder();     </p>
<p><span style="color: blue">for</span> (<font color="#0000ff">var</font> i = <span style="color: maroon">4</span>; i &lt; <span style="color: maroon">7</span>; i++)     <br />{     <br />&#160;&#160;&#160; <font color="#0000ff">var</font> j = i;     <br />&#160;&#160;&#160; contents.Add(() =&gt; j);     <br />}     </p>
<p><span style="color: blue">for</span> (<font color="#0000ff">var</font> k = <span style="color: maroon">0</span>; k &lt; contents.Count; k++)     <br />&#160;&#160;&#160; s.Append(contents[k]());     </p>
<p>Console.WriteLine(s);</p></div>
<div style="font-family: courier new">&#160;</div>
<p><a href="http://www.managed-world.com/">Jason Olson</a> has a pretty good explanation in his post <a href="http://www.managed-world.com/2008/06/13/LambdasKnowYourClosures.aspx">&quot;Lambdas &#8211; Know Your Closures&quot;</a>.&#160; But where does F# fall into this picture?&#160; Well, let&#8217;s try the first code sample written in F# to see what kind of results that we get.</p>
<p> <strong><u>F#</u></strong>   <br /> 
<div style="font-family: courier new"><span style="color: blue">#light</span>     </p>
<p><span style="color: blue">open</span> System<span style="color: blue">.</span>Text     </p>
<p><span style="color: blue">let</span> contents = <span style="color: blue">new</span> ResizeArray&lt;<span style="color: blue">(</span>unit <span style="color: blue">-&gt;</span>&#160;<span style="color: blue">int</span><span style="color: blue">)</span>&gt;<span style="color: blue">(</span><span style="color: blue">)</span>     <br /><span style="color: blue">for</span> i = <span style="color: maroon">4</span>&#160;<span style="color: blue">to</span>&#160;<span style="color: maroon">6</span>&#160;<span style="color: blue">do</span>     <br />&#160; contents<span style="color: blue">.</span>Add<span style="color: blue">(</span><span style="color: blue">(</span><span style="color: blue">fun</span>&#160;<span style="color: blue">(</span><span style="color: blue">)</span>&#160;<span style="color: blue">-&gt;</span> i<span style="color: blue">)</span><span style="color: blue">)</span>     <br />&#160; <br /><span style="color: blue">let</span> s = <span style="color: blue">new</span> StringBuilder<span style="color: blue">(</span><span style="color: blue">)</span>     <br /><span style="color: blue">for</span> k = <span style="color: maroon">0</span>&#160;<span style="color: blue">to</span>&#160;<span style="color: blue">(</span>contents<span style="color: blue">.</span>Count &#8211; <span style="color: maroon">1</span><span style="color: blue">)</span>&#160;<span style="color: blue">do</span>     <br />&#160; s<span style="color: blue">.</span>Append<span style="color: blue">(</span>contents<span style="color: blue">.</span><span style="color: blue">[</span>k<span style="color: blue">]</span><span style="color: blue">(</span><span style="color: blue">)</span><span style="color: blue">)</span>&#160;<span style="color: blue">|</span>&gt; ignore     <br />&#160; <br />printfn <span style="color: maroon">&quot;%s&quot;</span>&#160;<span style="color: blue">(</span>s<span style="color: blue">.</span>ToString<span style="color: blue">(</span><span style="color: blue">)</span><span style="color: blue">)</span></div>
<div style="font-family: courier new"><span style="color: blue"></span></div>
<p>When we run this code, we get what we were expecting all along, &quot;456&quot;.&#160; Why is that?&#160; The F# team handles the code just a little bit differently than the C# compiler does.&#160; This to me seems a lot less error-prone.</p>
<p> <br />
<h2>Wrapping It Up</h2>
<p>I&#8217;d like to see how you might fix some of these issues?&#160; What would you do differently in each example to ensure the correct result with lazy evaluation?</p>
<p>Functional programming and side effects are important topics.&#160; I hope this post shed some light on how with lazy evaluation, side effects, when not managed properly, can be quite evil.&#160; The ideas in functional programming is to strive towards a side effect free style.&#160; When we start introducing lazy evaluation, concurrency and other issues, we need to be mindful of side effects and how we manage them.&#160; </p>
<p>I highly encourage you to see Erik&#8217;s presentation that I linked above as it contains ideas that may help make you a better programmer.&#160; And while you&#8217;re at it, watch the video of Simon Peyton Jones and Erik Meijer on Channel 9 called <a href="http://channel9.msdn.com/posts/Charles/Simon-Peyton-Jones-Towards-a-Programming-Language-Nirvana/">&quot;Towards a Programming Nirvana&quot;</a>.&#160; It&#8217;s definitely an eye opener!</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/uncategorized/" title="View all posts in Uncategorized" rel="category tag">Uncategorized</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2008/09/12/side-effects-and-functional-programming/" title="Permalink to Side Effects and Functional Programming" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2008/09/12/side-effects-and-functional-programming/feed/" title="Comments RSS to Side Effects and Functional Programming" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-54 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2008/09/10/object-oriented-f-extension-everything/" rel="prev"><span class="meta-nav">&larr;</span> Object Oriented F# &#8211; Extension Everything</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2008/09/13/object-oriented-f-more-extension-everything/" rel="next">Object Oriented F# &#8211; More Extension Everything <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-125">
					<div id="dsq-comment-header-125" class="dsq-comment-header">
						<cite id="dsq-cite-125">
								<span id="dsq-author-user-125">Sebastian</span>
							</cite>
					</div>
					<div id="dsq-comment-body-125" class="dsq-comment-body">
						<div id="dsq-comment-message-125" class="dsq-comment-message"><p>&#8220;Whether languages such as F# and Erlang are not pure functional programming languages&#8221;</p>
<p>What do y ou mean &#8220;Whether&#8221;? They&#8217;re not *by definition*. That&#8217;s what &#8220;pure&#8221; means.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-126">
					<div id="dsq-comment-header-126" class="dsq-comment-header">
						<cite id="dsq-cite-126">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-126">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-126" class="dsq-comment-body">
						<div id="dsq-comment-message-126" class="dsq-comment-message"><p>@Sebastian</p>
<p>True, they are not, but I didn&#8217;t want to get into debates about how pure, etc.  </p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-127">
					<div id="dsq-comment-header-127" class="dsq-comment-header">
						<cite id="dsq-cite-127">
	http://tmorris.net/							<span id="dsq-author-user-127">Tony Morris</span>
							</cite>
					</div>
					<div id="dsq-comment-body-127" class="dsq-comment-body">
						<div id="dsq-comment-message-127" class="dsq-comment-message"><p>> I&#8217;d like to see how you might fix some of these issues?</p>
<p>Use Haskell.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-128">
					<div id="dsq-comment-header-128" class="dsq-comment-header">
						<cite id="dsq-cite-128">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-128">Matthew Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-128" class="dsq-comment-body">
						<div id="dsq-comment-message-128" class="dsq-comment-message"><p>@Tony</p>
<p>Absolutely agreed that Haskell gets around many of these issues that we discussed.  But, how do you educate those who are still using .NET languages, Java, etc on these issues?  That&#8217;s an important step on them coming to terms with Haskell and the great things it can do for you.</p>
<p>But, how do you fix it in the languages I picked?  Can you?</p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-129">
					<div id="dsq-comment-header-129" class="dsq-comment-header">
						<cite id="dsq-cite-129">
	http://www.serpentine.com/blog/							<span id="dsq-author-user-129">Bryan O&#8217;Sullivan</span>
							</cite>
					</div>
					<div id="dsq-comment-body-129" class="dsq-comment-body">
						<div id="dsq-comment-message-129" class="dsq-comment-message"><p>Actually, Haskell doesn&#8217;t get around these issues. Mixing side effects and lazy evaluation is a common source of beginner mistakes in Haskell, too. A classic instance would be a pure computation that consumes the contents of a file via readFile. The readFile action returns almost immediately, and provides the file contents lazily. If you then try to e.g. write the file without having first ensured that you&#8217;ve read all of its contents, you&#8217;ll get an exception because the RTS still has it open for reading.</p>
<p>The reason I bring these up as classic beginner mistakes is that they are just that, at least in Haskell: errors made by people new to the language. In fact, most of the problems you cite with F# and C# above can occur in Haskell, Python, and probably all other languages that support lazy evaluation in some way.</p>
<p>In Haskell, we encourage people to take a different tack at these problems. For instance, if you&#8217;re concerned about lazy stream I/O, try reading files (or network data) inside a monadic left fold instead. I wrote an example of how to program in this style in Real World Haskell, and there&#8217;s an exercise somewhere that challenges the reader to use it in a different setting.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-130">
					<div id="dsq-comment-header-130" class="dsq-comment-header">
						<cite id="dsq-cite-130">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-130">Matthew Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-130" class="dsq-comment-body">
						<div id="dsq-comment-message-130" class="dsq-comment-message"><p>@Bryan</p>
<p>Yes, I think it&#8217;s bad to usually say that picking a language will just solve the problem.  Because there are right ways to think about a problem and wrong.  F# also brings that to the table as well, as there is a more correct way of doing lazy evaluation, and less than ideal scenarios.  Haskell has the same things.</p>
<p>Many of these problems I threw up there had everything to do with beginner mistakes when dealing with laziness.  Proper planning and trying not to mix imperative and laziness are the key to solving these problems.</p>
<p>I&#8217;m really looking forward to Real World Haskell, as I think it&#8217;ll explain the joys of Haskell to those who aren&#8217;t already in the functional programming mindset.  Not only to learn about the language, which is great and interesting, but also to learn the patterns around lazy evaluation.</p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-131">
					<div id="dsq-comment-header-131" class="dsq-comment-header">
						<cite id="dsq-cite-131">
								<span id="dsq-author-user-131">travis</span>
							</cite>
					</div>
					<div id="dsq-comment-body-131" class="dsq-comment-body">
						<div id="dsq-comment-message-131" class="dsq-comment-message"><p>In the C# code under &#8220;Resource Management and Lazy Evaluation&#8221;, is there a mistake?  Instead of &#8220;readContents = stream.ReadToEnd; &#8221; should it be &#8220;readLines = stream.ReadToEnd; &#8220;</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-132">
					<div id="dsq-comment-header-132" class="dsq-comment-header">
						<cite id="dsq-cite-132">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-132">Matthew Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-132" class="dsq-comment-body">
						<div id="dsq-comment-message-132" class="dsq-comment-message"><p>@Travis</p>
<p>Oh, I just noticed my copy/paste was a little bad there and since has been fixed.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-133">
					<div id="dsq-comment-header-133" class="dsq-comment-header">
						<cite id="dsq-cite-133">
								<span id="dsq-author-user-133">Ben Ellis</span>
							</cite>
					</div>
					<div id="dsq-comment-body-133" class="dsq-comment-body">
						<div id="dsq-comment-message-133" class="dsq-comment-message"><p>In the spirit of Tony&#8217;s comment, here&#8217;s a lovely paper by Simon Peyton Jones that explains how Haskell can handle IO, mutable state, exceptions, and concurrency.  </p>
<p>He goes into operational semantics of the various features, but those are really there to fully specify what you can get the general idea of rather quickly.</p>
<p>I got a lot out of the paper just from seeing IORefs (cells holding mutable values) and MVars (cells holding mutable values that allow for inter-thread communication)</p>
<p><a href="http://research.microsoft.com/~simonpj/papers/marktoberdorf/" rel="nofollow">http://research.microsoft.com/~simonpj/papers/marktoberdorf/</a></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-134">
					<div id="dsq-comment-header-134" class="dsq-comment-header">
						<cite id="dsq-cite-134">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-134">Matthew Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-134" class="dsq-comment-body">
						<div id="dsq-comment-message-134" class="dsq-comment-message"><p>@Ben</p>
<p>Thanks for the link!  That&#8217;s quite useful for those just coming to grips with IO, Exception Management and how to handle them in a lazy evaluated language.  I&#8217;d love for some of these patterns to be picked up by the F# community to enforce some purity.</p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-135">
					<div id="dsq-comment-header-135" class="dsq-comment-header">
						<cite id="dsq-cite-135">
								<span id="dsq-author-user-135">Paul de Vrieze</span>
							</cite>
					</div>
					<div id="dsq-comment-body-135" class="dsq-comment-body">
						<div id="dsq-comment-message-135" class="dsq-comment-message"><p>The last example is quite interesting. The F# way is actually more functional. Pure functions must be predictable, as such they can not look up the value of a variable out of its scope. This means that the lambda&#8217;s are always instantiated with the value of the variable i, not a reference to the variable. Not to forget the fact that doing it the C# way is very much more complicated on the compiler.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-136">
					<div id="dsq-comment-header-136" class="dsq-comment-header">
						<cite id="dsq-cite-136">
	http://podwysocki.codebetter.com							<span id="dsq-author-user-136">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-136" class="dsq-comment-body">
						<div id="dsq-comment-message-136" class="dsq-comment-message"><p>@Paul</p>
<p>Agreed that F# and the way they do things is a lot less error prone and a lot less clumsy than C#.  The items that I showed here were to show that purity does in fact matter, and mixing imperative and functional styles is not easy and should be properly managed.</p>
<p>Matt</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/matthewpodwysocki/2008/09/12/side-effects-and-functional-programming/ ';
	var disqus_identifier = '54 /blogs/matthew.podwysocki/archive/2008/09/12/side-effects-and-functional-programming.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'matthewpodwysocki';
	var disqus_title = "Side Effects and Functional Programming";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=54');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/matthewpodwysocki/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2008\/09\/12\/side-effects-and-functional-programming\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.686 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-27 10:15:05 -->
<!-- super cache -->