<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Dojo Deferred and the Reactive Extensions for JavaScript | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://cdn1.codebetter.com/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://cdn1.codebetter.com/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Matthew Podwysocki' href='http://codebetter.com/matthewpodwysocki/' />
<link rel='start' title='let Matt = CodeBetter + 1' href='http://codebetter.com/matthewpodwysocki/2008/04/24/let-matt-codebetter-1/' />
<link rel='prev' title='IronRuby and the Reactive Extensions Together Again – Taming User Input' href='http://codebetter.com/matthewpodwysocki/2010/08/09/ironruby-and-the-reactive-extensions-together-again-taming-user-input/' />
<link rel='next' title='Introduction to the Reactive Extensions for JavaScript – Buffering' href='http://codebetter.com/matthewpodwysocki/2010/08/25/introduction-to-the-reactive-extensions-for-javascript-buffering/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/matthewpodwysocki/2010/08/12/dojo-deferred-and-the-reactive-extensions-for-javascript/' />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=237' />
<link rel="stylesheet" href="http://cdn1.codebetter.com/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/matthewpodwysocki/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://cdn1.codebetter.com/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="http://cdn1.codebetter.com/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-237" class="post-237 post type-post status-publish format-standard hentry category-javascript category-jsconf category-reactive-framework">
					<h1 class="entry-title">Dojo Deferred and the Reactive Extensions for JavaScript</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by matthewpodwysocki">matthewpodwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2010/08/12/dojo-deferred-and-the-reactive-extensions-for-javascript/" title="10:38 pm" rel="bookmark"><span class="entry-date">August 12, 2010</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://cdn1.codebetter.com/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>We’ve covered quite a bit in this series including how well the <a href="http://msdn.microsoft.com/en-us/devlabs/ee794896.aspx">Reactive Extensions for JavaScript</a> plays with other libraries and what integration points we have.&#160; Our main thrust in providing this is that we don’t want to replace your library of choice, whether it be <a href="http://jquery.com">jQuery</a>, <a href="http://www.dojotoolkit.org/">Dojo</a>, <a href="http://mootools.net/">MooTools</a>, YUI in addition to the server components of <a href="http://nodejs.org/">node.js</a>.&#160; Instead, we want to build bridges from them when you encounter the pains of asynchronous and event-based composition which frequently crop up in JavaScript applications both on the web and even on the server.&#160; Case in point, let’s go over our latest integration with the <a href="http://www.dojotoolkit.org/">Dojo Toolkit’s</a> promises via the <a href="http://docs.dojocampus.org/dojo/Deferred">dojo.Deferred module</a>.</p>
<p>Before we get started, let’s get caught up to where we are today:</p>
<ul>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/02/16/introduction-to-the-reactive-extensions-to-javascript.aspx">Introduction</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/02/23/introduction-to-the-reactive-extensions-for-javascript-creating-observables.aspx">Creating Observables</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/02/27/introduction-to-the-reactive-extensions-for-javascript-creating-observers.aspx">Creating Observers</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/05/introduction-to-the-reactive-extensions-for-javascript-jquery-integration.aspx">jQuery Integration</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/11/introduction-to-the-reactive-extensions-for-javascript-composing-callbacks.aspx">Composing Callbacks</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/12/introduction-to-the-reactive-extensions-for-javascript-from-blocking-to-async.aspx">From Blocking to Async</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/15/introduction-to-the-reactive-extensions-for-javascript-wikipedia-lookup.aspx">Wikipedia Lookup</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/16/introduction-to-the-reactive-extensions-for-javascript-composing-deeper.aspx">Composing Deeper</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/17/the-reactive-extensions-for-javascript-released.aspx">Bing Maps and Twitter Mashup</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/19/introduction-to-the-reactive-extensions-for-javascript-drag-and-drop.aspx">Drag and Drop</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/03/21/introduction-to-the-reactive-extensions-for-javascript-jquery-live-event-integration.aspx">jQuery Live Event integration</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/04/02/introduction-to-the-reactive-extensions-for-javascript-extending-jquery-ajax.aspx">jQuery AJAX integration</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/04/09/introduction-to-the-reactive-extensions-for-javascript-a-separation-of-concerns.aspx">A Separation of Concerns</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/04/14/introduction-to-the-reactive-extensions-for-javascript-aggregation-part-1.aspx">Aggregates – Part 1</a> and <a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/04/14/introduction-to-the-reactive-extensions-for-javascript-aggregation-part-2.aspx">Part 2</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/04/19/introduction-to-the-reactive-extensions-for-javascript-new-release-and-joins.aspx">Join Operators</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/04/23/introduction-to-the-reactive-extensions-for-javascript-going-parallel-with-forkjoin.aspx">Going “Parallel” with ForkJoin</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/05/04/introduction-to-the-reactive-extensions-for-javascript-refactoring-a-game.aspx">Refactoring a Game</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/05/10/introduction-to-the-reactive-extensions-for-javascript-async-method-chaining.aspx">Async Method Chaining</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/05/12/introduction-to-the-reactive-extensions-for-javascript-custom-schedulers.aspx">Custom Schedulers</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/05/17/introduction-to-the-reactive-extensions-for-javascript-the-final-countdown-timer.aspx">Countdown Timers</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/05/28/introduction-to-the-reactive-extensions-for-javascript-wrapping-the-dojo-api.aspx">Wrapping the Dojo Toolkit</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/06/04/introduction-to-the-reactive-extensions-for-javascript-mootools-integration.aspx">MooTools Integration</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/06/16/introduction-to-the-reactive-extensions-for-javascript-conditionals.aspx">Conditional Operators</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/06/24/introduction-to-the-reactive-extensions-for-javascript-looping-operators.aspx">Looping Operators</a></li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/07/20/introduction-to-the-reactive-extensions-for-javascript-error-handling-part-i.aspx">Error Handling Part 1</a> and <a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2010/08/02/introduction-to-the-reactive-extensions-for-javascript-error-handling-part-ii.aspx">Part 2</a></li>
</ul>
<p>&#160;</p>
<h2>Dojo Deferred</h2>
<p>The Dojo dojo.Deferred module is a central piece of the Dojo Toolkit which serves as the basis for such things as AJAX calls like xhrGet among others.&#160; At its core, it serves as a promises API which acts as a proxy for value which has not yet been calculated, and through this API, we have a clear separation of concerns which allows us to abstract the asynchronous behavior via callbacks into the promise itself, instead of the method signature.&#160; The same could be said of the Reactive Extensions for JavaScript as well.&#160; </p>
<p>Although dojo.Deferred has been around for a while, the newest release of the Dojo Toolkit has added another method to handle both the success and failure cases of a given computation, such as the following code.&#160; Imagine we had an asynchronous function which returns to us a dojo.Deferred object, which does nothing more than delay by a second and return the value.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">function</span><span style="color: #000000"> someDeferredFunction() {
    </span><span style="color: #0000FF">var</span><span style="color: #000000"> deferred </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> dojo.Deferred();
    setTimeout(
        </span><span style="color: #0000FF">function</span><span style="color: #000000">() {
            deferred.callback(</span><span style="color: #000000">42</span><span style="color: #000000">);
        }, </span><span style="color: #000000">1000</span><span style="color: #000000">);
    </span><span style="color: #0000FF">return</span><span style="color: #000000"> deferred;
}</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Then we can subscribe to both its success and failure cases by using the then function.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> deferred1 </span><span style="color: #000000">=</span><span style="color: #000000"> someDeferredFunction();
deferred1.then(
    </span><span style="color: #008000">//</span><span style="color: #008000"> Success</span><span style="color: #008000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">function</span><span style="color: #000000">(value) {
        alert(value);
    },
    </span><span style="color: #008000">//</span><span style="color: #008000"> Failure</span><span style="color: #008000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">function</span><span style="color: #000000">(error) {
        alert(error);
    });</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>We can see a bit of overlap between the ideas here and the heart of the Reactive Extensions for JavaScript.&#160; The difference between the two is that this API treats asynchronous calls as one shot resumable methods whereas RxJS treats these as observable sequences.&#160; So, how could we take advantage of this API and build a bridge between the two libraries?</p>
<h2>From Deferred to Observable</h2>
<p>The first order of business is to see how we can take a given dojo.Deferred and turn it into an Observable sequence yielding a single value.&#160;&#160; Using the Reactive Extensions for JavaScript with the Dojo support added via the “rx.dojo.js” script, we can seamless leap between the two by calling the asObservable prototype method we added.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> deferred2 </span><span style="color: #000000">=</span><span style="color: #000000"> someDeferredFunction();
deferred2.asObservable()
    .Select(</span><span style="color: #0000FF">function</span><span style="color: #000000">(value) { </span><span style="color: #0000FF">return</span><span style="color: #000000"> value </span><span style="color: #000000">*</span><span style="color: #000000"> value; })
    .Subscribe(
        </span><span style="color: #0000FF">function</span><span style="color: #000000">(value) {
            alert(value);
        });</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>In this example, we took the someDeferredFunction from above and then called the asObservable method, then we’re free to do such things as projections via Select in which we square the returned value and then subscribe to the result via Subscribe.&#160; To show you how we did it, let’s walk through the code below.&#160; First, we create an AsyncSubject which represents and asynchronous operation which accepts only one value and then caches it for all future observations.&#160; Then we can call the then function and in the success case, we call OnNext with the result and OnCompleted to indicate we are finished, and in the failure case, we send the error on via OnError.&#160; FInally we return the subject, thus completing our bridge.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">dojo.Deferred.prototype.asObservable </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> () {
    </span><span style="color: #0000FF">var</span><span style="color: #000000"> subject </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> Rx.AsyncSubject();

    </span><span style="color: #0000FF">this</span><span style="color: #000000">.then(
        </span><span style="color: #008000">//</span><span style="color: #008000"> Success</span><span style="color: #008000">
</span><span style="color: #000000">        </span><span style="color: #0000FF">function</span><span style="color: #000000"> (value) {
            subject.OnNext(value);
            subject.OnCompleted();
        },
        </span><span style="color: #008000">//</span><span style="color: #008000"> Failure</span><span style="color: #008000">
</span><span style="color: #000000">        </span><span style="color: #0000FF">function</span><span style="color: #000000"> (error) {
            subject.OnError(error);
        });

    </span><span style="color: #0000FF">return</span><span style="color: #000000"> subject;
};</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>But, what about the other way around?&#160; Can we go from an Observable sequence to a dojo.Deferred? </p>
<h2>From Observable to Deferred</h2>
<p>Because we feel like building bridges, we want to give the ability for traffic to go both ways.&#160; For example, we could have a given AsyncSubject that we want to use with our existing Dojo functionality.&#160; Imagine we had an Observable sequence that waits for a second and then yields the value via an AsyncSubject.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">function</span><span style="color: #000000"> someAsyncSubjectFunction() {
    </span><span style="color: #0000FF">var</span><span style="color: #000000"> subject </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> Rx.AsyncSubject();

    setTimeout(
        </span><span style="color: #0000FF">function</span><span style="color: #000000">() {
            subject.OnNext(</span><span style="color: #000000">42</span><span style="color: #000000">);
            subject.OnCompleted();
        },
        </span><span style="color: #000000">1000</span><span style="color: #000000">);

    </span><span style="color: #0000FF">return</span><span style="color: #000000"> subject;
}</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now, we might have some processing logic written in Dojo, so we want you to take full advantage of that.&#160; Via the AsDeferred method provided to us through the “rx.dojo.js” script, we build that bridge between the two libraries.&#160; After calling AsDeferred, we can then use it as a regular dojo.Deferred object.&#160; So, now we can call then passing in the two continuations for the success and failure cases.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> subject </span><span style="color: #000000">=</span><span style="color: #000000"> someAsyncSubjectFunction();
subject
    .AsDeferred()
    .then(
        </span><span style="color: #0000FF">function</span><span style="color: #000000"> (value) {
            alert(value);
        },
        </span><span style="color: #0000FF">function</span><span style="color: #000000"> (error) {
            alert(error);
        });</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now, how did we make this happen?&#160; We’ll need to extend the AsyncSubject with our AsDeferred method.&#160; Inside, we’ll create a new dojo.Deferred which will handle the values from our AsyncSubject.&#160; Next, we’ll subscribe to our subject via the Subscribe method, calling the callback method with our result on success, and errback on the failure.&#160; Finally, we return the deferred which completes our bridge.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">Rx.AsyncSubject.prototype.AsDeferred </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> () {
   </span><span style="color: #0000FF">var</span><span style="color: #000000"> deferred </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> dojo.Deferred();

    </span><span style="color: #0000FF">this</span><span style="color: #000000">.Subscribe(
        </span><span style="color: #0000FF">function</span><span style="color: #000000"> (value) {
            deferred.callback(value);
        },
        </span><span style="color: #0000FF">function</span><span style="color: #000000"> (error) {
            deferred.errback(error);
        });

    </span><span style="color: #0000FF">return</span><span style="color: #000000"> deferred;
}</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>And there you have it, our bridge between the Dojo Toolkit and the Reactive Extensions for JavaScript, which allows you to have the best of both worlds. </p>
<h2>Conclusion</h2>
<p>Dealing with asynchronous programming has been in the forefront of many minds in the JavaScript community.&#160; At <a href="http://jsconf.us/2010">JSConf</a>, there were several examples of frameworks trying to get around the idea of callbacks and instead lean more towards composition.&#160; By utilizing the Reactive Extensions for JavaScript, we’re able to compose together asynchronous and event-based operations together and transform the results in interesting ways. </p>
<p>The Reactive Extensions isn’t meant to be the only solution in your toolkit, but instead you can continue to use the JavaScript library of your choice, and when you run into callback hell and composition issues, that’s where RxJS shines.&#160; To that end, we’ve provided a lot of bridges between various libraries such as the following, and more to come:</p>
<ul>
<li><a href="http://jquery.com">jQuery</a></li>
<li><a href="http://dojotoolkit.org/">Dojo Toolkit</a></li>
<li><a href="http://mootools.net/">MooTools</a></li>
<li><a href="http://prototypejs.org/">Prototype</a></li>
<li><a href="http://developer.yahoo.com/yui/3/">YUI3</a></li>
<li><a href="http://www.sencha.com/">ExtJS</a></li>
<li><a href="http://raphaeljs.com/">Raphael</a></li>
<li>Bing Maps</li>
<li>Bing Translator</li>
<li>Google Maps</li>
<li>Google Translate</li>
<li><a href="http://nodejs.org/">Node.js</a></li>
<li>and so on…</li>
</ul>
<p>So with that, <a href="http://msdn.microsoft.com/en-us/devlabs/ee794896.aspx">download it</a>, and <a href="http://social.msdn.microsoft.com/Forums/en-US/rx/threads">give the team feedback!</a></p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/javascript/" title="View all posts in JavaScript" rel="category tag">JavaScript</a>, <a href="http://codebetter.com/matthewpodwysocki/category/jsconf/" title="View all posts in JSConf" rel="category tag">JSConf</a>, <a href="http://codebetter.com/matthewpodwysocki/category/reactive-framework/" title="View all posts in Reactive Framework" rel="category tag">Reactive Framework</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2010/08/12/dojo-deferred-and-the-reactive-extensions-for-javascript/" title="Permalink to Dojo Deferred and the Reactive Extensions for JavaScript" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2010/08/12/dojo-deferred-and-the-reactive-extensions-for-javascript/feed/" title="Comments RSS to Dojo Deferred and the Reactive Extensions for JavaScript" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-237 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2010/08/09/ironruby-and-the-reactive-extensions-together-again-taming-user-input/" rel="prev"><span class="meta-nav">&larr;</span> IronRuby and the Reactive Extensions Together Again – Taming User Input</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2010/08/25/introduction-to-the-reactive-extensions-for-javascript-buffering/" rel="next">Introduction to the Reactive Extensions for JavaScript – Buffering <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/matthewpodwysocki/2010/08/12/dojo-deferred-and-the-reactive-extensions-for-javascript/ ';
	var disqus_identifier = '237 /blogs/matthew.podwysocki/archive/2010/08/12/dojo-deferred-and-the-reactive-extensions-for-javascript.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'matthewpodwysocki';
	var disqus_title = "Dojo Deferred and the Reactive Extensions for JavaScript";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=237');
		});
					};
	var facebookXdReceiverPath = 'http://cdn1.codebetter.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2010\/08\/12\/dojo-deferred-and-the-reactive-extensions-for-javascript\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://cdn1.codebetter.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.277 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-31 14:35:41 -->
<!-- super cache -->