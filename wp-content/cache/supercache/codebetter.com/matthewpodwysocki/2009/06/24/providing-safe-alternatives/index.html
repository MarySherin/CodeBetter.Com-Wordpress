<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Providing Safe Alternatives | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/matthewpodwysocki/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/matthewpodwysocki/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Matthew Podwysocki' href='http://codebetter.com/matthewpodwysocki/' />
<link rel='start' title='let Matt = CodeBetter + 1' href='http://codebetter.com/matthewpodwysocki/2008/04/24/let-matt-codebetter-1/' />
<link rel='prev' title='F# – Async Running with Continuation Scissors' href='http://codebetter.com/matthewpodwysocki/2009/06/20/f-async-running-with-continuation-scissors/' />
<link rel='next' title='The “Anti-For” Campaign' href='http://codebetter.com/matthewpodwysocki/2009/06/26/the-anti-for-campaign/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/matthewpodwysocki/2009/06/24/providing-safe-alternatives/' />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=152' />
<meta name="_awb_version" content="2.0.3" /><link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.6" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/matthewpodwysocki/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-152" class="post-152 post type-post status-publish format-standard hentry category-f category-functional-programming category-haskell">
					<h1 class="entry-title">Providing Safe Alternatives</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by matthewpodwysocki">matthewpodwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2009/06/24/providing-safe-alternatives/" title="1:08 pm" rel="bookmark"><span class="entry-date">June 24, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/matthewpodwysocki/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>When I was reading through <a href="http://realworldhaskell.org">Real World Haskell</a>, I was struck several times by the mention of providing safe function alternatives.&#160; The idea is to provide a function that in all cases returns a value as well as the one which is meant to accept valid input and throw exceptions should that contract be violated.&#160; There is a real performance consideration to be taken into account as a function which repeatedly throws exceptions as logic will tend to overwhelm a system and slow it down significantly.&#160; Imagine if you will an application which reads a large directory to check each file for an X509 certificate, whether it has one or not, and it throws an exception if one is not present.&#160; The problem of course is there is no way to determine whether a file was signed at the time using the .NET class without resorting to P/Invoke (my favorite).</p>
<p>Recently on Twitter, there was talk finally of the <a href="http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=94072">inclusion of Guid.TryParse in .NET 4.0</a>, yet somehow, <a href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=282488">Enum.TryParse has not been addressed yet</a> (gee, we’re consistent here).&#160; The idea is to provide a way of determining whether the string is a Guid format without throwing an exception, and instead returning a flag indicating success and an out parameter with the value which is set to the value if there is success, else the default value.&#160; Before we dig any further, let’s look at some terminology.</p>
<h2>Partial Versus Total Functions</h2>
<p>To get some terminology straight, let’s talk about partial functions versus total functions.&#160; Partial functions are those functions which only return values for a defined subset of valid inputs, as throwing an exception is not considered a return value.&#160; On the other hand, functions that return valid results over the entire input are considered to be total functions.&#160; Let’s look at a quick example of what that means in F# interactive, the first being a partial function and the latter being a total function.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">open</span><span style="color: #000000"> System.Linq;;
</span><span style="color: #000000">&gt;</span><span style="color: #000000"> ([] : int list).First();;
System.InvalidOperationException: Sequence contains no elements
   at System.Linq.Enumerable.First[TSource](IEnumerable`</span><span style="color: #800080">1</span><span style="color: #000000"> source)
   at </span><span style="color: #000000">&lt;</span><span style="color: #000000">StartupCode$FSI_0003</span><span style="color: #000000">&gt;</span><span style="color: #000000">.$FSI_0003.main@()
stopped due to error
</span><span style="color: #000000">&gt;</span><span style="color: #000000"> ([] : int list).FirstOrDefault();;
</span><span style="color: #0000FF">val</span><span style="color: #000000"> it : int </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #800080">0</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>We see by the above that the First() function is a partial function because it only has defined behavior for non-empty collections, whereas FirstOrDefault() has defined behavior for empty lists and returns the default value for the given generic type.&#160; When we’re writing our code, we better know which one we’re dealing with as default values can cause unintended consequences.&#160; Without proper tests around these calls, this can be hard to manage.&#160; </p>
<p>Mitigating these partial functions with calls to such things as the Count() extension method is not necessarily the answer either.&#160; When dealing with non-lazy lists such as an array or a List&lt;T&gt;, then such things as the number of items in our collection is well known and part of the state.&#160; In the case of the lazy sequence, this is not the case, so any call to Count() would cause an evaluation of all items in the list, which could lead to unintended consequences.&#160; So, if we’re chaining together 4 partial functions together, we could be doing something wrong.&#160; All in all, total functions should be preferred usage, but of course within reason.</p>
<h2>Can We Do Better Than Try?</h2>
<p>Going back to one of the original points, can we do better than the standard Try (Parse/GetValue/etc) pattern that is pervasive throughout .NET code?&#160; After all, it tries to do two things at once, and the success flag can be missed if one so chose.&#160;&#160; F# decided to take a slightly different angle to this problem by returning the success flag and the value as a pair tuple.&#160; Such an example would be like this memoize function below:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">open</span><span style="color: #000000"> System.Collections.Generic

</span><span style="color: #0000FF">let</span><span style="color: #000000"> memoize f </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> t </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #000000">_,_</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
  </span><span style="color: #0000FF">fun</span><span style="color: #000000"> n </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">
    </span><span style="color: #0000FF">match</span><span style="color: #000000"> t.TryGetValue(n) </span><span style="color: #0000FF">with</span><span style="color: #000000">
    </span><span style="color: #000000">|</span><span style="color: #000000"> (</span><span style="color: #0000FF">true</span><span style="color: #000000"> , value) </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> value
    </span><span style="color: #000000">|</span><span style="color: #000000"> (</span><span style="color: #0000FF">false</span><span style="color: #000000">, _    ) </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">
        </span><span style="color: #0000FF">let</span><span style="color: #000000"> res </span><span style="color: #000000">=</span><span style="color: #000000"> f n
        t.Add(n, res)
        res</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>What we’re doing above is calling the TryGetValue method which takes a key and returns a success flag as well as the out parameter for the value (set if there is success).&#160; F# automatically creates a pair tuple for us which we can then pattern match against to take appropriate action.&#160; Unfortunately, for this go around at least, C# does not treat tuples as first class data types, so a solution like this exclusive to F# at this time.&#160; Overall, a much cleaner design, but maybe there’s another option?</p>
<h2>Maybe there’s an Option…</h2>
<p>Instead of dealing with the clumsiness of the above code, I would much rather solve this in a clean way using the F# Option type.&#160; This allows us to definitively specify whether we have a value or not.&#160; Oh great you say, another version of null.&#160; Not quite, as sometimes null can be a value…&#160; More to the point, we can have a universal solution to having a value without having to resort to the Nullable&lt;T&gt; or reference type null-ness nonsense.&#160; Simply put, the Option type is no more than the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">type</span><span style="color: #000000"> Option</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">a&gt; =</span><span style="color: #800000">
</span><span style="color: #000000">  </span><span style="color: #000000">|</span><span style="color: #000000"> Some </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #800000">'</span><span style="color: #800000">a</span><span style="color: #800000">
</span><span style="color: #000000">  </span><span style="color: #000000">|</span><span style="color: #000000"> None</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>You’ll notice two constructors for the Option type, the Some which takes a value, and the None which takes no parameters.&#160; Now, using this to extend the Dictionary class much like the F# Map class, we can add a function which returns an Option type whether we have a value or not.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">type</span><span style="color: #000000"> System.Collections.Generic.Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #800000">'</span><span style="color: #800000">k,</span><span style="color: #800000">'</span><span style="color: #000000">v</span><span style="color: #000000">&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">with</span><span style="color: #000000">
  </span><span style="color: #0000FF">member</span><span style="color: #000000"> this.Lookup(k:</span><span style="color: #800000">'</span><span style="color: #800000">k) =</span><span style="color: #800000">
</span><span style="color: #000000">    </span><span style="color: #0000FF">match</span><span style="color: #000000"> this.TryGetValue(k) </span><span style="color: #0000FF">with</span><span style="color: #000000">
    </span><span style="color: #000000">|</span><span style="color: #000000"> (</span><span style="color: #0000FF">true</span><span style="color: #000000"> , value) </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> Some value
    </span><span style="color: #000000">|</span><span style="color: #000000"> (</span><span style="color: #0000FF">false</span><span style="color: #000000">, _    ) </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> None</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Then we can rewrite our memoize function to utilize this in a cleaner fashion using the Option type for pattern matching purposes to show our true intentions of whether we have a value or not.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">let</span><span style="color: #000000"> memoize f </span><span style="color: #000000">=</span><span style="color: #000000">
  </span><span style="color: #0000FF">let</span><span style="color: #000000"> t </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> Dictionary</span><span style="color: #000000">&lt;</span><span style="color: #000000">_,_</span><span style="color: #000000">&gt;</span><span style="color: #000000">()
  </span><span style="color: #0000FF">fun</span><span style="color: #000000"> n </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">
    </span><span style="color: #0000FF">match</span><span style="color: #000000"> t.Lookup(n) </span><span style="color: #0000FF">with</span><span style="color: #000000">
    </span><span style="color: #000000">|</span><span style="color: #000000"> Some v </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000"> v
    </span><span style="color: #000000">|</span><span style="color: #000000"> None   </span><span style="color: #0000FF">-&gt;</span><span style="color: #000000">
        </span><span style="color: #0000FF">let</span><span style="color: #000000"> res </span><span style="color: #000000">=</span><span style="color: #000000"> f n
        t.Add(n, res)
        res</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Much cleaner and shows better intent on our part.</p>
<h2>Conclusion</h2>
<p>How far do we take this?&#160; After all, making full functions everywhere sometimes isn’t feasible as we want to constrain our system.&#160; Adding both partial and full implementations might just clutter up our entire API.&#160; With this comes balance, but there are certainly places where this comes into play such as parsing values, querying values from collections and so on.&#160; Could Code Contracts in .NET 4.0 help us here in terms of statically verifying that we’re not failing on a chained partial function?&#160; We’re not quite finished here with this discussion as I’ve yet to cover the many values of null.</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/f/" title="View all posts in F#" rel="category tag">F#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/functional-programming/" title="View all posts in Functional Programming" rel="category tag">Functional Programming</a>, <a href="http://codebetter.com/matthewpodwysocki/category/haskell/" title="View all posts in Haskell" rel="category tag">Haskell</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2009/06/24/providing-safe-alternatives/" title="Permalink to Providing Safe Alternatives" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2009/06/24/providing-safe-alternatives/feed/" title="Comments RSS to Providing Safe Alternatives" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-152 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2009/06/20/f-async-running-with-continuation-scissors/" rel="prev"><span class="meta-nav">&larr;</span> F# – Async Running with Continuation Scissors</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2009/06/26/the-anti-for-campaign/" rel="next">The “Anti-For” Campaign <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
					<li id="dsq-comment-356">
					<div id="dsq-comment-header-356" class="dsq-comment-header">
						<cite id="dsq-cite-356">
	http://www.commongenius.com							<span id="dsq-author-user-356">David Nelson</span>
							</cite>
					</div>
					<div id="dsq-comment-body-356" class="dsq-comment-body">
						<div id="dsq-comment-message-356" class="dsq-comment-message"><p>After reading your explanation of Option , I still say &#8220;Oh great, another version of null.&#8221; I can see how, if references were non-null by default and Nullable<t> didn&#8217;t already exist, Option might be a cleaner way to express the concept. But given that those mechanisms already exist, and we can&#8217;t get rid of them, adding yet another way to express the same concept seems to do more harm than good.</p>
<p>Making match work with Nullable</t><t> would have made F# more consistent with the rest of the framework.</t></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-357">
					<div id="dsq-comment-header-357" class="dsq-comment-header">
						<cite id="dsq-cite-357">
	http://shadowcoding.blogspot.com							<span id="dsq-author-user-357">Erik</span>
							</cite>
					</div>
					<div id="dsq-comment-body-357" class="dsq-comment-body">
						<div id="dsq-comment-message-357" class="dsq-comment-message"><p>@David &#8211; except for the cases where &#8216;null&#8217; is a valid value. &#8216;None&#8217; is never a valid value in any context, except for determining the presence of some other value.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-358">
					<div id="dsq-comment-header-358" class="dsq-comment-header">
						<cite id="dsq-cite-358">
	http://codebetter.com/members/Matthew.Podwysocki/default.aspx							<span id="dsq-author-user-358">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-358" class="dsq-comment-body">
						<div id="dsq-comment-message-358" class="dsq-comment-message"><p>@David</p>
<p>Perhaps I&#8217;ll go further into why I think that even having to differentiate between Nullable and then a reference is just broken.  Just as well, a None can never be mistaken for a real value, whereas a null can, and that&#8217;s where the real power is.</p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-359">
					<div id="dsq-comment-header-359" class="dsq-comment-header">
						<cite id="dsq-cite-359">
	http://www.commongenius.com							<span id="dsq-author-user-359">David Nelson</span>
							</cite>
					</div>
					<div id="dsq-comment-body-359" class="dsq-comment-body">
						<div id="dsq-comment-message-359" class="dsq-comment-message"><p>&#8220;&#8230;having to differentiate between Nullable and then a reference is just broken.&#8221;</p>
<p>In C# you don&#8217;t have to differentiate between them. You can compare a Nullable to null just like you can with a reference.</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-360">
					<div id="dsq-comment-header-360" class="dsq-comment-header">
						<cite id="dsq-cite-360">
	http://codebetter.com/members/Matthew.Podwysocki/default.aspx							<span id="dsq-author-user-360">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-360" class="dsq-comment-body">
						<div id="dsq-comment-message-360" class="dsq-comment-message"><p>@David,</p>
<p>The problem is that you have to explicitly say what is an invalid value type value whereas using an Option type is explicit. Sure, they added Nullable, but that then differs on how reference types are done.  Why not use a single paradigm for nullable values?</p>
<p>Matt</p>
</div>
					</div>
				</li>
					<li id="dsq-comment-361">
					<div id="dsq-comment-header-361" class="dsq-comment-header">
						<cite id="dsq-cite-361">
	http://www.commongenius.com							<span id="dsq-author-user-361">David Nelson</span>
							</cite>
					</div>
					<div id="dsq-comment-body-361" class="dsq-comment-body">
						<div id="dsq-comment-message-361" class="dsq-comment-message"><p>@Matthew</p>
<p>I don&#8217;t understand your statement. What is the semantic difference between Nullable<int> and Option</int><int>?</p>
<p>And yes, having a single paradigm for nullable values would have been preferable. I think reference types should have been non-nullable by default from the beginning. But they aren&#8217;t, and we can&#8217;t change that. So the question is how do we continue to move forward in the state we are in with the least amount of confusion and the greatest productivity possible? Adding yet another paradigm for nullable values is not productive in my opinion.</int></p>
</div>
					</div>
				</li>
					<li id="dsq-comment-362">
					<div id="dsq-comment-header-362" class="dsq-comment-header">
						<cite id="dsq-cite-362">
	http://codebetter.com/members/Matthew.Podwysocki/default.aspx							<span id="dsq-author-user-362">Matthew.Podwysocki</span>
							</cite>
					</div>
					<div id="dsq-comment-body-362" class="dsq-comment-body">
						<div id="dsq-comment-message-362" class="dsq-comment-message"><p>@David,</p>
<p>I agree that it should be non-null by default and languages such as Spec# tried to address such an issue which allowed you to specify by default that all reference types were non nullable.  </p>
<p>What&#8217;s interesting though is F#&#8217;s take on this which is that on F# objects, null is not defined as a state, unless you go well out of your way to specify that it is the unchecked default value.  That&#8217;s how I think it should have been done.</p>
<p>What I&#8217;m talking about here though is making it explicit about what your return type is.  Could there be a failure?  What happens if you find nothing?  Null, an exception?  Something such as Option makes such a thing explicit and that&#8217;s why I think going forward, it is a viable solution, but for languages such as F# where pattern matching is a first class citizen and not so much with C#.</p>
<p>Matt</p>
</div>
					</div>
				</li>
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/matthewpodwysocki/2009/06/24/providing-safe-alternatives/ ';
	var disqus_identifier = '152 /blogs/matthew.podwysocki/archive/2009/06/24/providing-safe-alternatives.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'matthewpodwysocki';
	var disqus_title = "Providing Safe Alternatives";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=152');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/matthewpodwysocki/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2009\/06\/24\/providing-safe-alternatives\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter//third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.276 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-24 20:10:46 -->
<!-- super cache -->