<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Going Interactive with the Reactive Extensions | Matthew Podwysocki</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/matthewpodwysocki/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/matthewpodwysocki/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/matthewpodwysocki/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Matthew Podwysocki' href='http://codebetter.com/matthewpodwysocki/' />
<link rel='start' title='let Matt = CodeBetter + 1' href='http://codebetter.com/matthewpodwysocki/2008/04/24/let-matt-codebetter-1/' />
<link rel='prev' title='Introduction to the Reactive Framework Part V' href='http://codebetter.com/matthewpodwysocki/2009/11/18/introduction-to-the-reactive-framework-part-v/' />
<link rel='next' title='Going Hybrid &#8211; Implementing a Shopping Cart in F#' href='http://codebetter.com/matthewpodwysocki/2009/12/14/going-hybrid-implementing-a-shopping-cart-in-f/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel='canonical' href='http://codebetter.com/matthewpodwysocki/2009/11/25/going-interactive-with-the-reactive-extensions/' />
<link rel='shortlink' href='http://codebetter.com/matthewpodwysocki/?p=187' />
<meta name="_awb_version" content="2.0.3" /><link rel="stylesheet" href="http://codebetter.com/matthewpodwysocki/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.6" type="text/css" media="screen" /><link rel="stylesheet" href="http://disqus.com/stylesheets/matthewpodwysocki/disqus.css?v=2.0" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/matthewpodwysocki/wp-content/uploads/spacker-cache/a8046d2f1fc1c08af413701218a11c1d.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content" class="container_12">
			<div id="main" class="grid_8">


				<div id="post-187" class="post-187 post type-post status-publish format-standard hentry category-c category-event-based-porgramming category-reactive-framework">
					<h1 class="entry-title">Going Interactive with the Reactive Extensions</h1>

					<div class="entry-meta">
						<span class="meta-prep meta-prep-author">Posted by </span>
						<span class="author vcard"><a class="url fn n" href="http://codebetter.com/matthewpodwysocki/author/matthewpodwysocki/" title="View all posts by matthewpodwysocki">matthewpodwysocki</a></span>
						<span class="meta-sep"> on  </span>
						<a href="http://codebetter.com/matthewpodwysocki/2009/11/25/going-interactive-with-the-reactive-extensions/" title="11:41 pm" rel="bookmark"><span class="entry-date">November 25, 2009</span></a>
											</div><!-- .entry-meta -->

					<div class="entry-content">
						<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/matthewpodwysocki/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/matthewpodwysocki/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/matthewpodwysocki/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div><p>Lately in my series on the Reactive Extensions, you’ll have noticed I focused quite a bit on the IObservable&lt;T&gt; and IObserver interfaces as well as the extensions methods that are included.&#160; There is one thing, however, that might have been missed with the release of the Reactive Extensions is the inclusion of System.Interactive.dll.&#160; The idea behind this is to include many of the extension methods that are available to IObservable&lt;T&gt; and port them to work on the IEnumerable&lt;T&gt; interface.</p>
<p>Before we get started again, there has been a lot of good stuff posted on Channel 9 in regards to Rx:</p>
<ul>
<li><a href="http://channel9.msdn.com/posts/Charles/Wes-Dyer-and-Stephen-Toub-Rx-and-Px-Working-Together/">Rx and Px – Working Together</a> </li>
<li><a href="http://channel9.msdn.com/posts/J.Van.Gogh/Reactive-Extensions-API-in-depth-Until-and-WaitUntil/">Reactive Extensions API in depth: Until and WaitUntil</a> </li>
<li><a href="http://channel9.msdn.com/posts/J.Van.Gogh/Reactive-Extensions-API-in-depth-SelectMany/">Reactive Extensions API in depth: SelectMany</a> </li>
<li><a href="http://channel9.msdn.com/posts/J.Van.Gogh/Reactive-Extensions-API-in-depth-Primitives/">Reactive Extensions API in depth: Primitives</a> </li>
<li><a href="http://channel9.msdn.com/posts/J.Van.Gogh/Reactive-Extensions-API-in-depth-Contract/">Reactive Extensions API in depth: Contract</a> </li>
</ul>
<p>Each of those videos are well worth watching to get an idea how things are done underneath the covers.&#160; Now, let’s get caught up to where we are today:</p>
<ul>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2009/10/19/f-october-2009-ctp-beta2-f-rx-together-at-last.aspx">Part I – Introduction</a> </li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2009/11/03/introduction-to-the-reactive-framework-part-ii.aspx">Part II – Duality of Enumerable/Observable</a> </li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2009/11/12/introduction-to-the-reactive-framework-part-iii.aspx">Part III – From Events to Observables</a> </li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2009/11/15/introduction-to-the-reactive-framework-part-iv.aspx">Part IV – From Enumerables to Observables</a> </li>
<li><a href="http://codebetter.com/blogs/matthew.podwysocki/archive/2009/11/18/introduction-to-the-reactive-framework-part-v.aspx">Part V – From Asynchronous to Observables</a> </li>
</ul>
<h2>Exploring Interactive</h2>
<p>Early on in this series, we covered that when talking about the Reactive Extensions, we were really talking about the traditional interactive programming in the form of the Iterator Pattern and reactive programming with the Observer Pattern.&#160; Erik and his team went about to implement most of the LINQ operators from LINQ to objects onto the Reactive Extensions, but along the way found there were interesting ones that could immediately apply to IObservable&lt;T&gt; instances that had not been implemented yet on IEnumerable&lt;T&gt;.&#160; So, then they decided, to work backwards and take the implementations of these new extension methods on IObservable&lt;T&gt; and apply them to IEnumerable&lt;T&gt;.&#160; Let’s start exploring some of these below in the EnumerableEx class.</p>
<h3>Amb</h3>
<p><a href="http://www-formal.stanford.edu/jmc/basis1/node7.html#SECTION00025000000000000000">McCarthy’s Ambiguous Function</a> which returns the first to react.&#160; This takes it’s name from John McCarthy, the creator of Lisp from a 1963 paper entitled, <a href="http://www-formal.stanford.edu/jmc/basis1/basis1.html">“A Basis for a Mathematical Theory of Computation”</a>.&#160; In the case of an IEnumerable&lt;T&gt;, the winner would be the first to react from a call to MoveNext().&#160; Let’s look at the signatures of the Amb overloads:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Amb</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;&gt;</span><span style="color: #000000"> sources
)

</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Amb</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    </span><span style="color: #0000FF">params</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">[] sources
)

</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Amb</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> leftSource,
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> rightSource
)</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>What this tells us is that it can take any number of IEnumerable&lt;T&gt; instances, either a sequence of sequences, many sequences or just a left and a right.&#160; Let’s try a simple example using a random number generator to simulate a non-deterministic return.&#160; When I run this example, I cannot predict which might return first.&#160; </p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">T</span><span style="color: #000000">&gt;</span><span style="color: #000000"> CreateRandomEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">T</span><span style="color: #000000">&gt;</span><span style="color: #000000">(T value)
{
    </span><span style="color: #0000FF">var</span><span style="color: #000000"> random </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> Random();
    Thread.Sleep(random.Next(</span><span style="color: #800080">1</span><span style="color: #000000">, </span><span style="color: #800080">10</span><span style="color: #000000">));
    </span><span style="color: #0000FF">yield</span><span style="color: #000000"> </span><span style="color: #0000FF">return</span><span style="color: #000000"> value;
}

IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000"> enumerable1 </span><span style="color: #000000">=</span><span style="color: #000000"> CreateRandomEnumerable(</span><span style="color: #800000">"</span><span style="color: #800000">foo</span><span style="color: #800000">"</span><span style="color: #000000">);
IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000"> enumerable2 </span><span style="color: #000000">=</span><span style="color: #000000"> CreateRandomEnumerable(</span><span style="color: #800000">"</span><span style="color: #800000">bar</span><span style="color: #800000">"</span><span style="color: #000000">);
IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000"> enumerable3 </span><span style="color: #000000">=</span><span style="color: #000000"> enumerable1.Amb(enumerable2);
enumerable3.Run(Console.WriteLine);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Like it’s original implementation in Lisp, this has quite a few implications for Artificial Intelligence, Physics and so on, but even such things as traversing networks and which packet can arrive first.</p>
<h3>Catch</h3>
<p>The Catch function allows you to iterate a collection and then terminate based upon an exception.&#160; This also has an overload which specifies which exception you should catch as well as any compensation handler you wish to fire.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Catch</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;&gt;</span><span style="color: #000000"> sources
)

</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Catch</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource, TException</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> source,
    Func</span><span style="color: #000000">&lt;</span><span style="color: #000000">TException, IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;&gt;</span><span style="color: #000000"> handler
)
</span><span style="color: #0000FF">where</span><span style="color: #000000"> TException : Exception</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>In this instance, we have an IEnumerable instance which yield “foo” and then will throw an exception.&#160; Below we will compensate for that exception and return an empty list when that happens.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000"> ThrowingEnumerable()
{
    </span><span style="color: #0000FF">yield</span><span style="color: #000000"> </span><span style="color: #0000FF">return</span><span style="color: #000000"> </span><span style="color: #800000">"</span><span style="color: #800000">foo</span><span style="color: #800000">"</span><span style="color: #000000">;
    </span><span style="color: #0000FF">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> InvalidOperationException();
}

</span><span style="color: #0000FF">var</span><span style="color: #000000"> caughtEnumerable </span><span style="color: #000000">=</span><span style="color: #000000"> ThrowingEnumerable()
    .Catch</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">, InvalidOperationException</span><span style="color: #000000">&gt;</span><span style="color: #000000">(exn </span><span style="color: #000000">=&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #0000FF">string</span><span style="color: #000000">[] {});
caughtEnumerable.Run(Console.WriteLine); </span><span style="color: #008000">//</span><span style="color: #008000"> Yields "foo"</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<h3>Concat</h3>
<p>This method concatenates a sequences together into a single sequence.&#160; This can either take a sequence of sequences or any number of sequence of sequences to to produce that single sequence.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Concat</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;&gt;</span><span style="color: #000000"> sources
)

</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Concat</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    </span><span style="color: #0000FF">params</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">[] sources
)</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>For example, we can have an array of arrays which holds three values each and then concatenate then together to render the values 1 through 9.</p>
</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">var</span><span style="color: #000000"> sequence </span><span style="color: #000000">=</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000">[] {</span><span style="color: #0000FF">new</span><span style="color: #000000">[] {</span><span style="color: #800080">1</span><span style="color: #000000">, </span><span style="color: #800080">2</span><span style="color: #000000">, </span><span style="color: #800080">3</span><span style="color: #000000">}, </span><span style="color: #0000FF">new</span><span style="color: #000000">[] {</span><span style="color: #800080">4</span><span style="color: #000000">, </span><span style="color: #800080">5</span><span style="color: #000000">, </span><span style="color: #800080">6</span><span style="color: #000000">}, </span><span style="color: #0000FF">new</span><span style="color: #000000">[] {</span><span style="color: #800080">7</span><span style="color: #000000">, </span><span style="color: #800080">8</span><span style="color: #000000">, </span><span style="color: #800080">9</span><span style="color: #000000">}};
IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">&gt;</span><span style="color: #000000"> concatSequence </span><span style="color: #000000">=</span><span style="color: #000000"> sequence.Concat();

concatSequence.Run(Console.WriteLine);
</span><span style="color: #008000">//</span><span style="color: #008000"> Yields 1,2,3,4,5,6,7,8,9</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
</p>
<h3>Defer</h3>
<p>This method defers the creation of the sequence through a factory function which gets called when you start enumerating.&#160; In the past, we didn’t have a way out of the box to defer potentially expensive operations such as enumerating a directory for files.&#160; We used to write something like this.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">string</span><span style="color: #000000">[] files </span><span style="color: #000000">=</span><span style="color: #000000"> Directory.GetFiles(</span><span style="color: #800000">"</span><span style="color: #800000">SomeDirectory</span><span style="color: #800000">"</span><span style="color: #000000">);
</span><span style="color: #0000FF">foreach</span><span style="color: #000000">(</span><span style="color: #0000FF">string</span><span style="color: #000000"> file </span><span style="color: #0000FF">in</span><span style="color: #000000"> files)
    Console.WriteLine(file);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>That was ok, if you didn’t mind the blocking operation up front which could be significant and we took a hit even though we didn’t start to iterate the collection.&#160; We now have the Defer method which takes a function which takes no arguments and returns an IEnumerable&lt;T&gt;.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> Defer</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    Func</span><span style="color: #000000">&lt;</span><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;&gt;</span><span style="color: #000000"> enumerableFactory
)</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now, instead of the eager evaluation we had above, we can defer such creation of this string array until we actually enumerate it such as the following:</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">string</span><span style="color: #000000">&gt;</span><span style="color: #000000"> deferredFiles </span><span style="color: #000000">=</span><span style="color: #000000">
    EnumerableEx.Defer(() </span><span style="color: #000000">=&gt;</span><span style="color: #000000"> Directory.GetFiles(</span><span style="color: #800000">"</span><span style="color: #800000">SomeDirectory</span><span style="color: #800000">"</span><span style="color: #000000">));
deferredFiles.Run(Console.WriteLine);</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Lazy evaluation in this scenario can be quite helpful to defer operations until we need them at the last responsible moment.</p>
<h2>Run</h2>
<p>You’ve seen this method being used, so I might as well introduce it already.&#160; We’ve seen this extension method by any number of names, whether it be ForEach, Each, Iter, etc.&#160; The basic intent is to evaluate each item in the enumerable, optionally with an Action&lt;T&gt; to apply to each item as it iterates.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> Run</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> source
)

</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> Run</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000">(
    IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> source,
    Action</span><span style="color: #000000">&lt;</span><span style="color: #000000">TSource</span><span style="color: #000000">&gt;</span><span style="color: #000000"> action
)</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>In this instance, we’ll create a list from 1 to 10 and then write each one out to the Console.&#160; Because Console.WriteLine can take a single argument, we can convert a simple lambda statement to a method group.</p>
<div style="padding-bottom: 0px;margin: 0px;padding-left: 0px;padding-right: 0px;float: none;padding-top: 0px" class="wlWriterEditableSmartContent">
<pre style="background-color:#FFFFFF;overflow: auto"><span style="color: #000000">IEnumerable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">int</span><span style="color: #000000">&gt;</span><span style="color: #000000"> range </span><span style="color: #000000">=</span><span style="color: #000000"> Enumerable.Range(</span><span style="color: #800080">1</span><span style="color: #000000">, </span><span style="color: #800080">10</span><span style="color: #000000">);
range.Run(Console.WriteLine); </span><span style="color: #008000">//</span><span style="color: #008000"> prints each number</span></pre>
<p><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Let’s stop here for the time being as we have a lot of others to cover before we turn our attention once again from the interactive to the reactive side of things.</p>
<h2>Conclusion</h2>
<p>As I’ve stated before, the Reactive Extensions for .NET us the ability to harness reactive programming and treat events as the first class citizens they should have been using LINQ expressions and other standard LINQ combinators.&#160; Next, we’ll continue looking at the interactive extensions that ship with Rx and go into more interesting scenarios.</p>
											</div><!-- .entry-content -->


					<div class="entry-utility">
					This entry was posted in <a href="http://codebetter.com/matthewpodwysocki/category/c/" title="View all posts in C#" rel="category tag">C#</a>, <a href="http://codebetter.com/matthewpodwysocki/category/event-based-porgramming/" title="View all posts in Event-based Porgramming" rel="category tag">Event-based Porgramming</a>, <a href="http://codebetter.com/matthewpodwysocki/category/reactive-framework/" title="View all posts in Reactive Framework" rel="category tag">Reactive Framework</a>. Bookmark the <a href="http://codebetter.com/matthewpodwysocki/2009/11/25/going-interactive-with-the-reactive-extensions/" title="Permalink to Going Interactive with the Reactive Extensions" rel="bookmark">permalink</a>. Follow any comments here with the <a href="http://codebetter.com/matthewpodwysocki/2009/11/25/going-interactive-with-the-reactive-extensions/feed/" title="Comments RSS to Going Interactive with the Reactive Extensions" rel="alternate" type="application/rss+xml">RSS feed for this post</a>.
					</div><!-- .entry-utility -->
				</div><!-- #post-187 -->

				<div id="nav-below" class="navigation">
					<div class="nav-previous"><a href="http://codebetter.com/matthewpodwysocki/2009/11/18/introduction-to-the-reactive-framework-part-v/" rel="prev"><span class="meta-nav">&larr;</span> Introduction to the Reactive Framework Part V</a></div>
					<div class="nav-next"><a href="http://codebetter.com/matthewpodwysocki/2009/12/14/going-hybrid-implementing-a-shopping-cart-in-f/" rel="next">Going Hybrid &#8211; Implementing a Shopping Cart in F# <span class="meta-nav">&rarr;</span></a></div>
				</div><!-- #nav-below -->

				
<div id="disqus_thread">
					<div id="dsq-content">
			<ul id="dsq-comments">
				</ul>
		</div>
	</div>

<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<script type="text/javascript">
/* <![CDATA[ */
	var disqus_url = 'http://codebetter.com/matthewpodwysocki/2009/11/25/going-interactive-with-the-reactive-extensions/ ';
	var disqus_identifier = '187 /blogs/matthew.podwysocki/archive/2009/11/25/going-interactive-with-the-reactive-extensions.aspx';
	var disqus_container_id = 'disqus_thread';
	var disqus_domain = 'disqus.com';
	var disqus_shortname = 'matthewpodwysocki';
	var disqus_title = "Going Interactive with the Reactive Extensions";
		var disqus_config = function () {
	    var config = this; // Access to the config object

	    /* 
	       All currently supported events:
	        * preData — fires just before we request for initial data
	        * preInit - fires after we get initial data but before we load any dependencies
	        * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
	        * afterRender - fires when template is rendered but before we show it
	        * onReady - everything is done
	     */

		config.callbacks.preData.push(function() {
			// clear out the container (its filled for SEO/legacy purposes)
			document.getElementById(disqus_container_id).innerHTML = '';
		});
				config.callbacks.onReady.push(function() {
			// sync comments in the background so we don't block the page
			DISQUS.request.get('?cf_action=sync_comments&post_id=187');
		});
					};
	var facebookXdReceiverPath = 'http://codebetter.com/matthewpodwysocki/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
	var DsqLocal = {
		'trackbacks': [
		],
		'trackback_url': "http:\/\/codebetter.com\/matthewpodwysocki\/2009\/11\/25\/going-interactive-with-the-reactive-extensions\/trackback\/"	};
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript';
	dsq.async = true;
	dsq.src = 'http://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.61';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>

		</div><!-- #main -->
			<div id="sidebar" class="grid_4">

		<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #container -->
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter//third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.265 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-18 16:14:24 -->
<!-- super cache -->