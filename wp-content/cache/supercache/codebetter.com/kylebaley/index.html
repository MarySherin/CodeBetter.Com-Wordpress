<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta charset="UTF-8" />
    <title>Kyle Baley | CodeBetter.Com &#8211; Stuff you need to Code Better!</title>
	<link rel="profile" href="http://gmpg.org/xfn/11" />
	
	<link href="http://feeds.feedburner.com/CodeBetter" title="CodeBetter.Com &raquo; Feed" type="application/rss+xml" rel="alternate">
	
		<link rel="pingback" href="http://codebetter.com/kylebaley/xmlrpc.php" />
	                <link rel="stylesheet" href="http://codebetter.com/kylebaley/wp-content/uploads/spacker-cache/ea73517eb74a545f51c376487c94dc9f.css" type="text/css" media="all" /><!-- Is Cache! -->
                <script type='text/javascript' src='http://codebetter.com/kylebaley/wp-includes/js/l10n.js?ver=20101110'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://codebetter.com/kylebaley/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://codebetter.com/kylebaley/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='Kyle Baley' href='http://codebetter.com/kylebaley/' />
<meta name="generator" content="WordPress 3.1-beta1-16732" />
<link rel="stylesheet" href="http://codebetter.com/kylebaley/wp-content/plugins/digg-digg/include/../css/diggdigg-style.css?ver=4.5.0.7" type="text/css" media="screen" /><meta id="syntaxhighlighteranchor" name="syntaxhighlighter-version" content="3.1.1" />
                <script type="text/javascript" src="http://codebetter.com/kylebaley/wp-content/uploads/spacker-cache/3e52f3b292da95601a0d3fbd9775ac0e.js">/*Is Cache!*/</script>
                	<style type="text/css">body { padding-top:0px !important; } html { margin-top: 0px !important; }</style>

</head>

<body>

			
		<div class="container_12 ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">			
			<ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
				<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1">CodeBetter.Com</a></li>
				<li class="ui-state-default ui-corner-top"><a href="http://devlicio.us">Devlicio.Us</a></li>				
				<div id="top-search">
				<form action="http://codebetter.com/globalsearch/" id="cse-search-box">
  <div>
   <fieldset id="search">
		<input type="hidden" name="cx" value="005178204031477491434:2bg5jtwgsfe" />
		<input type="hidden" name="cof" value="FORID:9" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text"  class="text-input" id="s" name="q" size="31" />
		<input type="image" src="/wp-content/themes/codebetter/images/search-img.png" class="form-button" id="searchsubmit" value="GO" name="">				   	
	</fieldset>
  </div>
</form>
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en&sitesearch=true"></script>
				</div>				
			</ul><div id="ui-tabs-1" class="ui-tabs-panel ui-widget-content ui-corner-bottom"></div><div id="ui-tabs-2" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"></div>
		</div>
			
		<div id="main" class="container_12">
		
			<div id="logo" class="grid_3"><a href="/" title="CodeBetter.Com - Stuff you need to Code Better!"><image src="/wp-content/themes/codebetter/images/codebetter_logo.png" height="48" width="223"></image></a></div>
			<div id="ad_leaderboard" class="grid_9">			</div>
			
			<div id="globalNav" class="grid_12">
				<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=EFEFEF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
				</ul>
								
			</div><!-- end div#globalNav.container_12 -->				
	
		<div id="content">
			<div id="main" class="grid_8">
			<div id="greet_block"><noscript><div class="greet_block wpgb_cornered"><div class="greet_text"><div class="greet_image"><a href="http://codebetter.com/kylebaley/feed/rss/"  rel="nofollow"><img src="http://codebetter.com/kylebaley/wp-content/plugins/wp-greet-box/images/rss_icon.png" alt="WP Greet Box icon"/></a></div>Hello there! If you are new here, you might want to <a href="http://codebetter.com/kylebaley/feed/rss/" rel="nofollow"><strong>subscribe to the RSS feed</strong></a> for updates on this topic.<div style="clear:both"></div><div class="greet_block_powered_by">Powered by <a href="http://omninoggin.com/projects/wordpress-plugins/wp-greet-box-wordpress-plugin/" title="WP Greet Box WordPress Plugin" style="text-decoration:none;">WP Greet Box</a> <a href="http://omninoggin.com/" title="WordPress Plugin" style="text-decoration:none;">WordPress Plugin</a></div><div style="clear:both"></div></div></div></noscript></div>			
	<div id="nav-above" class="navigation">
		<div class="nav-next"><a href="?page=1" > Next Page &raquo;</a></div>
		
	</div><!-- #nav-above -->


				
			<div id="post-190" class="post-190 post type-post status-publish format-standard hentry category-asp-net-mvc category-gwt">
			<h2 class="entry-title"><a href="http://codebetter.com/kylebaley/2010/10/21/command-pattern-architecture-or-how-to-do-it-a-little-at-a-time/" title="Permalink to Command pattern architecture, or “How to do it a little at a time”" rel="bookmark">Command pattern architecture, or “How to do it a little at a time”</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/kylebaley/2010/10/21/command-pattern-architecture-or-how-to-do-it-a-little-at-a-time/" title="3:14 am" rel="bookmark"><span class="entry-date">October 21, 2010</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley" title="View all posts by Kyle Baley">Kyle Baley</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p>In the comments of <a href="http://codebetter.com/blogs/kyle.baley/archive/2010/09/06/relationships-in-bigtable-or-how-to-put-extra-effort-into-being-lazy.aspx">a recent post</a>, some people pointed out some questionable practices:</p>
<ul>
<li>Modifying the data access when I should be modifying the business model </li>
<li>Using a NoSQL data store when a relational one would be more appropriate for slicing and dicing data </li>
<li>Changing the business model to accommodate the UI </li>
</ul>
<p>Will ignore the second point for now. I’ve <a href="http://codebetter.com/blogs/kyle.baley/archive/2010/02/19/bigtable-concerns-or-how-to-put-your-trust-in-the-cloud.aspx">covered part of the concern</a> already anyway.</p>
<p>For the other two, it’s worth explaining the architecture that I think Google Web Toolkit encourages.</p>
<p>Both points mention “business model” and I’ve probably called it that on occasion as well. I’ve never liked using the term because I don’t think I’ve worked on a project that’s done any form of DDD except use repositories. My domain is usually anemic because there isn’t a lot of business logic in a CRUD app. Unless you count the many forms of GetFullName I’ve written on a customer object.</p>
<p>But now I’m in an app that has real business logic. “Find next available appointment”, for example. Or better yet, “find optimal appointment time” for the ominous “smart scheduling” feature. Seems like a good candidate for a rich domain model. Except that our “domain” is still all DTOs. </p>
<p>I’m fine with this because it works for our architecture. In a more traditional .NET web app, I would probably define a proper domain model with behaviours and such. On the front end, I’d diligently translate between it and screen-specific DTOs or JSON objects or what-have-you.</p>
<p>We’re using GWT. It’s *all* JSON. And it’s not even JSON we control. (We could control it but we choose not to and use the built-in GWT RPC translation.) Every single action is an AJAX call launched from a button, or a link, or a drag and drop. Nothing is screen-specific because presenting a single screen is too big a concept. Instead, we replace individual pieces of it as necessary and make individual requests for the corresponding data for those pieces.</p>
<p>So we’ve adopted an architecture based around what I have been calling (possibly erroneously, so you may want to look it up) the command pattern. This sounds like a grand architectural decision from a big software mucky-much but really, this architecture is nigh impossible to avoid with GWT applications. The implementation is courtesy of <a href="http://code.google.com/p/gwt-platform/">gwt-platform</a>, which also handles our MVP structure as well. </p>
<p>Here is a 998-word picture of the process:</p>
<p>&#160;</p>
<p><a href="http://codebetter.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/kyle.baley/image_5F00_506C8EE9.png"><img style="border-bottom: 0px;border-left: 0px;border-top: 0px;border-right: 0px" border="0" alt="image" src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/kyle/baley/image_thumb_16111908.png?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919787601&amp;Signature=EPrjH3dMtq77L56mcKWIsFebqFw%3d" width="690" height="242" /></a> </p>
<p>&#160;</p>
<p>Notice there are no domain objects anywhere. That’s because it’s my diagram and I’ve specifically doctored it so that there are no domain objects.</p>
<p>I jest, slightly. There are no domain objects because they aren’t interesting. All the real magic happens in the “Process command” step. This is where we examine the data we’ve been given, do some stuff like save to a data store or calculate a person’s likelihood of arrest before the age of 18 or some other piece of logic befitting our “domain”.</p>
<p>The “data we’ve been given” is the command, which is a fancy word for a specialized DTO. For example, if we want to search for a suitable liquor store, we create a FindClient command and populate the SearchText proper—…whoops, this is Java. I mean we call the setSearchText method. The server matches, through dependency injection, the FindLiquorStore command with the FindLiquorStoreHandler and executes it.</p>
<p>After doing whatever magic needs to be done, we create a result, which is another specialized DTO. It has a getResults method which returns a list of LiquorStore “domain” objects.</p>
<p>With this architecture, the domain objects are little more than property bags. All the real work is done in handlers. To summarize the objects used in our “find liquor store” example:</p>
<table border="0" cellspacing="0" cellpadding="2" width="774">
<tbody>
<tr>
<td valign="top" width="200">FindLiquorStore</td>
<td valign="top" width="572">Command object. Class name helps determine which handler to run. Property accessors store relevant data needed to execute the command</td>
</tr>
<tr>
<td valign="top" width="200">FindLiquorStoreHandler</td>
<td valign="top" width="572">Handler that examines the data within the command and does whatever needs to be done with it. Also creates a result object and returns it.</td>
</tr>
<tr>
<td valign="top" width="200">FindLiquorStoreResult</td>
<td valign="top" width="572">Contains any data that the caller might be interested in after processing the command; in this case, a list of LiquorStore objects</td>
</tr>
<tr>
<td valign="top" width="200">LiquorStore</td>
<td valign="top" width="572">An “domain” object in the sense that it is called something that a business person might recognize</td>
</tr>
</tbody>
</table>
<p>Seems a lot of infrastructure but it’s not so far removed from MVC applications where a controller action takes parameters from a query string (or form), process it, then sends a model back to the view. The difference is we don’t do it at the page level with a model that contains a bunch of lookup data as well as the one piece of info we care about (notwithstanding <a href="http://mikehadlow.blogspot.com/2010/10/populating-drop-down-lists-in-aspnet.html">some interesting work in this area</a>).</p>
<p>This is more in line with the types of apps I’m building more often even using MVC. That is, the page loads with very little actual information on it and each section takes care of its own data. One section might load the client data, another the alcohol consumption stats for the staff, and another the customer satisfaction charts. Each of these would entail a separate AJAX call to a controller action that would likely return a JsonResult (or even more likely, a custom Json result so that I can avoid the serialization issues inherent with the native MVC JsonResult object).</p>
<p>This probably doesn’t necessarily obviate the need for a full-fledged domain model complete with all the behaviours and other keywords that I have no business pretending I know anything about. You can translate between DTOs and domain objects very easily these days. But given that the sole access to the application is through commands, I’m more inclined to leave everything as DTOs and have the handlers contain all our business logic.</p>
<p>Kyle the Commandeered</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/kylebaley/category/asp-net-mvc/" title="View all posts in ASP.NET MVC" rel="category">ASP.NET MVC</a>, <a href="http://codebetter.com/kylebaley/category/gwt/" title="View all posts in GWT" rel="category">GWT</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/kylebaley/2010/10/21/command-pattern-architecture-or-how-to-do-it-a-little-at-a-time/#respond" title="Comment on Command pattern architecture, or “How to do it a little at a time”"><span class="dsq-postid" rel="190 /blogs/kyle.baley/archive/2010/10/20/command-pattern-architecture-or-how-to-do-it-a-little-at-a-time.aspx">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-190 -->

		
						
			<div id="post-189" class="post-189 post type-post status-publish format-standard hentry category-bookedin">
			<h2 class="entry-title"><a href="http://codebetter.com/kylebaley/2010/10/04/release-management-or-how-to-de-version-your-app/" title="Permalink to Release management, or “How to de-version your app”" rel="bookmark">Release management, or “How to de-version your app”</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/kylebaley/2010/10/04/release-management-or-how-to-de-version-your-app/" title="9:18 pm" rel="bookmark"><span class="entry-date">October 4, 2010</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley" title="View all posts by Kyle Baley">Kyle Baley</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p><strong>Executive Summary: </strong>Through the use of anecdotes and a heavy dose of quotation marks, we analyze the traditional “beta/version 1” release cycle of our application and conclude that “version 1” doesn’t make much sense.</p>
<p>We had an interesting conversation the other day at <a href="http://bookedin.net/">BookedIN</a> on releases. A few weeks ago, we “released” a beta version of the application. But if you check the website now, there will be no mention of the word “beta”.</p>
<p>One of the things we have always tried to be cognizant of is our target user. We look to many companies and products for inspiration, such as 37 Signals and AgileZen. But they have a very different target market than we do. Users of Basecamp and AgileZen, we assume, are somewhat technically savvy.</p>
<p>We are targeting small business users, many of whom may not be familiar with the technical jargon that we’ve become accustomed to. It was for this reason that we did away with the word “beta” in our message in favour of “limited free trial” which, while not <em>exactly</em> the same thing, is more universally understood.</p>
<p>Now with the free trial released, our attention turns to “<strong><em>VERSION ONE</em></strong>”. That is, we decide which features we want to include in the ultimate premiere release of the product. Then we go away and try to get them all in before our mythical “release date”. Which is stupid and we considered this model for all of about 78 seconds.</p>
<p>The “go away” part was the first thing to get thrown out. This being a web application, there’s no reason to keep the current incarnation of the app as it is until version one is released. Very quickly, we decided that “beta” isn’t in fact a one-time release. It’s a period of time in which you are constantly fixing things and adding features. Once we finish a useful feature, we release it. Once we have all the features we want for version one, it’s ready to “leave beta”.</p>
<p>More recently, my friend and I had a discussion about timelines. We are highly motivated to have “version one” ready by year’s end for various reasons. So we set that as our deadline and made plans to discuss which features absolutely <em>had</em> to be included in that release.</p>
<p>Now, we are both very familiar with the Iron Triangle/Pewter Scale but all the same, we were both kind of surprised at how easy it was to fall into the common managerial trap: We HAVE to release by year’s end. All of these features HAVE to be included. And we can’t increase our budget or add people. Nor do we want to skimp on quality seeing as one reason for this venture was specifically so we won’t have to deal with the types of apps that are the result of, shall we say, a particular brand of hillbilly relationship.</p>
<p>After we realized the trap we were about to step into, the conversation changed slightly. What exactly was fixed? The budget, certainly. And, to our mind, the time frame. That is, we placed a high priority on releasing a paid version of the app by year’s end at the latest. Also, quality is not negotiable.</p>
<p>Which leaves, of course, scope as our sole source of flexibility. Once that was decided, we had a whole different notion of “version one” and versioning in particular. What <em>is</em> version one anyway? It’s the collection of features included in the first release of the product. And if that’s flexible, then why decide which ones have to be included in the first release?</p>
<p>Better yet, if the features to be included in version one are flexible, then maybe we can play with the release date a little. For example, instead of saying “we release on December 31, 2010”, why don’t we evaluate the app at regular intervals? So at the end of October, we look at what we have and decide “does this have value?” If not, we keep plugging away and in a couple of weeks, we’ll ask the question again. Once we get to the point where it *does* have value, we “release”. That is, we make it available to the public and start charging.</p>
<p>During this discussion, you’ll notice there’s no mention of the word “version”. There’s no “coming up in version 2”. Instead, we sort the stories we have by priority and start at the top. As they are completed, they are “released”. (Within reason, of course. From a marketing perspective, releasing a new feature every two weeks can be just as detrimental as not releasing any for three years.)</p>
<p>I don’t mind admitting this discussion got me a little giddy, not least because it means a potentially earlier release date than we had planned. It’s pretty liberating in some respects. There’s no looming deadline and it puts less pressure on the developers, neither of whom need this kind of pressure to prove their mettle. Instead, it puts more planning on my friend and I to plan things properly and make sure the important stuff is done first and not left until the last minute.</p>
<p><a href="http://orthocoders.com/">Amir Barylko</a> is a senior developer who is helping us maintain quality in our code. In his projects, he likes to always be in “release” mode. Which means we should always be working as if the application will be released at the end of the iteration. I hope I’m not twisting his meaning when I claim that this is what I think he means.</p>
<p>I’m not sure something like this would work in every situation. Our development team is already tearing through stories at a good clip even without fabricated pressure, so there’s no need to hold them to a deadline. I can’t imagine how we could make them work any better than they already are so all it would do is add stress and potentially mess up their feng shui.</p>
<p>Besides which, this is a web application with a monthly subscription. The whole notion of version releases seems steeped in the pre-package software world where distribution and marketing come into play. (“New in version 2! Ten percent more features for 25% more money!”) Since there are virtually no distribution costs, there’s no need to saddle ourselves with the corresponding release strategy.</p>
<p>The fact that it’s a monthly subscription model is also a contributing factor. It means we can charge based on the value of the features that are currently in the app. So initially, we may charge less than we originally expected because there aren’t as many features. As we add features, there is potential for adjusting the price accordingly. Of course, we won’t jack the price up every time we change the colour scheme but it’s a fair (and hopefully accurate) bet that most customers will recognize an increase in value when the time comes to re-evaluate.</p>
<p>Time, and our marketing department, will tell, I suppose.</p>
<p>Kyle the Pre-released</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/kylebaley/category/bookedin/" title="View all posts in BookedIN" rel="category">BookedIN</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/kylebaley/2010/10/04/release-management-or-how-to-de-version-your-app/#respond" title="Comment on Release management, or “How to de-version your app”"><span class="dsq-postid" rel="189 /blogs/kyle.baley/archive/2010/10/04/release-management-or-how-to-de-version-your-app.aspx">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-189 -->

		
						
			<div id="post-188" class="post-188 post type-post status-publish format-standard hentry category-google-app-engine">
			<h2 class="entry-title"><a href="http://codebetter.com/kylebaley/2010/09/28/options-for-upgrading-an-app-engine-application/" title="Permalink to Options for upgrading an App Engine application" rel="bookmark">Options for upgrading an App Engine application</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/kylebaley/2010/09/28/options-for-upgrading-an-app-engine-application/" title="1:41 pm" rel="bookmark"><span class="entry-date">September 28, 2010</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley" title="View all posts by Kyle Baley">Kyle Baley</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p><strong>Executive Summary</strong>: If you can’t figure it out from the title, then perhaps you should skip to the next post in your reader.</p>
<p>Now that we have a version of our application in the wild, and we’ve been forced to address a problem I’ve been able to avoid until now: How do we upgrade an AppEngine application when the data model has changed?</p>
<p>Let’s take two potential scenarios on why this is an issue. In the first, say the username was stored in a case-sensitive string and we’d like to ensure the username is case-insensitive. This is one case where SQL database proponents will snicker because this isn’t that easy in AppEngine. There’s no LCASE function embedded in the language.</p>
<p>To implement this is trivial. You ensure the username is all in lowercase <em>before</em> dumping it in the datastore. But if you already have existing data, that will need to be converted first.</p>
<p>Second scenario: Say you stored user passwords unencrypted and you realize <a href="http://xkcd.com/792/">there isn’t anything fun to do with all those passwords</a> so you decide to encrypt them. Again, we’ll need some process to run through the existing data to convert it to a new format.</p>
<p>Seems simple on the surface but there are some ramifications. And no shortage of options. I’ll start with the obvious</p>
<h3>The Big Bang</h3>
<p>This is the tried and mostly true approach. Here are the steps involved:</p>
<ol>
<li>Notify customers of downtime </li>
<li>Take app offline </li>
<li>Backup data </li>
<li>Upgrade application </li>
<li>Run upgrade scripts/code on data </li>
<li>Bring app online </li>
<li>Switch to decaf for a week until your nerves have returned to normal </li>
</ol>
<p><strong>Pros:</strong></p>
<p>This is an intuitive approach that has been used to varying degrees of success since the dawn of time. ASP.NET apps have support for it virtually built-in via the app_offline.htm file. Also, the backout plan is easy to understand. If anything goes wrong, restore the data and switch back to the old version.</p>
<p><strong>Cons:</strong></p>
<p>It’s kinda sad that users have come to expect downtime, even for an upgrade. One would think there is a better way by now…</p>
<p>Also, taking the app offline isn’t as easy as one might think in App Engine. The way I see it going down, we’d deploy a “down for maintenance” version of the app, then make that the default whenever we want to take the app offline. Then we’d switch the default version to the one we just deployed after we were done.</p>
<p>Another downside, you can’t test on live data like you can with other approaches (unless you do a data dump of production to a staging area).</p>
<p>Finally, backing up and converting will take longer and longer as the app grows in popularity and the size of the data increases. Which means a longer and longer downtime for upgrades. That doesn’t sit well with the hillbilly when one of App Engine’s main selling points is scalability.</p>
<h3>The Two-Pass Approach</h3>
<p>With the two-pass approach, we never change the meaning of a property on our entity. We either add or delete. Talking one of our examples above:</p>
<ol>
<li>Add a property to our User object called EncryptedPassword </li>
<li>Deploy the application </li>
<li>Run a script that reads the Password field, encrypts it, and stores it in EncryptedPassword. This can be run while the app is running.</li>
<li>Ensure the code checks EncryptedPassword first. If empty, then use Password. </li>
<li>At some point, when all passwords have been converted, we can delete the property and re-deploy the application with the property deleted. If we <em>really</em> want to be complete, we could later rename EncryptedPassword back to Password (and change all the code that touches it: see Cons below) </li>
</ol>
<p><strong>Pros</strong></p>
<p>Could be done in-place without taking the application down. Plus, there’s a built-in rollback plan. If something goes wrong, we still have the old data hanging around if we need it.</p>
<p><strong>Cons</strong></p>
<p>Logistics. Having code around that understands two versions of the model might make it hard to manage.</p>
<h3>Version Individual Entities</h3>
<p>This is an intriguing idea which should tip you off that it wasn’t mine. It came from our senior dev, Phil, and like many of his ideas, it’s easy to dismiss at first but grows on you once you think about it:</p>
<ol>
<li>Each entity has a version property. For the current model, which doesn’t, we assume a version of zero </li>
<li>Each entity has a series of commands for converting it from one version to the next. For example, the version 0 to 1 converter in one of our scenarios would convert the username to lowercase. </li>
<li>When we upgrade the application, we increase the current version of each entity but we don’t do anything to the existing data. That is, the application expects all entities to be version one but they are actually version zero. </li>
<li>Whenever we retrieve an entity from the datastore in our repositories, we check the version. If it’s not current, we start applying upgrade commands until it is current. Then we save it back to the data store. In either case, the repository will always be guaranteed to return a current version of the entity </li>
</ol>
<p><strong>Pros</strong></p>
<p>Upgrades can be done in-place. They’ll also be pretty quick too because there’s no data conversion process to worry about. At least not all at once.</p>
<p>This approach is also flexible in that we can use it to do a Big Bang upgrade if we so desire. For instance, we could take the app down, then run through a script that retrieves each entity. This will trigger the upgrade scripts to upgrade them.</p>
<p><strong>Cons</strong></p>
<p>Datastore will have different versions of various entities at any given time. Each specific entity will only have one version but in a given table, you will likely see many different versions, especially from customers that don’t use the app frequently.</p>
<p>That said, whether this matters to you is a matter of taste. For me, it would take some getting used to. It almost feels like the datastore would be in an inconsistent state with all these differently-versioned entities in it. There’s a certain psychological chaos involved.</p>
<p>Regardless, there is some extra code involved in the form of the upgrade commands for entities. Nice thing, though, is that they can be easily isolated.</p>
<p>There’s also the issue of rollbacks. If you discover some issue with the conversion code, you could have a pretty big mess to dig through.</p>
<p>Another issue, and this one just occurred to me know, is that it will make querying more difficult in some cases. Take our lowercase user example. If some users have a guaranteed-lowercase username and some don’t, we aren’t really fixing the problem for existing users.</p>
<h3>Namespacing</h3>
<p>This is an option that’s brand new to App Engine and thus, is one I don’t totally understand. In a recent App Engine update, there is support for multi-tenancy through namespaces, which helps to maintain silos of data. But you can also use namespaces for upgrading:</p>
<ol>
<li>Deploy the new version of the app to a different namespace. It’s “silo” would be empty to start with. </li>
<li>Migrate the data from the existing version’s namespace to the new one’s, converting as you go. Note that the new version would not be live at this point. Customers would still use the existing version </li>
<li>Test out the new version with the converted data. </li>
<li>Once satisfied, take app offline. </li>
<li>Re-import the data from version 1 to version 2 (to catch any changes that happened while testing) </li>
<li>Make version 2 the default version </li>
</ol>
<p><strong>Pros</strong></p>
<p>Allows for testing the application against real live data easily without having to migrate it to a separate staging environment.</p>
<p><strong>Cons</strong></p>
<p>Doesn’t scale if your datastore starts getting bigger. Also makes it harder to do multi-tenancy on a customer basis if you’re using namespacing for versions. It’s possible…but, well, if you have to say “it’s possible…”, you generally should look for alternatives.</p>
<p>Also, you have to import the data twice and you still have to take the application offline, or write some synchronization code.</p>
<h3>Google Approved</h3>
<p>Since starting this post, I sent an email to Fred Sauer, Developer Advocate for GWT and App Engine, and got this option back:</p>
<ol>
<li>Deploy a version of the app that understands both the old and new model but will upgrade or create new models only</li>
<li>Use the <a href="http://googleappengine.blogspot.com/2010/07/introducing-mapper-api.html">Mapper API</a> (or your own task queues) to migrate existing entities</li>
<li>Once migrated, remove support for the old model in a future deployment</li>
</ol>
<p>This sounds very much like the Two-Pass Approach described above. At first, I wasn’t too keen on it but on reflection, it offers several benefits (no downtime) at the expense of a bit of temporary code. And unlike the Version Individual Entities approach, the data store doesn’t have different versions of various entities lingering around.</p>
</p>
<hr />
<p>One thing I totally ignored in this discussion is cost. For example, in the namespacing option, you are essentially doubling the size of your datastore, if only for a short time. This may have an impact on the decision but the pricing is such that it probably won’t.</p>
<p>The issue is still under <a href="http://groups.google.com/group/google-appengine/browse_thread/thread/60b8df646094704b?pli=1">semi-active discussion</a> on the Google Group thread and unfortunately, there isn’t much consensus. Even within our own company, we are trying to decide between one of two options. And that didn’t include the one Google recommends until I got the response back from them this morning…</p>
<p>Kyle the Downgraded</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/kylebaley/category/google-app-engine/" title="View all posts in Google App Engine" rel="category">Google App Engine</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/kylebaley/2010/09/28/options-for-upgrading-an-app-engine-application/#respond" title="Comment on Options for upgrading an App Engine application"><span class="dsq-postid" rel="188 /blogs/kyle.baley/archive/2010/09/28/options-for-upgrading-an-app-engine-application.aspx">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-188 -->

		
						
			<div id="post-187" class="post-187 post type-post status-publish format-standard hentry category-bookedin category-gwt">
			<h2 class="entry-title"><a href="http://codebetter.com/kylebaley/2010/09/09/bookedin-net/" title="Permalink to BookedIN.net" rel="bookmark">BookedIN.net</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/kylebaley/2010/09/09/bookedin-net/" title="8:40 pm" rel="bookmark"><span class="entry-date">September 9, 2010</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley" title="View all posts by Kyle Baley">Kyle Baley</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p><a href="http://codebetter.com/cfs-file.ashx/__key/CommunityServer.Blogs.Components.WeblogFiles/kyle.baley/logobookedin1_5F00_54FF9D1F.gif"><img style="border-bottom: 0px;border-left: 0px;margin: 5px 10px 10px 5px;border-top: 0px;border-right: 0px" border="0" alt="logo-bookedin1" align="left" src="http://s3.amazonaws.com:80/CodeBetter/CommunityServer.Blogs.Components.WeblogFiles/kyle/baley/logobookedin1_thumb_37AA4555.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1919787601&amp;Signature=e93tm1Ma7OZbsbLfAXP%2bzUc7RV0%3d" width="231" height="69" /></a> It’s been many months of coding and even more months of planning but the time has come for some publicity.</p>
<p><a href="http://bookedin.net">BookedIN</a> is the name of the application we’ve been working on since the beginning of the year. The logo should give you some clues as to what it’s all about. The short version is it’s a scheduling system for small businesses though we do have long term plans for . This is the part that will generate revenue so we can fund that effort. Yeah, yeah, I know. Some startup we are, wanting to actual build a business rather than play with technology. What can I say, I’m risk averse that way.</p>
<p>The app is built on Google Web Toolkit which has been an interesting experience. One of the primary reasons we settled on it is because our application was going to be very heavy on the AJAX and my partner, having come off an extremely large web app, was gunshy about straight-ahead JavaScript, even with jQuery or MooTools. So the allure of GWT was too much to ignore.</p>
<p>During this time, I’ve also been doing some side work on an MVC project and it involves a heavy dose of JavaScript. jQuery has made this process easier though I’ve never disliked JavaScript as much as others.</p>
<p>The way I write JavaScript is pretty different than how I do C#. For JavaScript, it’s a little more off-the-cuff. I need a button to retrieve data from the server so I’ll throw in a $( “#loadData” ).click call in $( document ).ready( ) and away I go. When I’m done, there are a whole lot of magic strings and “var jsonData = &lt;%=Model.EventsAsJson%&gt;;” and parsing code and while the code works and was fun to write, I don’t get the same warm fuzzy feeling I used to.</p>
<p>It’s an unfair comparison between this process and what we do with GWT because what I *really* should be doing is writing JavaScript properly and applying a decent test strategy to it. All the same, doing the same thing in GWT feels like it gives higher odds for falling into the <a href="http://blogs.msdn.com/b/brada/archive/2003/10/02/50420.aspx">pit of success</a>.</p>
<p> That should be enough tech talk to allow me to justify this as a non-marketing post. Huge thanks to <a href="http://corp.bookedin.net/our-team.shtml">the team</a> for pulling this together. Future BookedIN-specific posts will be on <a href="http://corp.bookedin.net/blog/">the company blog</a>.</p>
<p>Kyle the Booked</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/kylebaley/category/bookedin/" title="View all posts in BookedIN" rel="category">BookedIN</a>, <a href="http://codebetter.com/kylebaley/category/gwt/" title="View all posts in GWT" rel="category">GWT</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/kylebaley/2010/09/09/bookedin-net/#respond" title="Comment on BookedIN.net"><span class="dsq-postid" rel="187 /blogs/kyle.baley/archive/2010/09/09/bookedin-net.aspx">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-187 -->

		
						
			<div id="post-186" class="post-186 post type-post status-publish format-standard hentry category-google-app-engine">
			<h2 class="entry-title"><a href="http://codebetter.com/kylebaley/2010/09/06/relationships-in-bigtable-or-how-to-put-extra-effort-into-being-lazy/" title="Permalink to Relationships in BigTable, or “How to put extra effort into being lazy”" rel="bookmark">Relationships in BigTable, or “How to put extra effort into being lazy”</a></h2>

			<div class="entry-meta">
				<span class="meta-prep meta-prep-author">Posted on </span><a href="http://codebetter.com/kylebaley/2010/09/06/relationships-in-bigtable-or-how-to-put-extra-effort-into-being-lazy/" title="9:34 pm" rel="bookmark"><span class="entry-date">September 6, 2010</span></a> <span class="meta-sep"> by </span> <span class="author vcard"><a class="url fn n" href="http://codebetter.com/kylebaley" title="View all posts by Kyle Baley">Kyle Baley</a></span>			</div><!-- .entry-meta -->

				<div class="entry-content">
				<p><strong>Executive Summary: </strong>We’ve had to re-think some of the relationships between our objects with BigTable and, in some cases, reverse them.</p>
<p>One thing you can never accuse the hillbilly of is proper use of prepositions. Another thing of which you can never accuse the hillbilly is that he is not lazy. (Nor can you not accuse his use of double negatives of not being interesting.)</p>
<p>NHibernate has made me lazy about loading things. It’s also made me lazy about querying things. But in the BigTable world of AppEngine, I’ve had to actually think about both of these topics.</p>
<p>In our domain, a StaffMember has a collection of exactly seven DayAvailability objects, each one representing his or her availability on a given day of the week. I’d show you a nice little class diagram but I’m still trying to maintain a base level of laziness here. And this blog post is increasingly not helping.<img style="margin-left: 0px;margin-right: 0px" alt="[lazy.gif]" align="right" src="http://2.bp.blogspot.com/_9ikW9SY7yeE/Rq0jQvwIepI/AAAAAAAABdw/PMm5C61vxNg/s1600/lazy.gif" /></p>
<p>Because it’s BigTable (which may be a NoSQL database if I had the gumption to look up what that exactly means rather than making assumptions based on the words involved), the collection of seven DayAvailability objects is stored with the staff member. I.e. I load the StaffMember, I get the DayAvailibility objects.</p>
<p>This is fine and dandy for our staff edit screen where we want to display the availability of the staff member. It’s also okay for our “add appointment” screen where we want to make sure that the appointment time falls within the staff’s availability.</p>
<p>Now let’s add a new scenario: A customer wants to book a massage at 2pm on Saturday. We open the book appointment screen and notice there are no slots available. The customer says “When’s the earliest after 2 I can get in?” We click on the handy new “find next available” link…</p>
<p>There are a couple of ways to implement this. Let’s try a naive approach where the system advances every half hour and checks to see if anyone is available that can perform the service. There are a few factors to consider but one of those factors is which staff members are available at 2:30.</p>
<p>In order to perform this query, we need to load each staff member and look through his or her availability. When it would be much easier to do a search like “Find an availability interval that includes 2:30 and return the staff member for it.”</p>
<p>Because of issues like these, we often have to rethink the relationship between objects. StaffMembers no longer carry a collection of DayAvailability objects. Rather, the DayAvailability object has a reference back to the staff member so that we can perform queries like the one above.</p>
<p>This affects the staff edit page because now we need an extra query. When we load the data for the page, we first get the StaffMember, then we query for all DayAvailability objects that refer to that StaffMember.</p>
<p><strike><a href="http://www.lostechies.com/blogs/sharoncichelli/archive/2010/08/30/three-simple-steps-to-improve-your-writing.aspx">Basically</a>, </strike>If you look closely, we’ve implemented a poor man’s lazy loading. The StaffMember now holds only the basic information. When we need its availability, we query for it.</p>
<p>After coming to terms with this, I decided it was actually a good thing. In many cases, we don’t need the staff member’s availability. So we don’t need to bandy it about like a wounded badger.</p>
<p>Who knew it was so much work being lazy?</p>
<p>Kyle the Re-edumacated</p>
							</div><!-- .entry-content -->
	
			<div class="entry-utility">
				<span class="cat-links"><span class="entry-utility-prep entry-utility-prep-cat-links">Posted in <a href="http://codebetter.com/kylebaley/category/google-app-engine/" title="View all posts in Google App Engine" rel="category">Google App Engine</a></span></span>
				<span class="meta-sep"> | </span>
												<span class="comments-link"><a href="http://codebetter.com/kylebaley/2010/09/06/relationships-in-bigtable-or-how-to-put-extra-effort-into-being-lazy/#respond" title="Comment on Relationships in BigTable, or “How to put extra effort into being lazy”"><span class="dsq-postid" rel="186 /blogs/kyle.baley/archive/2010/09/06/relationships-in-bigtable-or-how-to-put-extra-effort-into-being-lazy.aspx">View Comments</span></a></span>
							</div><!-- #entry-utility -->
		</div><!-- #post-186 -->

		
			
	<div id="nav-below" class="navigation">
		<div class="nav-next"><a href="?page=1" > Next Page &raquo;</a></div>
		
	</div><!-- #nav-below -->
			</div><!-- #main -->
			<div id="sidebar" class="grid_4">
						<div id="primary" class="widget-area">
			<ul class="xoxo">
				<div class="ad-container">
					<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-new-features?utm_source=cb&utm_medium=button&utm_term=4328&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="125" height="125" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/ANTSPP5_125x125_M1.gif"></a>
					<embed width="125" height="125" flashvars="clickTARGET=_blank&amp;clickTAG=http%3A%2F%2Fd1.openx.org%2Fck.php%3Foaparams%3D2__bannerid%3D62753__zoneid%3D29419__cb%3Da0471ce5e8__r_id%3Dd42118811971f057012db20aa261c5c1__r_ts%3Dldef6x__oadest%3Dhttp%253A%252F%252Fwww.jetbrains.com%252Fresharper%252F%253Frs4cb125" allowscriptaccess="always" quality="high" name="Advertisement" id="Advertisement" style="" src="http://s3.amazonaws.com/CodeBetter/Creative/tc_125x125_simple2.swf" type="application/x-shockwave-flash">
				</div>
			
				<li id="user_bio-2" class="widget-container widget_user_bio"><h3 class="widget-title"></h3>One of these days I will add something to my user profile! For now, I shall remain mysterious.
</li>		
						
			</ul>
			
		</div><!-- #primary .widget-area -->
		
		<div id="secondary" class="widget-area">
				<script type="text/javascript" src="http://engine.theloungenet.com/z/15/adzerk1_2_5"></script>
				<div id="adzerk1"></div>
				
				<ul class="xoxo">		
									</ul>	
				
				<a target="_blank" href="http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/entrypage/version-6-csharp?utm_source=cb&utm_medium=rectangle&utm_term=4327&utm_content=app6release&utm_campaign=antsperformanceprofiler"><img width="300" height="250" border="0" title="" alt="" src="http://s3.amazonaws.com/CodeBetter/Creative/APP6_Launch_C%23_Jun10_300x250_M1.gif?AWSAccessKeyId=0KMA35HT86EVXB99Z302&amp;Expires=1458095516&amp;Signature=BIBDilUaLnZe1uKfVKyyTBxr%2BvE%3D"></a>
				
		</div><!-- #secondary .widget-area -->			</div><!--sidebar-->
		</div><!-- #content -->
	
</div><!-- end div tabs see header.php -->
	
	<div id="footer">
		<div class="container_12">
		<div id="footer-widget-area">
				<div class="grid_4">					
					<ul>
					<li><a href="http://codebetter.com" title="home">Home</a></li>
					<li class="page_item page-item-2"><a href="http://codebetter.com/about/" title="About">About</a></li>
<li class="page_item page-item-8"><a href="http://codebetter.com/codebetter-ci/" title="CodeBetter CI">CodeBetter CI</a></li>
<li class="page_item page-item-6"><a href="http://codebetter.com/community/" title="Community">Community</a></li>
<li class="page_item page-item-10"><a href="http://codebetter.com/editors/" title="Editors">Editors</a></li>
<li class="page_item page-item-41"><a href="http://codebetter.com/globalsearch/" title="Search Results">Search Results</a></li>
					<li><a href="http://feeds.feedburner.com/CodeBetter" rel="alternate" type="application/rss+xml"><img src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" alt="" style="vertical-align:middle;border:0"/></a><a href="http://feeds.feedburner.com/CodeBetter"><img src="http://feeds.feedburner.com/~fc/CodeBetter?bg=FFFFFF&amp;fg=2E9BD2&amp;anim=1" height="26" width="88" style="vertical-align:middle;border:0"/></a></li>
					</ul>
				</div><!-- #second .widget-area -->
				<div class="grid_4">
					
					<h3>Friends of CodeBetter.Com</h3>
<ul>

<li><a href="/blogs/products/pages/64386.aspx">Red-Gate Tools For SQL and .NET</a></li>
<li><a href="/blogs/products/pages/64615.aspx">Telerik</a></li>
<li><a href="/blogs/products/pages/142174.aspx">JetBrains - ReSharper</a></li>
<li><a href="/blogs/products/pages/Beyond-Compare.aspx">Beyond Compare</a></li>
<li><a href="/blogs/products/pages/.NET-Memory-Profiler.aspx">.NET Memory Profiler</a></li>
<li><a href="http://www.ndepend.com/">NDepend</a></li>
<li><a href="http://www.sapphiresteel.com/">Ruby In Steel</a></li>
<li><a href="http://www.slickedit.com/">SlickEdit</a></li>
<li><a href="http://www.gurock.com/products/smartinspect/">SmartInspect .NET Logging</a></li>
<li>NGEDIT: <a href="http://www.viemu.com/">ViEmu</a> and <a href="http://www.codekana.com/">Codekana</a> </li>
<li><a href="http://www.devexpress.com/" target="_blank">DevExpress</a></li>
<li><a href="http://nhprof.com" target="_blank">NHibernate Profiler</a></li>
<li><a href="http://unfuddle.com" target="_blank">Unfuddle</a></li>
<li><a href="http://www.balsamiq.com/products/mockups" target="_blank">Balsamiq Mockups</a></li>
<li><a href="http://scrumy.com" target="_blank">Scrumy</a> &lt;-- NEW Friend!</li>

	</ul>				
				</div><!-- #third .widget-area -->
				<div class="grid_4">
					CodeBetter.Com &copy; '11<br />
						Stuff you need to Code Better!<br />
				Proudly powered by <span id="generator-link"><a href="http://wordpress.org/" title="Semantic Personal Publishing Platform" rel="generator">WordPress</a></span>.					
				</div><!-- #fourth .widget-area -->
			</div><!-- #footer-widget-area -->		
		
			</div><!-- end div.container_12 -->

	</div><!-- end div#footer -->
		
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-531207-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushCSharp.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushJScript.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushXml.js?ver=3.0.83b'></script>
<script type='text/javascript' src='/wp-content/plugins/syntaxhighlighter//third-party-brushes/shBrushFSharp.js?ver=3.0.83b'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore.css?ver=3.0.83b";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "/wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault.css?ver=3.0.83b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
    SyntaxHighlighter.defaults['tab-size'] = 2;
    SyntaxHighlighter.defaults['toolbar'] = false;
    SyntaxHighlighter.defaults['wrap-lines'] = false; 
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
 
</body>
</html>
<!-- Dynamic page generated in 0.278 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2011-01-24 15:56:47 -->
<!-- super cache -->